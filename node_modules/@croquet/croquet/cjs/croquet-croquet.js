/**
 * Copyright Croquet Corporation 2021
 * Bundle of @croquet/croquet
 * Date: 2021-08-24
 * Version: 1.0.4
 */

"use strict";if(Object.defineProperty(exports,"__esModule",{value:!0}),void 0===window.TextEncoder){window.TextEncoder=function(){},TextEncoder.prototype.encode=function(t){for(var e=t.length,n=-1,i="undefined"==typeof Uint8Array?new Array(1.5*e):new Uint8Array(3*e),r=0,o=0,s=0;s!==e;){if(r=t.charCodeAt(s),s+=1,r>=55296&&r<=56319){if(s===e){i[n+=1]=239,i[n+=1]=191,i[n+=1]=189;break}if(!((o=t.charCodeAt(s))>=56320&&o<=57343)){i[n+=1]=239,i[n+=1]=191,i[n+=1]=189;continue}if(s+=1,(r=1024*(r-55296)+o-56320+65536)>65535){i[n+=1]=240|r>>>18,i[n+=1]=128|r>>>12&63,i[n+=1]=128|r>>>6&63,i[n+=1]=128|63&r;continue}}r<=127?i[n+=1]=0|r:r<=2047?(i[n+=1]=192|r>>>6,i[n+=1]=128|63&r):(i[n+=1]=224|r>>>12,i[n+=1]=128|r>>>6&63,i[n+=1]=128|63&r)}return"undefined"!=typeof Uint8Array?i.subarray(0,n+1):(i.length=n+1,i)},TextEncoder.prototype.toString=function(){return"[object TextEncoder]"};try{Object.defineProperty(TextEncoder.prototype,"encoding",{get:function(){if(TextEncoder.prototype.isPrototypeOf(this))return"utf-8";throw TypeError("Illegal invocation")}})}catch(t){TextEncoder.prototype.encoding="utf-8"}"undefined"!=typeof Symbol&&(TextEncoder.prototype[Symbol.toStringTag]="TextEncoder")}function t(e){return(t="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(t){return typeof t}:function(t){return t&&"function"==typeof Symbol&&t.constructor===Symbol&&t!==Symbol.prototype?"symbol":typeof t})(e)}function e(t,e,n,i,r,o,s){try{var a=t[o](s),c=a.value}catch(t){return void n(t)}a.done?e(c):Promise.resolve(c).then(i,r)}function n(t){return function(){var n=this,i=arguments;return new Promise((function(r,o){var s=t.apply(n,i);function a(t){e(s,r,o,a,c,"next",t)}function c(t){e(s,r,o,a,c,"throw",t)}a(void 0)}))}}function i(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}function r(t,e){for(var n=0;n<e.length;n++){var i=e[n];i.enumerable=i.enumerable||!1,i.configurable=!0,"value"in i&&(i.writable=!0),Object.defineProperty(t,i.key,i)}}function o(t,e,n){return e&&r(t.prototype,e),n&&r(t,n),t}function s(t,e,n){return e in t?Object.defineProperty(t,e,{value:n,enumerable:!0,configurable:!0,writable:!0}):t[e]=n,t}function a(t,e){var n=Object.keys(t);if(Object.getOwnPropertySymbols){var i=Object.getOwnPropertySymbols(t);e&&(i=i.filter((function(e){return Object.getOwnPropertyDescriptor(t,e).enumerable}))),n.push.apply(n,i)}return n}function c(t){for(var e=1;e<arguments.length;e++){var n=null!=arguments[e]?arguments[e]:{};e%2?a(Object(n),!0).forEach((function(e){s(t,e,n[e])})):Object.getOwnPropertyDescriptors?Object.defineProperties(t,Object.getOwnPropertyDescriptors(n)):a(Object(n)).forEach((function(e){Object.defineProperty(t,e,Object.getOwnPropertyDescriptor(n,e))}))}return t}function l(t,e){if("function"!=typeof e&&null!==e)throw new TypeError("Super expression must either be null or a function");t.prototype=Object.create(e&&e.prototype,{constructor:{value:t,writable:!0,configurable:!0}}),e&&d(t,e)}function u(t){return(u=Object.setPrototypeOf?Object.getPrototypeOf:function(t){return t.__proto__||Object.getPrototypeOf(t)})(t)}function d(t,e){return(d=Object.setPrototypeOf||function(t,e){return t.__proto__=e,t})(t,e)}function h(){if("undefined"==typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"==typeof Proxy)return!0;try{return Date.prototype.toString.call(Reflect.construct(Date,[],(function(){}))),!0}catch(t){return!1}}function f(t,e,n){return(f=h()?Reflect.construct:function(t,e,n){var i=[null];i.push.apply(i,e);var r=new(Function.bind.apply(t,i));return n&&d(r,n.prototype),r}).apply(null,arguments)}function m(t){var e="function"==typeof Map?new Map:void 0;return(m=function(t){if(null===t||(n=t,-1===Function.toString.call(n).indexOf("[native code]")))return t;var n;if("function"!=typeof t)throw new TypeError("Super expression must either be null or a function");if(void 0!==e){if(e.has(t))return e.get(t);e.set(t,i)}function i(){return f(t,arguments,u(this).constructor)}return i.prototype=Object.create(t.prototype,{constructor:{value:i,enumerable:!1,writable:!0,configurable:!0}}),d(i,t)})(t)}function p(t,e){if(null==t)return{};var n,i,r=function(t,e){if(null==t)return{};var n,i,r={},o=Object.keys(t);for(i=0;i<o.length;i++)n=o[i],e.indexOf(n)>=0||(r[n]=t[n]);return r}(t,e);if(Object.getOwnPropertySymbols){var o=Object.getOwnPropertySymbols(t);for(i=0;i<o.length;i++)n=o[i],e.indexOf(n)>=0||Object.prototype.propertyIsEnumerable.call(t,n)&&(r[n]=t[n])}return r}function y(t,e){return!e||"object"!=typeof e&&"function"!=typeof e?function(t){if(void 0===t)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return t}(t):e}function b(t){var e=h();return function(){var n,i=u(t);if(e){var r=u(this).constructor;n=Reflect.construct(i,arguments,r)}else n=i.apply(this,arguments);return y(this,n)}}function v(t,e,n){return(v="undefined"!=typeof Reflect&&Reflect.get?Reflect.get:function(t,e,n){var i=function(t,e){for(;!Object.prototype.hasOwnProperty.call(t,e)&&null!==(t=u(t)););return t}(t,e);if(i){var r=Object.getOwnPropertyDescriptor(i,e);return r.get?r.get.call(n):r.value}})(t,e,n||t)}function g(t,e){return X(t)||function(t,e){if("undefined"==typeof Symbol||!(Symbol.iterator in Object(t)))return;var n=[],i=!0,r=!1,o=void 0;try{for(var s,a=t[Symbol.iterator]();!(i=(s=a.next()).done)&&(n.push(s.value),!e||n.length!==e);i=!0);}catch(t){r=!0,o=t}finally{try{i||null==a.return||a.return()}finally{if(r)throw o}}return n}(t,e)||x(t,e)||G()}function Z(t){return X(t)||L(t)||x(t)||G()}function w(t){return function(t){if(Array.isArray(t))return k(t)}(t)||L(t)||x(t)||function(){throw new TypeError("Invalid attempt to spread non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}()}function X(t){if(Array.isArray(t))return t}function L(t){if("undefined"!=typeof Symbol&&Symbol.iterator in Object(t))return Array.from(t)}function x(t,e){if(t){if("string"==typeof t)return k(t,e);var n=Object.prototype.toString.call(t).slice(8,-1);return"Object"===n&&t.constructor&&(n=t.constructor.name),"Map"===n||"Set"===n?Array.from(t):"Arguments"===n||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(n)?k(t,e):void 0}}function k(t,e){(null==e||e>t.length)&&(e=t.length);for(var n=0,i=new Array(e);n<e;n++)i[n]=t[n];return i}function G(){throw new TypeError("Invalid attempt to destructure non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}function S(t,e){var n;if("undefined"==typeof Symbol||null==t[Symbol.iterator]){if(Array.isArray(t)||(n=x(t))||e&&t&&"number"==typeof t.length){n&&(t=n);var i=0,r=function(){};return{s:r,n:function(){return i>=t.length?{done:!0}:{done:!1,value:t[i++]}},e:function(t){throw t},f:r}}throw new TypeError("Invalid attempt to iterate non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}var o,s=!0,a=!1;return{s:function(){n=t[Symbol.iterator]()},n:function(){var t=n.next();return s=t.done,t},e:function(t){a=!0,o=t},f:function(){try{s||null==n.return||n.return()}finally{if(a)throw o}}}}var W="undefined"!=typeof globalThis?globalThis:"undefined"!=typeof window?window:"undefined"!=typeof global?global:"undefined"!=typeof self?self:{};function Y(t,e,n){return t(n={path:e,exports:{},require:function(t,e){return I(null==e&&n.path)}},n.exports),n.exports}function C(t){if(t.__esModule)return t;var e=Object.defineProperty({},"__esModule",{value:!0});return Object.keys(t).forEach((function(n){var i=Object.getOwnPropertyDescriptor(t,n);Object.defineProperty(e,n,i.get?i:{enumerable:!0,get:function(){return t[n]}})})),e}function I(){throw new Error("Dynamic requires are not currently supported by @rollup/plugin-commonjs")}Y((function(e){var n=function(e){var n,i=Object.prototype,r=i.hasOwnProperty,o="function"==typeof Symbol?Symbol:{},s=o.iterator||"@@iterator",a=o.asyncIterator||"@@asyncIterator",c=o.toStringTag||"@@toStringTag";function l(t,e,n){return Object.defineProperty(t,e,{value:n,enumerable:!0,configurable:!0,writable:!0}),t[e]}try{l({},"")}catch(t){l=function(t,e,n){return t[e]=n}}function u(t,e,n,i){var r=e&&e.prototype instanceof b?e:b,o=Object.create(r.prototype),s=new Y(i||[]);return o._invoke=function(t,e,n){var i=h;return function(r,o){if(i===m)throw new Error("Generator is already running");if(i===p){if("throw"===r)throw o;return I()}for(n.method=r,n.arg=o;;){var s=n.delegate;if(s){var a=G(s,n);if(a){if(a===y)continue;return a}}if("next"===n.method)n.sent=n._sent=n.arg;else if("throw"===n.method){if(i===h)throw i=p,n.arg;n.dispatchException(n.arg)}else"return"===n.method&&n.abrupt("return",n.arg);i=m;var c=d(t,e,n);if("normal"===c.type){if(i=n.done?p:f,c.arg===y)continue;return{value:c.arg,done:n.done}}"throw"===c.type&&(i=p,n.method="throw",n.arg=c.arg)}}}(t,n,s),o}function d(t,e,n){try{return{type:"normal",arg:t.call(e,n)}}catch(t){return{type:"throw",arg:t}}}e.wrap=u;var h="suspendedStart",f="suspendedYield",m="executing",p="completed",y={};function b(){}function v(){}function g(){}var Z={};Z[s]=function(){return this};var w=Object.getPrototypeOf,X=w&&w(w(C([])));X&&X!==i&&r.call(X,s)&&(Z=X);var L=g.prototype=b.prototype=Object.create(Z);function x(t){["next","throw","return"].forEach((function(e){l(t,e,(function(t){return this._invoke(e,t)}))}))}function k(e,n){function i(o,s,a,c){var l=d(e[o],e,s);if("throw"!==l.type){var u=l.arg,h=u.value;return h&&"object"===t(h)&&r.call(h,"__await")?n.resolve(h.__await).then((function(t){i("next",t,a,c)}),(function(t){i("throw",t,a,c)})):n.resolve(h).then((function(t){u.value=t,a(u)}),(function(t){return i("throw",t,a,c)}))}c(l.arg)}var o;this._invoke=function(t,e){function r(){return new n((function(n,r){i(t,e,n,r)}))}return o=o?o.then(r,r):r()}}function G(t,e){var i=t.iterator[e.method];if(i===n){if(e.delegate=null,"throw"===e.method){if(t.iterator.return&&(e.method="return",e.arg=n,G(t,e),"throw"===e.method))return y;e.method="throw",e.arg=new TypeError("The iterator does not provide a 'throw' method")}return y}var r=d(i,t.iterator,e.arg);if("throw"===r.type)return e.method="throw",e.arg=r.arg,e.delegate=null,y;var o=r.arg;return o?o.done?(e[t.resultName]=o.value,e.next=t.nextLoc,"return"!==e.method&&(e.method="next",e.arg=n),e.delegate=null,y):o:(e.method="throw",e.arg=new TypeError("iterator result is not an object"),e.delegate=null,y)}function S(t){var e={tryLoc:t[0]};1 in t&&(e.catchLoc=t[1]),2 in t&&(e.finallyLoc=t[2],e.afterLoc=t[3]),this.tryEntries.push(e)}function W(t){var e=t.completion||{};e.type="normal",delete e.arg,t.completion=e}function Y(t){this.tryEntries=[{tryLoc:"root"}],t.forEach(S,this),this.reset(!0)}function C(t){if(t){var e=t[s];if(e)return e.call(t);if("function"==typeof t.next)return t;if(!isNaN(t.length)){var i=-1,o=function e(){for(;++i<t.length;)if(r.call(t,i))return e.value=t[i],e.done=!1,e;return e.value=n,e.done=!0,e};return o.next=o}}return{next:I}}function I(){return{value:n,done:!0}}return v.prototype=L.constructor=g,g.constructor=v,v.displayName=l(g,c,"GeneratorFunction"),e.isGeneratorFunction=function(t){var e="function"==typeof t&&t.constructor;return!!e&&(e===v||"GeneratorFunction"===(e.displayName||e.name))},e.mark=function(t){return Object.setPrototypeOf?Object.setPrototypeOf(t,g):(t.__proto__=g,l(t,c,"GeneratorFunction")),t.prototype=Object.create(L),t},e.awrap=function(t){return{__await:t}},x(k.prototype),k.prototype[a]=function(){return this},e.AsyncIterator=k,e.async=function(t,n,i,r,o){void 0===o&&(o=Promise);var s=new k(u(t,n,i,r),o);return e.isGeneratorFunction(n)?s:s.next().then((function(t){return t.done?t.value:s.next()}))},x(L),l(L,c,"Generator"),L[s]=function(){return this},L.toString=function(){return"[object Generator]"},e.keys=function(t){var e=[];for(var n in t)e.push(n);return e.reverse(),function n(){for(;e.length;){var i=e.pop();if(i in t)return n.value=i,n.done=!1,n}return n.done=!0,n}},e.values=C,Y.prototype={constructor:Y,reset:function(t){if(this.prev=0,this.next=0,this.sent=this._sent=n,this.done=!1,this.delegate=null,this.method="next",this.arg=n,this.tryEntries.forEach(W),!t)for(var e in this)"t"===e.charAt(0)&&r.call(this,e)&&!isNaN(+e.slice(1))&&(this[e]=n)},stop:function(){this.done=!0;var t=this.tryEntries[0].completion;if("throw"===t.type)throw t.arg;return this.rval},dispatchException:function(t){if(this.done)throw t;var e=this;function i(i,r){return a.type="throw",a.arg=t,e.next=i,r&&(e.method="next",e.arg=n),!!r}for(var o=this.tryEntries.length-1;o>=0;--o){var s=this.tryEntries[o],a=s.completion;if("root"===s.tryLoc)return i("end");if(s.tryLoc<=this.prev){var c=r.call(s,"catchLoc"),l=r.call(s,"finallyLoc");if(c&&l){if(this.prev<s.catchLoc)return i(s.catchLoc,!0);if(this.prev<s.finallyLoc)return i(s.finallyLoc)}else if(c){if(this.prev<s.catchLoc)return i(s.catchLoc,!0)}else{if(!l)throw new Error("try statement without catch or finally");if(this.prev<s.finallyLoc)return i(s.finallyLoc)}}}},abrupt:function(t,e){for(var n=this.tryEntries.length-1;n>=0;--n){var i=this.tryEntries[n];if(i.tryLoc<=this.prev&&r.call(i,"finallyLoc")&&this.prev<i.finallyLoc){var o=i;break}}o&&("break"===t||"continue"===t)&&o.tryLoc<=e&&e<=o.finallyLoc&&(o=null);var s=o?o.completion:{};return s.type=t,s.arg=e,o?(this.method="next",this.next=o.finallyLoc,y):this.complete(s)},complete:function(t,e){if("throw"===t.type)throw t.arg;return"break"===t.type||"continue"===t.type?this.next=t.arg:"return"===t.type?(this.rval=this.arg=t.arg,this.method="return",this.next="end"):"normal"===t.type&&e&&(this.next=e),y},finish:function(t){for(var e=this.tryEntries.length-1;e>=0;--e){var n=this.tryEntries[e];if(n.finallyLoc===t)return this.complete(n.completion,n.afterLoc),W(n),y}},catch:function(t){for(var e=this.tryEntries.length-1;e>=0;--e){var n=this.tryEntries[e];if(n.tryLoc===t){var i=n.completion;if("throw"===i.type){var r=i.arg;W(n)}return r}}throw new Error("illegal catch attempt")},delegateYield:function(t,e,i){return this.delegate={iterator:C(t),resultName:e,nextLoc:i},"next"===this.method&&(this.arg=n),y}},e}(e.exports);try{globalThis.regeneratorRuntime=n}catch(t){Function("r","regeneratorRuntime = r")(n)}}));Y((function(t){t.bundle&&t.bundle.modules&&t.bundle.cache&&function(){for(var e=t.bundle,n={},i={},r={},o=0,s=Object.entries(e.modules);o<s.length;o++){var a=g(s[o],2),c=a[0],l=a[1],u=""+e.modules[c][0],d=i[u];d?r[c]=d:i[u]=c;for(var h=0,f=Object.entries(l[1]);h<f.length;h++){var m=g(f[h],2),p=m[0],y=m[1];(n[y]||(n[y]=new Set)).add(p)}}for(var b=function(t){return n[t]?"".concat(w(n[t]).sort().join('" and "')):"top-level"},v={},Z=[],X=0,L=Object.entries(e.modules);X<L.length;X++)for(var x=g(L[X],2),k=x[0],G=x[1],W=0,Y=Object.entries(G[1]);W<Y.length;W++){var C=g(Y[W],2),I=C[0],T=C[1],R=r[T];R&&(e.cache[T]?v[R]=T:(G[1][I]=R,delete e.modules[T],Z.push('"'.concat(I,'" in "').concat(b(k),'" (').concat(k,")"))))}for(var K=0,P=Object.entries(e.modules);K<P.length;K++)for(var V=g(P[K],2),M=V[0],H=V[1],N=0,z=Object.entries(H[1]);N<z.length;N++){var j=g(z[N],2),F=j[0],_=j[1],J=v[_];J&&(e.cache[_]?console.warn('Could not deduplicate import "'.concat(F,'" in "').concat(b(M),'" (to fix, import "').concat(b(t.id),'" earlier)')):(H[1][F]=J,delete e.modules[_],Z.push('"'.concat(F,'" in "').concat(b(M),'" (').concat(M,")"))))}var E,Q=S(Z.sort());try{for(Q.s();!(E=Q.n()).done;){var D=E.value;console.log("Deduplicated import",D)}}catch(t){Q.e(t)}finally{Q.f()}}()}));var T=window.location.hostname.endsWith("croquet.studio"),R="",K="";function P(t,e){if(e){var n,i=S(e.split("&"));try{for(i.s();!(n=i.n()).done;){var r=n.value.split("="),o=r[0],s=!0;if(r.length>1&&(s=decodeURIComponent(r.slice(1).join("="))).match(/^(true|false|null|[0-9.]*|["[{].*)$/))try{s=JSON.parse(s)}catch(t){"["===s[0]&&(s=s.slice(1,-1).split(","))}t[o]=s}}catch(t){i.e(t)}finally{i.f()}}}var V=new(function(){function t(){i(this,t),this.getSession(),P(this,window.location.search.slice(1)),P(this,T?window.location.hash.slice(1):K),window.location.pathname.indexOf("/ar.html")>=0&&(this.ar=!0)}return o(t,[{key:"has",value:function(t,e,n){"boolean"!=typeof n&&(n=this.isHost(n));var i=this[t];if("string"!=typeof i)return n;var r=i.split(",");return!0===n&&(e="no".concat(e)),e.endsWith("s")&&(e=e.slice(0,-1)),r.includes(e)||r.includes("".concat(e,"s"))?!n:n}},{key:"getSession",value:function(){if(T){var t=window.location.pathname.match(/^\/([^/]+)\/(.*)$/);if(t)return R=t[1],t[2]}else{var e=window.location.hash.match(/^#([^&]+)&?(.*)$/);if(e)return e[1].includes("=")?(K="".concat(e[1],"&").concat(e[2]),""):(K=e[2],e[1])}return"string"==typeof this.session?(K=window.location.hash.slice(1),this.session):""}},{key:"setSession",value:function(t){var e=arguments.length>1&&void 0!==arguments[1]&&arguments[1];null==T&&this.getSession();var n=window.location,i=n.search,r=n.hash,o=T?"/".concat(R,"/").concat(t).concat(i).concat(r):"#".concat(t).concat(K?"&"+K:"");e?window.history.replaceState({},"",o):window.history.pushState({},"",o)}},{key:"isHost",value:function(t){var e=window.location.hostname;if(e===t)return!0;if("localhost"!==t)return!1;if(e.endsWith(".ngrok.io"))return!0;if("croquet.io"===e&&window.location.pathname.match(/^\/(dev|files)\//))return!0;return["127.0.0.1","[::1]"].includes(e)}},{key:"isLocalhost",value:function(){return this.isHost("localhost")}}]),t}()),M=function(e,n){n||(n={}),"function"==typeof n&&(n={cmp:n});var i,r="boolean"==typeof n.cycles&&n.cycles,o=n.cmp&&(i=n.cmp,function(t){return function(e,n){var r={key:e,value:t[e]},o={key:n,value:t[n]};return i(r,o)}}),s=[];return function e(n){if(n&&n.toJSON&&"function"==typeof n.toJSON&&(n=n.toJSON()),void 0!==n){if("number"==typeof n)return isFinite(n)?""+n:"null";if("object"!==t(n))return JSON.stringify(n);var i,a;if(Array.isArray(n)){for(a="[",i=0;i<n.length;i++)i&&(a+=","),a+=e(n[i])||"null";return a+"]"}if(null===n)return"null";if(-1!==s.indexOf(n)){if(r)return JSON.stringify("__cycle__");throw new TypeError("Converting circular structure to JSON")}var c=s.push(n)-1,l=Object.keys(n).sort(o&&o(n));for(a="",i=0;i<l.length;i++){var u=l[i],d=e(n[u]);d&&(a&&(a+=","),a+=JSON.stringify(u)+":"+d)}return s.splice(c,1),"{"+a+"}"}}(e)};function H(t){function e(t){var e=t.indexOf("{"),n=t.lastIndexOf("}");if(-1===e||-1===n||n<e)return t;var i=t.slice(0,e).replace(/\s+/g," ").replace(/\s\(/,"("),r=t.slice(e+1,n);return"".concat(i.trim(),"{").concat(r.trim(),"}")}var n=e(""+t);if(!n.startsWith("class")){var i=t.prototype;i&&(n+=Object.getOwnPropertyNames(i).map((function(t){return"".concat(t,":").concat(e(""+i[t]))})).join(""))}return n}function N(t){return btoa(String.fromCharCode.apply(String,w(new Uint8Array(t)))).replace(/=/g,"").replace(/\+/g,"-").replace(/\//g,"_")}function z(t){return j.apply(this,arguments)}function j(){return(j=n(regeneratorRuntime.mark((function t(e){var n;return regeneratorRuntime.wrap((function(t){for(;;)switch(t.prev=t.next){case 0:if(0!==e.length){t.next=2;break}return t.abrupt("return","47DEQpj8HBSa-_TImW-5JCeuQeRkm5NMpJWZG3hSuFU");case 2:return t.next=4,window.crypto.subtle.digest("SHA-256",e);case 4:return n=t.sent,t.abrupt("return",N(n));case 6:case"end":return t.stop()}}),t)})))).apply(this,arguments)}function F(){return V.has("debug","hashing",!1)}var _={},J=new TextEncoder;function E(t){return Q.apply(this,arguments)}function Q(){return(Q=n(regeneratorRuntime.mark((function t(e){var n,i;return regeneratorRuntime.wrap((function(t){for(;;)switch(t.prev=t.next){case 0:return n=J.encode(e),t.next=3,z(n);case 3:return i=t.sent,F()&&(_[i]={string:e,buffer:n}),t.abrupt("return",i);case 6:case"end":return t.stop()}}),t)})))).apply(this,arguments)}var D=[],U={};function B(t,e){return O.apply(this,arguments)}function O(){return(O=n(regeneratorRuntime.mark((function t(e,n){return regeneratorRuntime.wrap((function(t){for(;;)switch(t.prev=t.next){case 0:return t.abrupt("return",E(e+M(n)));case 1:case"end":return t.stop()}}),t)})))).apply(this,arguments)}var A=new Set;function q(t,e,n,i){return $.apply(this,arguments)}function $(){return($=n(regeneratorRuntime.mark((function t(e,n,i,r){var o,s,a,l,u,d,h,f,m,y;return regeneratorRuntime.wrap((function(t){for(;;)switch(t.prev=t.next){case 0:if(window.crypto&&window.crypto.subtle&&"function"==typeof window.crypto.subtle.digest){t.next=2;break}throw Error("Croquet: Crypto API not available.\nPlease access this page via https or localhost.");case 2:return t.next=4,B(e,n);case 4:if(o=t.sent,l=U[o],u="",!l){t.next=13;break}s=l.codeHashes,a=l.computedCodeHash,u=" (code hashing from cache)",t.next=20;break;case 13:return t.next=15,Promise.all(D);case 15:return s=t.sent,t.next=18,E([r].concat(w(s)).join("|"));case 18:a=t.sent,U[o]={codeHashes:s,computedCodeHash:a};case 20:return d=i.hashOverride,h=p(i,["hashOverride"]),f=d||a,t.next=24,E(o+M(h)+f);case 24:return m=t.sent,F()&&!A.has(m)&&(w(document.getElementsByTagName("meta")).find((function(t){return t.getAttribute("charset")}))||console.warn('Croquet: Missing <meta charset="..."> declaration. Croquet model code hashing might differ between browsers.'),_[a].what="Version ID",_[o].what="Persistent ID",_[m].what="Session ID",f!==a&&(s.push(a),_[a].what="Computed Version ID (replaced by overrideHash)",_[f]={what:"Version ID (as specified by overrideHash)"}),y=[].concat(w(s),[f,o,m]).map((function(t){return c({hash:t},_[t])})),console.log("Croquet: Debug Hashing for session ".concat(m).concat(u),y),A.add(m)),t.abrupt("return",{id:m,persistentId:o,codeHash:f,computedCodeHash:a});case 27:case"end":return t.stop()}}),t)})))).apply(this,arguments)}var tt,et=Y((function(e){var n,i;n=W,i=function(e){var n=function t(e){return new t.lib.init(e)};function i(t,e){return e.offset[t]?isNaN(e.offset[t])?e.offset[t]:e.offset[t]+"px":"0px"}function r(t,e){return!(!t||"string"!=typeof e||!(t.className&&t.className.trim().split(/\s+/gi).indexOf(e)>-1))}return n.lib=n.prototype={toastify:"1.9.1",constructor:n,init:function(t){return t||(t={}),this.options={},this.toastElement=null,this.options.text=t.text||"Hi there!",this.options.node=t.node,this.options.duration=0===t.duration?0:t.duration||3e3,this.options.selector=t.selector,this.options.callback=t.callback||function(){},this.options.destination=t.destination,this.options.newWindow=t.newWindow||!1,this.options.close=t.close||!1,this.options.gravity="bottom"===t.gravity?"toastify-bottom":"toastify-top",this.options.positionLeft=t.positionLeft||!1,this.options.position=t.position||"",this.options.backgroundColor=t.backgroundColor,this.options.avatar=t.avatar||"",this.options.className=t.className||"",this.options.stopOnFocus=void 0===t.stopOnFocus||t.stopOnFocus,this.options.onClick=t.onClick,this.options.offset=t.offset||{x:0,y:0},this},buildToast:function(){if(!this.options)throw"Toastify is not initialized";var e=document.createElement("div");if(e.className="toastify on "+this.options.className,this.options.position?e.className+=" toastify-"+this.options.position:!0===this.options.positionLeft?(e.className+=" toastify-left",console.warn("Property `positionLeft` will be depreciated in further versions. Please use `position` instead.")):e.className+=" toastify-right",e.className+=" "+this.options.gravity,this.options.backgroundColor&&(e.style.background=this.options.backgroundColor),this.options.node&&this.options.node.nodeType===Node.ELEMENT_NODE)e.appendChild(this.options.node);else if(e.innerHTML=this.options.text,""!==this.options.avatar){var n=document.createElement("img");n.src=this.options.avatar,n.className="toastify-avatar","left"==this.options.position||!0===this.options.positionLeft?e.appendChild(n):e.insertAdjacentElement("afterbegin",n)}if(!0===this.options.close){var r=document.createElement("span");r.innerHTML="&#10006;",r.className="toast-close",r.addEventListener("click",function(t){t.stopPropagation(),this.removeElement(this.toastElement),window.clearTimeout(this.toastElement.timeOutValue)}.bind(this));var o=window.innerWidth>0?window.innerWidth:screen.width;("left"==this.options.position||!0===this.options.positionLeft)&&o>360?e.insertAdjacentElement("afterbegin",r):e.appendChild(r)}if(this.options.stopOnFocus&&this.options.duration>0){var s=this;e.addEventListener("mouseover",(function(t){window.clearTimeout(e.timeOutValue)})),e.addEventListener("mouseleave",(function(){e.timeOutValue=window.setTimeout((function(){s.removeElement(e)}),s.options.duration)}))}if(void 0!==this.options.destination&&e.addEventListener("click",function(t){t.stopPropagation(),!0===this.options.newWindow?window.open(this.options.destination,"_blank"):window.location=this.options.destination}.bind(this)),"function"==typeof this.options.onClick&&void 0===this.options.destination&&e.addEventListener("click",function(t){t.stopPropagation(),this.options.onClick()}.bind(this)),"object"===t(this.options.offset)){var a=i("x",this.options),c=i("y",this.options),l="left"==this.options.position?a:"-".concat(a),u="toastify-top"==this.options.gravity?c:"-".concat(c);e.style.transform="translate(".concat(l,", ").concat(u,")")}return e},showToast:function(){var t;if(this.toastElement=this.buildToast(),!(t=void 0===this.options.selector?document.body:document.getElementById(this.options.selector)))throw"Root element is not defined";return t.insertBefore(this.toastElement,t.firstChild),n.reposition(),this.options.duration>0&&(this.toastElement.timeOutValue=window.setTimeout(function(){this.removeElement(this.toastElement)}.bind(this),this.options.duration)),this},hideToast:function(){this.toastElement.timeOutValue&&clearTimeout(this.toastElement.timeOutValue),this.removeElement(this.toastElement)},removeElement:function(t){t.className=t.className.replace(" on",""),window.setTimeout(function(){this.options.node&&this.options.node.parentNode&&this.options.node.parentNode.removeChild(this.options.node),t.parentNode&&t.parentNode.removeChild(t),this.options.callback.call(t),n.reposition()}.bind(this),400)}},n.reposition=function(){for(var t,e={top:15,bottom:15},n={top:15,bottom:15},i={top:15,bottom:15},o=document.getElementsByClassName("toastify"),s=0;s<o.length;s++){t=!0===r(o[s],"toastify-top")?"toastify-top":"toastify-bottom";var a=o[s].offsetHeight;t=t.substr(9,t.length-1),(window.innerWidth>0?window.innerWidth:screen.width)<=360?(o[s].style[t]=i[t]+"px",i[t]+=a+15):!0===r(o[s],"toastify-left")?(o[s].style[t]=e[t]+"px",e[t]+=a+15):(o[s].style[t]=n[t]+"px",n[t]+=a+15)}return this},n.lib.init.prototype=n.lib,n},e.exports?e.exports=i():n.Toastify=i()})),nt=C(Object.freeze({__proto__:null})),it=Y((function(e){!function(n,i,r){var o,s=256,a=r.pow(s,6),c=r.pow(2,52),l=2*c,u=255;function d(t,e,u){var d=[],b=p(m((e=1==e?{entropy:!0}:e||{}).entropy?[t,y(i)]:null==t?function(){try{var t;return o&&(t=o.randomBytes)?t=t(s):(t=new Uint8Array(s),(n.crypto||n.msCrypto).getRandomValues(t)),y(t)}catch(t){var e=n.navigator,r=e&&e.plugins;return[+new Date,n,r,n.screen,y(i)]}}():t,3),d),v=new h(d),g=function(){for(var t=v.g(6),e=a,n=0;t<c;)t=(t+n)*s,e*=s,n=v.g(1);for(;t>=l;)t/=2,e/=2,n>>>=1;return(t+n)/e};return g.int32=function(){return 0|v.g(4)},g.quick=function(){return v.g(4)/4294967296},g.double=g,p(y(v.S),i),(e.pass||u||function(t,e,n,i){return i&&(i.S&&f(i,v),t.state=function(){return f(v,{})}),n?(r.random=t,e):t})(g,b,"global"in e?e.global:this==r,e.state)}function h(t){var e,n=t.length,i=this,r=0,o=i.i=i.j=0,a=i.S=[];for(n||(t=[n++]);r<s;)a[r]=r++;for(r=0;r<s;r++)a[r]=a[o=u&o+t[r%n]+(e=a[r])],a[o]=e;(i.g=function(t){for(var e,n=0,r=i.i,o=i.j,a=i.S;t--;)e=a[r=u&r+1],n=n*s+a[u&(a[r]=a[o=u&o+e])+(a[o]=e)];return i.i=r,i.j=o,n})(s)}function f(t,e){return e.i=t.i,e.j=t.j,e.S=t.S.slice(),e}function m(e,n){var i,r=[],o=t(e);if(n&&"object"==o)for(i in e)try{r.push(m(e[i],n-1))}catch(t){}return r.length?r:"string"==o?e:e+"\0"}function p(t,e){for(var n,i=t+"",r=0;r<i.length;)e[u&r]=u&(n^=19*e[u&r])+i.charCodeAt(r++);return y(e)}function y(t){return String.fromCharCode.apply(0,t)}if(p(r.random(),i),e.exports){e.exports=d;try{o=nt}catch(t){}}else r.seedrandom=d}("undefined"!=typeof self?self:W,[],Math)}));!function(){function t(t){this.mode=n.MODE_8BIT_BYTE,this.data=t,this.parsedData=[];for(var e=0,i=this.data.length;e<i;e++){var r=[],o=this.data.charCodeAt(e);o>65536?(r[0]=240|(1835008&o)>>>18,r[1]=128|(258048&o)>>>12,r[2]=128|(4032&o)>>>6,r[3]=128|63&o):o>2048?(r[0]=224|(61440&o)>>>12,r[1]=128|(4032&o)>>>6,r[2]=128|63&o):o>128?(r[0]=192|(1984&o)>>>6,r[1]=128|63&o):r[0]=o,this.parsedData.push(r)}this.parsedData=Array.prototype.concat.apply([],this.parsedData),this.parsedData.length!=this.data.length&&(this.parsedData.unshift(191),this.parsedData.unshift(187),this.parsedData.unshift(239))}function e(t,e){this.typeNumber=t,this.errorCorrectLevel=e,this.modules=null,this.moduleCount=0,this.dataCache=null,this.dataList=[]}t.prototype={getLength:function(t){return this.parsedData.length},write:function(t){for(var e=0,n=this.parsedData.length;e<n;e++)t.put(this.parsedData[e],8)}},e.prototype={addData:function(e){var n=new t(e);this.dataList.push(n),this.dataCache=null},isDark:function(t,e){if(t<0||this.moduleCount<=t||e<0||this.moduleCount<=e)throw new Error(t+","+e);return this.modules[t][e]},getModuleCount:function(){return this.moduleCount},make:function(){this.makeImpl(!1,this.getBestMaskPattern())},makeImpl:function(t,n){this.moduleCount=4*this.typeNumber+17,this.modules=new Array(this.moduleCount);for(var i=0;i<this.moduleCount;i++){this.modules[i]=new Array(this.moduleCount);for(var r=0;r<this.moduleCount;r++)this.modules[i][r]=null}this.setupPositionProbePattern(0,0),this.setupPositionProbePattern(this.moduleCount-7,0),this.setupPositionProbePattern(0,this.moduleCount-7),this.setupPositionAdjustPattern(),this.setupTimingPattern(),this.setupTypeInfo(t,n),this.typeNumber>=7&&this.setupTypeNumber(t),null==this.dataCache&&(this.dataCache=e.createData(this.typeNumber,this.errorCorrectLevel,this.dataList)),this.mapData(this.dataCache,n)},setupPositionProbePattern:function(t,e){for(var n=-1;n<=7;n++)if(!(t+n<=-1||this.moduleCount<=t+n))for(var i=-1;i<=7;i++)e+i<=-1||this.moduleCount<=e+i||(this.modules[t+n][e+i]=0<=n&&n<=6&&(0==i||6==i)||0<=i&&i<=6&&(0==n||6==n)||2<=n&&n<=4&&2<=i&&i<=4)},getBestMaskPattern:function(){for(var t=0,e=0,n=0;n<8;n++){this.makeImpl(!0,n);var i=h.getLostPoint(this);(0==n||t>i)&&(t=i,e=n)}return e},createMovieClip:function(t,e,n){var i=t.createEmptyMovieClip(e,n);this.make();for(var r=0;r<this.modules.length;r++)for(var o=1*r,s=0;s<this.modules[r].length;s++){var a=1*s;this.modules[r][s]&&(i.beginFill(0,100),i.moveTo(a,o),i.lineTo(a+1,o),i.lineTo(a+1,o+1),i.lineTo(a,o+1),i.endFill())}return i},setupTimingPattern:function(){for(var t=8;t<this.moduleCount-8;t++)null==this.modules[t][6]&&(this.modules[t][6]=t%2==0);for(var e=8;e<this.moduleCount-8;e++)null==this.modules[6][e]&&(this.modules[6][e]=e%2==0)},setupPositionAdjustPattern:function(){for(var t=h.getPatternPosition(this.typeNumber),e=0;e<t.length;e++)for(var n=0;n<t.length;n++){var i=t[e],r=t[n];if(null==this.modules[i][r])for(var o=-2;o<=2;o++)for(var s=-2;s<=2;s++)this.modules[i+o][r+s]=-2==o||2==o||-2==s||2==s||0==o&&0==s}},setupTypeNumber:function(t){for(var e=h.getBCHTypeNumber(this.typeNumber),n=0;n<18;n++){var i=!t&&1==(e>>n&1);this.modules[Math.floor(n/3)][n%3+this.moduleCount-8-3]=i}for(n=0;n<18;n++){i=!t&&1==(e>>n&1);this.modules[n%3+this.moduleCount-8-3][Math.floor(n/3)]=i}},setupTypeInfo:function(t,e){for(var n=this.errorCorrectLevel<<3|e,i=h.getBCHTypeInfo(n),r=0;r<15;r++){var o=!t&&1==(i>>r&1);r<6?this.modules[r][8]=o:r<8?this.modules[r+1][8]=o:this.modules[this.moduleCount-15+r][8]=o}for(r=0;r<15;r++){o=!t&&1==(i>>r&1);r<8?this.modules[8][this.moduleCount-r-1]=o:r<9?this.modules[8][15-r-1+1]=o:this.modules[8][15-r-1]=o}this.modules[this.moduleCount-8][8]=!t},mapData:function(t,e){for(var n=-1,i=this.moduleCount-1,r=7,o=0,s=this.moduleCount-1;s>0;s-=2)for(6==s&&s--;;){for(var a=0;a<2;a++)if(null==this.modules[i][s-a]){var c=!1;o<t.length&&(c=1==(t[o]>>>r&1)),h.getMask(e,i,s-a)&&(c=!c),this.modules[i][s-a]=c,-1==--r&&(o++,r=7)}if((i+=n)<0||this.moduleCount<=i){i-=n,n=-n;break}}}},e.PAD0=236,e.PAD1=17,e.createData=function(t,n,i){for(var r=y.getRSBlocks(t,n),o=new b,s=0;s<i.length;s++){var a=i[s];o.put(a.mode,4),o.put(a.getLength(),h.getLengthInBits(a.mode,t)),a.write(o)}var c=0;for(s=0;s<r.length;s++)c+=r[s].dataCount;if(o.getLengthInBits()>8*c)throw new Error("code length overflow. ("+o.getLengthInBits()+">"+8*c+")");for(o.getLengthInBits()+4<=8*c&&o.put(0,4);o.getLengthInBits()%8!=0;)o.putBit(!1);for(;!(o.getLengthInBits()>=8*c||(o.put(e.PAD0,8),o.getLengthInBits()>=8*c));)o.put(e.PAD1,8);return e.createBytes(o,r)},e.createBytes=function(t,e){for(var n=0,i=0,r=0,o=new Array(e.length),s=new Array(e.length),a=0;a<e.length;a++){var c=e[a].dataCount,l=e[a].totalCount-c;i=Math.max(i,c),r=Math.max(r,l),o[a]=new Array(c);for(var u=0;u<o[a].length;u++)o[a][u]=255&t.buffer[u+n];n+=c;var d=h.getErrorCorrectPolynomial(l),f=new p(o[a],d.getLength()-1).mod(d);s[a]=new Array(d.getLength()-1);for(u=0;u<s[a].length;u++){var m=u+f.getLength()-s[a].length;s[a][u]=m>=0?f.get(m):0}}var y=0;for(u=0;u<e.length;u++)y+=e[u].totalCount;var b=new Array(y),v=0;for(u=0;u<i;u++)for(a=0;a<e.length;a++)u<o[a].length&&(b[v++]=o[a][u]);for(u=0;u<r;u++)for(a=0;a<e.length;a++)u<s[a].length&&(b[v++]=s[a][u]);return b};for(var n={MODE_NUMBER:1,MODE_ALPHA_NUM:2,MODE_8BIT_BYTE:4,MODE_KANJI:8},i={L:1,M:0,Q:3,H:2},r=0,o=1,s=2,a=3,c=4,l=5,u=6,d=7,h={PATTERN_POSITION_TABLE:[[],[6,18],[6,22],[6,26],[6,30],[6,34],[6,22,38],[6,24,42],[6,26,46],[6,28,50],[6,30,54],[6,32,58],[6,34,62],[6,26,46,66],[6,26,48,70],[6,26,50,74],[6,30,54,78],[6,30,56,82],[6,30,58,86],[6,34,62,90],[6,28,50,72,94],[6,26,50,74,98],[6,30,54,78,102],[6,28,54,80,106],[6,32,58,84,110],[6,30,58,86,114],[6,34,62,90,118],[6,26,50,74,98,122],[6,30,54,78,102,126],[6,26,52,78,104,130],[6,30,56,82,108,134],[6,34,60,86,112,138],[6,30,58,86,114,142],[6,34,62,90,118,146],[6,30,54,78,102,126,150],[6,24,50,76,102,128,154],[6,28,54,80,106,132,158],[6,32,58,84,110,136,162],[6,26,54,82,110,138,166],[6,30,58,86,114,142,170]],G15:1335,G18:7973,G15_MASK:21522,getBCHTypeInfo:function(t){for(var e=t<<10;h.getBCHDigit(e)-h.getBCHDigit(h.G15)>=0;)e^=h.G15<<h.getBCHDigit(e)-h.getBCHDigit(h.G15);return(t<<10|e)^h.G15_MASK},getBCHTypeNumber:function(t){for(var e=t<<12;h.getBCHDigit(e)-h.getBCHDigit(h.G18)>=0;)e^=h.G18<<h.getBCHDigit(e)-h.getBCHDigit(h.G18);return t<<12|e},getBCHDigit:function(t){for(var e=0;0!=t;)e++,t>>>=1;return e},getPatternPosition:function(t){return h.PATTERN_POSITION_TABLE[t-1]},getMask:function(t,e,n){switch(t){case r:return(e+n)%2==0;case o:return e%2==0;case s:return n%3==0;case a:return(e+n)%3==0;case c:return(Math.floor(e/2)+Math.floor(n/3))%2==0;case l:return e*n%2+e*n%3==0;case u:return(e*n%2+e*n%3)%2==0;case d:return(e*n%3+(e+n)%2)%2==0;default:throw new Error("bad maskPattern:"+t)}},getErrorCorrectPolynomial:function(t){for(var e=new p([1],0),n=0;n<t;n++)e=e.multiply(new p([1,f.gexp(n)],0));return e},getLengthInBits:function(t,e){if(1<=e&&e<10)switch(t){case n.MODE_NUMBER:return 10;case n.MODE_ALPHA_NUM:return 9;case n.MODE_8BIT_BYTE:case n.MODE_KANJI:return 8;default:throw new Error("mode:"+t)}else if(e<27)switch(t){case n.MODE_NUMBER:return 12;case n.MODE_ALPHA_NUM:return 11;case n.MODE_8BIT_BYTE:return 16;case n.MODE_KANJI:return 10;default:throw new Error("mode:"+t)}else{if(!(e<41))throw new Error("type:"+e);switch(t){case n.MODE_NUMBER:return 14;case n.MODE_ALPHA_NUM:return 13;case n.MODE_8BIT_BYTE:return 16;case n.MODE_KANJI:return 12;default:throw new Error("mode:"+t)}}},getLostPoint:function(t){for(var e=t.getModuleCount(),n=0,i=0;i<e;i++)for(var r=0;r<e;r++){for(var o=0,s=t.isDark(i,r),a=-1;a<=1;a++)if(!(i+a<0||e<=i+a))for(var c=-1;c<=1;c++)r+c<0||e<=r+c||0==a&&0==c||s==t.isDark(i+a,r+c)&&o++;o>5&&(n+=3+o-5)}for(i=0;i<e-1;i++)for(r=0;r<e-1;r++){var l=0;t.isDark(i,r)&&l++,t.isDark(i+1,r)&&l++,t.isDark(i,r+1)&&l++,t.isDark(i+1,r+1)&&l++,0!=l&&4!=l||(n+=3)}for(i=0;i<e;i++)for(r=0;r<e-6;r++)t.isDark(i,r)&&!t.isDark(i,r+1)&&t.isDark(i,r+2)&&t.isDark(i,r+3)&&t.isDark(i,r+4)&&!t.isDark(i,r+5)&&t.isDark(i,r+6)&&(n+=40);for(r=0;r<e;r++)for(i=0;i<e-6;i++)t.isDark(i,r)&&!t.isDark(i+1,r)&&t.isDark(i+2,r)&&t.isDark(i+3,r)&&t.isDark(i+4,r)&&!t.isDark(i+5,r)&&t.isDark(i+6,r)&&(n+=40);var u=0;for(r=0;r<e;r++)for(i=0;i<e;i++)t.isDark(i,r)&&u++;return n+=10*(Math.abs(100*u/e/e-50)/5)}},f={glog:function(t){if(t<1)throw new Error("glog("+t+")");return f.LOG_TABLE[t]},gexp:function(t){for(;t<0;)t+=255;for(;t>=256;)t-=255;return f.EXP_TABLE[t]},EXP_TABLE:new Array(256),LOG_TABLE:new Array(256)},m=0;m<8;m++)f.EXP_TABLE[m]=1<<m;for(m=8;m<256;m++)f.EXP_TABLE[m]=f.EXP_TABLE[m-4]^f.EXP_TABLE[m-5]^f.EXP_TABLE[m-6]^f.EXP_TABLE[m-8];for(m=0;m<255;m++)f.LOG_TABLE[f.EXP_TABLE[m]]=m;function p(t,e){if(null==t.length)throw new Error(t.length+"/"+e);for(var n=0;n<t.length&&0==t[n];)n++;this.num=new Array(t.length-n+e);for(var i=0;i<t.length-n;i++)this.num[i]=t[i+n]}function y(t,e){this.totalCount=t,this.dataCount=e}function b(){this.buffer=[],this.length=0}p.prototype={get:function(t){return this.num[t]},getLength:function(){return this.num.length},multiply:function(t){for(var e=new Array(this.getLength()+t.getLength()-1),n=0;n<this.getLength();n++)for(var i=0;i<t.getLength();i++)e[n+i]^=f.gexp(f.glog(this.get(n))+f.glog(t.get(i)));return new p(e,0)},mod:function(t){if(this.getLength()-t.getLength()<0)return this;for(var e=f.glog(this.get(0))-f.glog(t.get(0)),n=new Array(this.getLength()),i=0;i<this.getLength();i++)n[i]=this.get(i);for(i=0;i<t.getLength();i++)n[i]^=f.gexp(f.glog(t.get(i))+e);return new p(n,0).mod(t)}},y.RS_BLOCK_TABLE=[[1,26,19],[1,26,16],[1,26,13],[1,26,9],[1,44,34],[1,44,28],[1,44,22],[1,44,16],[1,70,55],[1,70,44],[2,35,17],[2,35,13],[1,100,80],[2,50,32],[2,50,24],[4,25,9],[1,134,108],[2,67,43],[2,33,15,2,34,16],[2,33,11,2,34,12],[2,86,68],[4,43,27],[4,43,19],[4,43,15],[2,98,78],[4,49,31],[2,32,14,4,33,15],[4,39,13,1,40,14],[2,121,97],[2,60,38,2,61,39],[4,40,18,2,41,19],[4,40,14,2,41,15],[2,146,116],[3,58,36,2,59,37],[4,36,16,4,37,17],[4,36,12,4,37,13],[2,86,68,2,87,69],[4,69,43,1,70,44],[6,43,19,2,44,20],[6,43,15,2,44,16],[4,101,81],[1,80,50,4,81,51],[4,50,22,4,51,23],[3,36,12,8,37,13],[2,116,92,2,117,93],[6,58,36,2,59,37],[4,46,20,6,47,21],[7,42,14,4,43,15],[4,133,107],[8,59,37,1,60,38],[8,44,20,4,45,21],[12,33,11,4,34,12],[3,145,115,1,146,116],[4,64,40,5,65,41],[11,36,16,5,37,17],[11,36,12,5,37,13],[5,109,87,1,110,88],[5,65,41,5,66,42],[5,54,24,7,55,25],[11,36,12],[5,122,98,1,123,99],[7,73,45,3,74,46],[15,43,19,2,44,20],[3,45,15,13,46,16],[1,135,107,5,136,108],[10,74,46,1,75,47],[1,50,22,15,51,23],[2,42,14,17,43,15],[5,150,120,1,151,121],[9,69,43,4,70,44],[17,50,22,1,51,23],[2,42,14,19,43,15],[3,141,113,4,142,114],[3,70,44,11,71,45],[17,47,21,4,48,22],[9,39,13,16,40,14],[3,135,107,5,136,108],[3,67,41,13,68,42],[15,54,24,5,55,25],[15,43,15,10,44,16],[4,144,116,4,145,117],[17,68,42],[17,50,22,6,51,23],[19,46,16,6,47,17],[2,139,111,7,140,112],[17,74,46],[7,54,24,16,55,25],[34,37,13],[4,151,121,5,152,122],[4,75,47,14,76,48],[11,54,24,14,55,25],[16,45,15,14,46,16],[6,147,117,4,148,118],[6,73,45,14,74,46],[11,54,24,16,55,25],[30,46,16,2,47,17],[8,132,106,4,133,107],[8,75,47,13,76,48],[7,54,24,22,55,25],[22,45,15,13,46,16],[10,142,114,2,143,115],[19,74,46,4,75,47],[28,50,22,6,51,23],[33,46,16,4,47,17],[8,152,122,4,153,123],[22,73,45,3,74,46],[8,53,23,26,54,24],[12,45,15,28,46,16],[3,147,117,10,148,118],[3,73,45,23,74,46],[4,54,24,31,55,25],[11,45,15,31,46,16],[7,146,116,7,147,117],[21,73,45,7,74,46],[1,53,23,37,54,24],[19,45,15,26,46,16],[5,145,115,10,146,116],[19,75,47,10,76,48],[15,54,24,25,55,25],[23,45,15,25,46,16],[13,145,115,3,146,116],[2,74,46,29,75,47],[42,54,24,1,55,25],[23,45,15,28,46,16],[17,145,115],[10,74,46,23,75,47],[10,54,24,35,55,25],[19,45,15,35,46,16],[17,145,115,1,146,116],[14,74,46,21,75,47],[29,54,24,19,55,25],[11,45,15,46,46,16],[13,145,115,6,146,116],[14,74,46,23,75,47],[44,54,24,7,55,25],[59,46,16,1,47,17],[12,151,121,7,152,122],[12,75,47,26,76,48],[39,54,24,14,55,25],[22,45,15,41,46,16],[6,151,121,14,152,122],[6,75,47,34,76,48],[46,54,24,10,55,25],[2,45,15,64,46,16],[17,152,122,4,153,123],[29,74,46,14,75,47],[49,54,24,10,55,25],[24,45,15,46,46,16],[4,152,122,18,153,123],[13,74,46,32,75,47],[48,54,24,14,55,25],[42,45,15,32,46,16],[20,147,117,4,148,118],[40,75,47,7,76,48],[43,54,24,22,55,25],[10,45,15,67,46,16],[19,148,118,6,149,119],[18,75,47,31,76,48],[34,54,24,34,55,25],[20,45,15,61,46,16]],y.getRSBlocks=function(t,e){var n=y.getRsBlockTable(t,e);if(null==n)throw new Error("bad rs block @ typeNumber:"+t+"/errorCorrectLevel:"+e);for(var i=n.length/3,r=[],o=0;o<i;o++)for(var s=n[3*o+0],a=n[3*o+1],c=n[3*o+2],l=0;l<s;l++)r.push(new y(a,c));return r},y.getRsBlockTable=function(t,e){switch(e){case i.L:return y.RS_BLOCK_TABLE[4*(t-1)+0];case i.M:return y.RS_BLOCK_TABLE[4*(t-1)+1];case i.Q:return y.RS_BLOCK_TABLE[4*(t-1)+2];case i.H:return y.RS_BLOCK_TABLE[4*(t-1)+3];default:return}},b.prototype={get:function(t){var e=Math.floor(t/8);return 1==(this.buffer[e]>>>7-t%8&1)},put:function(t,e){for(var n=0;n<e;n++)this.putBit(1==(t>>>e-n-1&1))},getLengthInBits:function(){return this.length},putBit:function(t){var e=Math.floor(this.length/8);this.buffer.length<=e&&this.buffer.push(0),t&&(this.buffer[e]|=128>>>this.length%8),this.length++}};var v=[[17,14,11,7],[32,26,20,14],[53,42,32,24],[78,62,46,34],[106,84,60,44],[134,106,74,58],[154,122,86,64],[192,152,108,84],[230,180,130,98],[271,213,151,119],[321,251,177,137],[367,287,203,155],[425,331,241,177],[458,362,258,194],[520,412,292,220],[586,450,322,250],[644,504,364,280],[718,560,394,310],[792,624,442,338],[858,666,482,382],[929,711,509,403],[1003,779,565,439],[1091,857,611,461],[1171,911,661,511],[1273,997,715,535],[1367,1059,751,593],[1465,1125,805,625],[1528,1190,868,658],[1628,1264,908,698],[1732,1370,982,742],[1840,1452,1030,790],[1952,1538,1112,842],[2068,1628,1168,898],[2188,1722,1228,958],[2303,1809,1283,983],[2431,1911,1351,1051],[2563,1989,1423,1093],[2699,2099,1499,1139],[2809,2213,1579,1219],[2953,2331,1663,1273]],g=function(){var t=function(t,e){this._bIsPainted=!1,this._htOption=e,this._elCanvas=document.createElement("canvas"),this._elCanvas.width=e.width,this._elCanvas.height=e.height,t.appendChild(this._elCanvas),this._el=t,this._oContext=this._elCanvas.getContext("2d"),this._bIsPainted=!1,this._bSupportDataURI=null};return t.prototype.draw=function(t){var e=this._oContext,n=this._htOption,i=t.getModuleCount(),r=n.width/i,o=n.height/i,s=Math.round(r),a=Math.round(o);this.clear();for(var c=0;c<i;c++)for(var l=0;l<i;l++){var u=t.isDark(c,l),d=l*r,h=c*o;e.strokeStyle=u?n.colorDark:n.colorLight,e.lineWidth=1,e.fillStyle=u?n.colorDark:n.colorLight,e.fillRect(d,h,r,o),e.strokeRect(Math.floor(d)+.5,Math.floor(h)+.5,s,a),e.strokeRect(Math.ceil(d)-.5,Math.ceil(h)-.5,s,a)}this._bIsPainted=!0},t.prototype.isPainted=function(){return this._bIsPainted},t.prototype.clear=function(){this._oContext.clearRect(0,0,this._elCanvas.width,this._elCanvas.height),this._bIsPainted=!1},t.prototype.round=function(t){return t?Math.floor(1e3*t)/1e3:t},t}();function Z(t,e){for(var n=1,r=function(t){var e=encodeURI(t).toString().replace(/\%[0-9a-fA-F]{2}/g,"a");return e.length+(e.length!=t?3:0)}(t),o=0,s=v.length;o<=s;o++){var a=0;switch(e){case i.L:a=v[o][0];break;case i.M:a=v[o][1];break;case i.Q:a=v[o][2];break;case i.H:a=v[o][3]}if(r<=a)break;n++}if(n>v.length)throw new Error("Too long data");return n}(tt=function(t,e){if(this._htOption={width:256,height:256,typeNumber:4,colorDark:"#000000",colorLight:"#ffffff",correctLevel:i.H},"string"==typeof e&&(e={text:e}),e)for(var n in e)this._htOption[n]=e[n];"string"==typeof t&&(t=document.getElementById(t)),this._htOption.useSVG&&(g=svgDrawer),this._el=t,this._oQRCode=null,this._oDrawing=new g(this._el,this._htOption),this._htOption.text&&this.makeCode(this._htOption.text)}).prototype.makeCode=function(t){this._oQRCode=new e(Z(t,this._htOption.correctLevel),this._htOption.correctLevel),this._oQRCode.addData(t),this._oQRCode.make(),this._oDrawing.draw(this._oQRCode)},tt.prototype.clear=function(){this._oDrawing.clear()},tt.prototype.getCanvas=function(){for(var t=0;t<this._el.children.length;t++){var e=this._el.children[t];if("CANVAS"===e.tagName)return e}return null},tt.CorrectLevel=i}();var rt=tt,ot=Date.now();"undefined"==typeof performance&&(window.performance={now:function(){return Date.now()-ot}});var st,at,ct=["simulate","update","render","snapshot"],lt={total:"black",update:"blue",render:"magenta",simulate:"yellow",snapshot:"green",backlog:"red",network:"lightgray"},ut=null,dt=null,ht=null,ft=0,mt=null,pt=null;function yt(t){for(ut=t;t.firstChild;)t.removeChild(t.firstChild);t.style.background="#faf0dc",mt=document.createElement("canvas"),pt=mt.getContext("2d"),mt.id="text_stats",mt.width=Math.min(140,window.innerWidth),mt.height=36,mt.style.width=mt.width,mt.style.height=mt.height,pt.font="9.5pt sans-serif",t.appendChild(mt),t.title=Object.entries(lt).map((function(t){var e=g(t,2),n=e[0],i=e[1];return"".concat(i,": ").concat(n)})).join("\n"),(dt=document.createElement("canvas")).width=Math.min(125,window.innerWidth),dt.height=125,dt.style.width="100%";var e=document.createElement("div");e.id="innerDiv",t.appendChild(e),e.appendChild(dt),ht=dt.getContext("2d")}var bt=[],vt=0,gt=!1,Zt=kt(0),wt={},Xt=1e3/60;function Lt(t){return 20*(1-t/Xt)+60}function xt(t){st=function(t){var e=document.createElement("canvas");return e.width=t.width,e.height=t.height,e.style.width="100%",e.style.position="absolute",e.style.left="0px",ut.querySelector("#innerDiv").appendChild(e),e}(t),(at=st.getContext("2d")).strokeStyle="rgba(255, 255, 255, 0.5)";for(var e=0;e<60;e+=Xt){var n=Lt(e);at.moveTo(0,n),at.lineTo(st.width,n),at.stroke()}}function kt(t){return{start:t,total:0,items:{},users:0,backlog:0,network:0,latency:0,activity:1e3,connected:gt}}function Gt(t){Zt.total=t-Zt.start;var e=Math.min(120,window.innerWidth);if(bt.length>=e&&bt.splice(0,bt.length-e+1),bt.push(Zt),!(bt.length<=1)&&ut&&0!==ut.offsetHeight){var n=bt.slice(1).filter((function(t){return t.total})),i=n.map((function(t){return t.total})).reduce((function(t,e){return t+e}),0)/n.length,r=Math.max.apply(Math,w(n.map((function(t){return t.total}))));Math.max.apply(Math,w(n.map((function(t){return Math.max(t.backlog,t.network)}))));vt=1e3,function(t,e){pt.globalCompositeOperation="copy",pt.fillStyle="rgb(255, 255, 255, 0)",pt.fillRect(0,0,mt.width,mt.height),pt.fillStyle="rgb(0, 0, 0, 1)",pt.globalCompositeOperation="source-over";var n="".concat(Zt.users," users, ").concat(Math.round(1e3/t)," fps");e>70&&(n+=" ".concat(Math.ceil(e).toLocaleString(),"ms")),pt.fillText(n,2,15),n=Zt.backlog<100&&Zt.activity<1e3?"latency: ".concat(Zt.latency," ms"):"backlog: ".concat(Zt.backlog<100?"0.0":(Zt.backlog/1e3).toFixed(1)," s"),pt.fillText(n,2,33)}(i,r),st||xt(dt),ft===dt.width?(ht.globalCompositeOperation="copy",ht.drawImage(dt,1,0,dt.width-1,dt.height,0,0,dt.width-1,dt.height),ht.globalCompositeOperation="source-over",ht.fillStyle="transparent",ht.fillRect(dt.width-1,0,1,dt.height)):ft++;var o=function(t){return Lt(t/vt*-2*Xt)+5},s=bt[bt.length-1],a=ft-.5,c=Lt(0);ht.beginPath(),ht.moveTo(a,c),ht.lineTo(a,Lt(s.total)),ht.strokeStyle=lt[s.connected?"total":"network"],ht.stroke(),ht.beginPath(),ht.moveTo(a,c),c=Lt(s.total);var l,u=0,d=S(ct);try{for(d.s();!(l=d.n()).done;){var h=l.value;s.items[h]&&(c=Lt(u+=s.items[h]),ht.lineTo(a,c),ht.strokeStyle=lt[h],ht.stroke(),ht.beginPath(),ht.moveTo(a,c))}}catch(t){d.e(t)}finally{d.f()}s.network&&(ht.beginPath(),ht.moveTo(a,o(0)),ht.lineTo(a,o(s.network)),ht.strokeStyle=lt.network,ht.stroke())}}var St=[],Wt={animationFrame:function(t){var e=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{};Gt(t),Zt=kt(t);for(var n=0,i=Object.entries(e);n<i.length;n++){var r=g(i[n],2),o=r[0],s=r[1];this[o](s)}},begin:function(t){var e=performance.now();Zt.items[t]=(Zt.items[t]||0)-e;var n=St[St.length-1];return n&&(Zt.items[n]+=e),St.push(t),e},end:function(t){var e=performance.now();Zt.items[t]+=e;var n=St.pop();if(n!==t)throw Error('Unmatched stats calls: expected end("'.concat(n,'"), got end("').concat(t,'")'));var i=St[St.length-1];return i&&(Zt.items[i]-=e),e},backlog:function(t){Zt.backlog=Math.max(t,Zt.backlog)},network:function(t){Zt.network=t},starvation:function(t){Zt.network=t},latency:function(t){Zt.latency=t},activity:function(t){Zt.activity=t},users:function(t){Zt.users=t},connected:function(t){var e=gt;Zt.connected=gt=t,e&&!gt&&st&&(st.remove(),at=null)},perSecondTally:function(){for(var t=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{},e=0,n=Object.entries(t);e<n.length;e++){var i=g(n[e],2),r=i[0],o=i[1];wt[r]=(wt[r]||0)+o}},stepSession:function(t){var e=arguments.length>1&&void 0!==arguments[1]&&arguments[1],n=Math.floor(Date.now()/1e3),i=null;if(n!==wt.second){if(wt.second&&e&&(wt.requestedMessages||wt.sentMessagesTotal)){i=c({},wt);var r=n-wt.second;1!==r&&(i.sampleSeconds=r),i.sentBundles&&(i.averageDelay=Math.round(10*i.sendDelay/i.sentMessagesTotal)/10,i.averageBundlePayload=Math.round(i.sentBundlePayload/i.sentBundles)),delete i.second,delete i.sendDelay,delete i.sentBundlePayload}wt={second:n}}return i}},Yt="ontouchstart"in document.documentElement,Ct=window.parent!==window,It=Yt?20:12,Tt=Yt?0:15,Rt=!1;function Kt(){if(!Rt){Rt=!0;var t="\n        #croquet_dock { position: fixed; z-index: 2; border: 3px solid white; bottom: 6px; left: 6px; width: 36px; height: 36px; box-sizing: border-box; background: white; opacity: 0.4; transition: all ".concat(.3,"s ease; }\n        #croquet_dock.active { opacity: 0.95; border-radius: 12px; }\n        #croquet_dock.debug { width: 84px; }\n        #croquet_dock_bar { position: absolute; border: 3px solid white; width: 100%; height: 30px; box-sizing: border-box; background: white; }\n\n        #croquet_badge { position: absolute; width: 72px; height: 24px; top: 50%; transform: translate(0px, -50%); cursor: none; }\n        #croquet_dock.active #croquet_badge { left: 2%; }\n        #croquet_dock:not(.debug) #croquet_badge { display: none; }\n\n        .croquet_dock_button { position: absolute; width: ").concat(It,"%; height: 90%; top: 50%; transform: translate(0px, -50%); border-radius: 20%; }\n        .croquet_dock_button:focus { outline: 0; }\n        .croquet_dock_button canvas { position: absolute; width: 100%; height: 100%; top: 0px; left: 0px; }\n        #croquet_dock:not(.active) .croquet_dock_button { display: none; }\n        #croquet_dock_left { right: ").concat(2+Tt+It+2,"% }\n        #croquet_dock:not(.debug) #croquet_dock_left { display: none; }\n        #croquet_dock_right { right: ").concat(2+Tt,"%; }\n        #croquet_dock:not(.debug) #croquet_dock_right { display: none; }\n        #croquet_dock_pin { right: ").concat(2,"%; }\n        #croquet_dock_pin.pinned { background: #cce6ff; }\n\n        #croquet_dock_content { position: absolute; left: ").concat(2,"px; top: ").concat(2,"px; right: ").concat(2,"px; bottom: ").concat(2,"px; background: white; overflow: hidden; }\n        #croquet_dock.debug:not(.active) #croquet_dock_content { display: none; }\n        #croquet_dock.debug:not(.active) #croquet_dock_content div { display: none; }\n\n        #croquet_qrcode { position: absolute; width: 100%; height: 100%;box-sizing: border-box; cursor: crosshair; }\n        #croquet_dock.active #croquet_qrcode { border: 6px solid white; }\n        #croquet_dock.debug #croquet_qrcode:not(.active) { display: none; }\n        #croquet_qrcode canvas { image-rendering: pixelated; }\n\n        #croquet_stats { position: absolute; width: 70%; height: 90%; left: 15%; top: 5%; opacity: 0.8; font-family: sans-serif; }\n        #croquet_stats:not(.active) { display: none; }\n"),e=document.createElement("style");e.innerHTML=t,document.head.insertBefore(e,document.head.getElementsByTagName("style")[0])}}var Pt=!1;var Vt=!1;var Mt,Ht=new Set;function Nt(t){var e=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{};return t&&ee.showMessage(t,c(c({},e),{},{level:"error"}))}function zt(t){var e=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{};return t&&ee.showMessage(t,c(c({},e),{},{level:"warning"}))}function jt(t){var e=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{};return t&&ee.showMessage(t,c(c({},e),{},{level:"status"}))}function Ft(t,e){console.error("Error during ".concat(t),e);var n=(e.stack||"").split("\n").filter((function(t){return!t.match(/croquet-.*\.min.js/)})).join("\n");ee.showMessage("<b>Error during ".concat(t,": ").concat(e.message,"</b>\n\n").concat(n).replace(/\n/g,"<br>"),{level:"error",duration:1e4,stopOnFocus:!0})}function _t(t,e){var n=te(ee.root,(function(){return document.body}));if(!1===n)return null;!function(){if(!Vt){Vt=!0;var t=document.createElement("style");t.innerHTML="/*!\n        * Toastify js 1.5.0\n        * https://github.com/apvarun/toastify-js\n        * @license MIT licensed\n        *\n        * Copyright (C) 2018 Varun A P\n        */\n        .toastify {\n            padding: 12px 20px;\n            color: #ffffff;\n            display: inline-block;\n            box-shadow: 0 3px 6px -1px rgba(0, 0, 0, 0.12), 0 10px 36px -4px rgba(77, 96, 232, 0.3);\n            background: -webkit-linear-gradient(315deg, #73a5ff, #5477f5);\n            background: linear-gradient(135deg, #73a5ff, #5477f5);\n            position: fixed;\n            opacity: 0;\n            transition: all 0.4s cubic-bezier(0.215, 0.61, 0.355, 1);\n            border-radius: 2px;\n            cursor: pointer;\n            text-decoration: none;\n            max-width: calc(50% - 20px);\n            z-index: 2147483647;\n        }\n        .toastify.on {\n            opacity: 1;\n        }\n        .toast-close {\n            opacity: 0.4;\n            padding: 0 5px;\n        }\n        .toastify-right {\n            right: 15px;\n        }\n        .toastify-left {\n            left: 15px;\n        }\n        .toastify-top {\n            top: -150px;\n        }\n        .toastify-bottom {\n            bottom: -150px;\n        }\n        .toastify-rounded {\n            border-radius: 25px;\n        }\n        .toastify-avatar {\n            width: 1.5em;\n            height: 1.5em;\n            margin: 0 5px;\n            border-radius: 2px;\n        }\n        @media only screen and (max-width: 360px) {\n            .toastify-right, .toastify-left {\n                margin-left: auto;\n                margin-right: auto;\n                left: 0;\n                right: 0;\n                max-width: fit-content;\n            }\n        }\n\n        .toastify {\n            font-family: sans-serif;\n            border-radius: 8px;\n        }\n\n        .toastify-center {\n            margin-left: auto;\n            margin-right: auto;\n            left: 0;\n            right: 0;\n            max-width: fit-content;\n            max-width: -moz-fit-content;\n        }\n",document.head.insertBefore(t,document.head.getElementsByTagName("style")[0])}}();var i,r=c({text:t,duration:3e3,gravity:"bottom",position:"right",backgroundColor:"linear-gradient(to right, #00b09b, #96c93d)",stopOnFocus:!0},e);return n instanceof Element&&n!==document.body?(i=n.id)||(n.id=i="_croquetToastParent"):"string"==typeof n&&(i=n),i&&(r.selector=i),et(r).showToast()}try{if((Mt=window.localStorage)["croquet-debug-persist-allowed"]="true","true"!==Mt["croquet-debug-persist-allowed"])throw Error("localStorage not persisted");delete Mt["croquet-debug-persist-allowed"]}catch(bo){console.warn("localStorage not allowed"),Mt={}}var Jt,Et,Qt={get pinned(){return"true"===Mt[window.location.pathname+"/croquet-debug-ui-pinned"]},set pinned(t){Mt[window.location.pathname+"/croquet-debug-ui-pinned"]=!!t},get activePage(){return Mt[window.location.pathname+"/croquet-debug-ui-activePage"]},set activePage(t){Mt[window.location.pathname+"/croquet-debug-ui-activePage"]=t}},Dt=function(t){t.preventDefault(),t.stopPropagation()};function Ut(t,e,n){var i=document.createElement("canvas"),r=i.width=40*It/12,o=i.height=60,s=i.getContext("2d");s.font="36px Arial",s.textAlign="center",s.textBaseline="middle",s.fillStyle="black",s.fillText(t,r/2,.55*o);var a=document.createElement("button");a.id=e,a.className="croquet_dock_button";var c=function(t){t.preventDefault(),t.stopPropagation(),n()};return Yt?(a.ontouchstart=c,a.ontouchend=Dt,a.onpointerdown=Dt,a.onpointerup=Dt):(a.onclick=c,a.onpointerdown=Dt,a.onpointerup=Dt),a.appendChild(i),a}function Bt(t,e){if(!1!==ee.badge){var n=function(t){for(var e=new it(t),n=["bcdfghjklmnpqrstvwxyz","aeiou"],i="",r=0;r<5;r++)i+=n[r%2][e.quick()*n[r%2].length|0];return i}(e);for(document.title=document.title.replace(/:.*/,""),document.title+=":"+n;t.firstChild;)t.removeChild(t.firstChild);var i=document.createElement("canvas"),r=i.width=120,o=i.height=40;i.style.width="100%",t.appendChild(i);var s=i.getContext("2d"),a=function(t){for(var e=arguments.length>1&&void 0!==arguments[1]?arguments[1]:1,n=new it(t),i=[],r=0;r<e;r++)i.push("hsl(".concat(360*n.quick(),", 50%, 70%)"));return i}(e,2);s.fillStyle=a[0],s.beginPath(),s.moveTo(0,0),s.lineTo(0,o),s.lineTo(r,0),s.closePath(),s.fill(),s.fillStyle=a[1],s.beginPath(),s.moveTo(r,o),s.lineTo(r,0),s.lineTo(0,o),s.closePath(),s.fill(),s.font="30px Arial",s.textAlign="center",s.textBaseline="middle",s.fillStyle="black",s.fillText(n,r/2,o/2)}}function Ot(t,e){for(var n=arguments.length>2&&void 0!==arguments[2]?arguments[2]:{};t.firstChild;)t.removeChild(t.firstChild);return new rt(t,c({text:e,width:128,height:128,colorDark:"#000000",colorLight:"#ffffff",correctLevel:rt.CorrectLevel.L},n))}function At(){if(!1!==ee.root&&!1!==ee.qrcode&&!V.noqr){var t=ee.sessionURL;if(t){var e=te(ee.qrcode);if(e)Yt||(e.onclick=function(e){var n;e.preventDefault(),e.stopPropagation(),e.shiftKey?(n=document.getElementById("croquet_dock"))&&n.classList.toggle("debug"):window.open(t)}),Ot(e,t).getCanvas().style.width="100%"}else console.warn("App.sessionURL is not set")}}var qt=0;function $t(){!function(){if(!Pt){Pt=!0;var t="\n        ".concat(Ct?"body { min-height: 100vh }":"","\n        #croquet_spinnerOverlay {\n            z-index: 1000;\n            position: fixed;\n            left: 0;\n            top: 0;\n            width: 100%;\n            height: 100%;\n            background-color:#333;\n            opacity:0.9;\n            display:flex;\n            align-items:center;\n            justify-content:center;\n            transition: opacity 1.0s ease-out;\n        }\n        /* https://github.com/lukehaas/css-loaders */\n        @keyframes dots {\n            0%, 80%, 100% { box-shadow: 0 2.5em 0 -1.3em; }\n            40% { box-shadow: 0 2.5em 0 0; }\n        }\n        #croquet_loader,\n        #croquet_loader:before,\n        #croquet_loader:after {\n          border-radius: 50%;\n          width: 2.5em;\n          height: 2.5em;\n          animation: dots 1.8s infinite ease-in-out;\n        }\n        #croquet_loader {\n          color: #fff;\n          font-size: 10px;\n          margin: 80px auto;\n          position: relative;\n          text-indent: -9999em;\n          animation-delay: -0.16s;\n        }\n        #croquet_loader:before,\n        #croquet_loader:after {\n          content: '';\n          position: absolute;\n          top: 0;\n        }\n        #croquet_loader:before { left: -3.5em; animation-delay: -0.32s; }\n        #croquet_loader:after { left: 3.5em; }\n"),e=document.createElement("style");e.innerHTML=t,document.head.insertBefore(e,document.head.getElementsByTagName("style")[0])}}();var t=document.createElement("div");t.id="croquet_spinnerOverlay";var e=document.createElement("div");return e.id="croquet_loader",e.innerText="Catching up...",t.appendChild(e),t}function te(t,e){if(!1===t)return!1;if(t instanceof Element)return t;if("string"==typeof t){var n=document.getElementById(t);if(n)return n}return e?e():null}var ee={sessionURL:window.location.href,root:null,sync:!0,messages:!1,badge:!1,stats:!1,qrcode:!1,makeWidgetDock:function(){var t=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{};if(!V.nodock){var e=t.debug||V.debug,n=document.getElementById("croquet_dock");n&&n.parentElement.removeChild(n);var i=te(ee.root,(function(){return document.body}));if(i){Kt();var r=document.createElement("div");r.id="croquet_dock",e&&r.classList.add("debug"),Ct&&!t.iframe&&(r.style.display="none"),i.appendChild(r);var o,s=document.createElement("div");s.id="croquet_dock_bar",r.appendChild(s),!1!==t.badge&&((o=document.createElement("div")).id="croquet_badge",s.appendChild(o),ee.badge=o);var a=document.createElement("div");a.id="croquet_dock_content",r.appendChild(a);var c,l,u=[];if(!1!==t.qrcode){var d=ee.sessionURL;d&&((c=document.createElement("div")).id="croquet_qrcode",a.appendChild(c),u.push(c.id),ee.qrcode=c,e||(Qt.activePage=c.id))}if(!1!==t.stats&&((l=document.createElement("div")).id="croquet_stats",a.appendChild(l),u.push(l.id),ee.stats=l),u.length){var h=function(t){var e,n=u.length,i=0;if(Qt.activePage){var r=u.indexOf(Qt.activePage);r>=0?(i=r,e=document.getElementById(Qt.activePage)):Qt.activePage=null}var o,s=u[(i+n+t)%n];s===Qt.activePage?o=e:(e&&e.classList.remove("active"),o=document.getElementById(s)),o&&o.classList.add("active"),Qt.activePage=s};u.length>1&&(s.appendChild(Ut("<","croquet_dock_left",(function(){return h(-1)}))),s.appendChild(Ut(">","croquet_dock_right",(function(){return h(1)})))),h(0)}if(!Yt&&!t.alwaysPinned){var f=Ut("📌","croquet_dock_pin",(function(){Qt.pinned=!Qt.pinned,m()})),m=function(){Qt.pinned?f.classList.add("pinned"):f.classList.remove("pinned")};m(),s.appendChild(f)}var p=200,y=166,b=8,v=function(t){r.style.width="".concat(t,"px");var e=1.18*t;r.style.height="".concat(e,"px");var n=18*t/100;s.style.height="".concat(n,"px"),a.style.top="".concat(n+2,"px"),o&&(o.style.height="".concat(.9*n,"px"),o.style.width="".concat(.9*n*3,"px")),c&&(c.style.border="".concat(b*t/p,"px solid white"))},g=function(){r.style.width=r.style.height="",s.style.height="",a.style.top="",o&&(o.style.height=o.style.width=""),c&&(c.style.border="")},Z=t.fixedSize||p,w=function(){return r.classList.contains("active")},X=function(){r.classList.add("active"),v(Z),setTimeout((function(){return r.style.transition="none"}),300)},L=function(){r.style.transition="",r.classList.remove("active"),g()};if(Yt)L(),r.ontouchstart=function(t){t.preventDefault(),t.stopPropagation(),w()?L():X()},r.ontouchend=Dt,r.onpointerdown=Dt,r.onpointerup=Dt;else if(t.alwaysPinned?X():(Qt.pinned?X():L(),r.onmouseenter=X,r.onmouseleave=function(){Qt.pinned||L()}),!t.fixedSize){var x=0;r.addEventListener("wheel",(function(t){t.stopPropagation();var e=Date.now();if(!(e-x<100)){x=e;var n=t.deltaY;n=Math.sign(n)*Math.min(5,Math.abs(n));var i=.8*Math.min(window.innerWidth,window.innerHeight);Z=Math.max(y,Math.min(i,r.offsetWidth/Math.pow(1.05,n))),v(Z)}}),{passive:!0})}}}},makeSessionWidgets:function(t){!function(t){if(t&&!1!==ee.root){var e=te(ee.badge);e&&Bt(e,t)}}(t),At(),function(){if(!1!==ee.root&&!V.nostats){var t=te(ee.stats);t&&yt(t)}}()},makeQRCanvas:function(){var t=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{};if(!ee.sessionURL)return null;var e=document.createElement("div"),n=Ot(e,ee.sessionURL,t);return n&&n.getCanvas()},clearSessionMoniker:function(){!1!==ee.badge&&(document.title=document.title.replace(/:.*/,""))},showSyncWait:function(t){!1===ee.root?t=!1:Jt||(Jt=$t()),function(t){if(Et!==t)if(!1===ee.sync&&(t=!1),Et=t,t)clearTimeout(qt),qt=setTimeout((function(){Et&&(te(ee.root,(function(){return document.body})).appendChild(Jt),Jt.style.opacity=.9)}),500);else{if(!Jt)return;clearTimeout(qt),Jt.style.opacity=0,qt=setTimeout((function(){Et||Jt.parentElement&&Jt.parentElement.removeChild(Jt)}),500)}}(t)},messageFunction:function(t){var e=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{};if("once"===e.only){if(Ht.has(t))return null;Ht.add(t)}var n,i=e.level;return"error"===i?(n="red",console.error(t)):"warning"===i?(n="gold",console.warn(t)):n="#aaa",_t(t,c({backgroundColor:n},e))},showMessage:function(t){var e=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{};return V.nomessages||!1===ee.root||!1===ee.messages||!ee.messageFunction?null:ee.messageFunction(t,e)},isCroquetHost:function(t){return t.endsWith("croquet.io")||["localhost","127.0.0.1","[::1]"].includes(t)||t.endsWith("ngrok.io")},referrerURL:function(){var t=new URL(ee.sessionURL),e=this.isCroquetHost(t.hostname);return"".concat(t.origin).concat(t.pathname).concat(e?t.search:"")},autoSession:function(){var t=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{key:"q"};"string"==typeof t&&(t={key:t}),t||(t={});var e=t.key||"q",n=new URL(window.location),i="",r=n.search.slice(1).split("&"),o=r.find((function(t){return t.split("=")[0]===e}));if(o?i=o.replace(/[^=]*=/,""):(i=r.find((function(t){return!t.includes("=")})))||(i=n.hash.slice(1))&&(n.hash="",n.search?n.searchParams.set(e,i):n.search=i),i)try{i=decodeURIComponent(i)}catch(t){}else i=Math.floor(Math.random()*Math.pow(36,10)).toString(36),n.searchParams.set(e,i);var s=n.toString("");window.location.href!==s&&(window.history.replaceState({},"",s),ee.sessionURL=s);var a=Promise.resolve(i);return a[Symbol.toPrimitive]=function(){return console.warn("Deprecated: Croquet.App.autoSession() return value used directly. It returns a promise now!"),i},a},autoPassword:function(){var t=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{key:"pw",scrub:!1,keyless:!1},e=t.key||"pw",n=t.scrub&&!V.has("debug","password"),i=t.keyless,r=new URL(window.location),o="",s=r.hash.slice(1);if(s){var a=s.split("&"),c=a.find((function(t){return t.split("=")[0]===e}));c?(o=c.replace(/[^=]*=/,""))&&n&&(r.hash=a.filter((function(t){return t.split("=")[0]!==e})).join("&")):i&&(o=a.find((function(t){return!t.includes("=")})))&&n&&(r.hash=a.filter((function(t){return t!==o})).join("&"))}if(!o){var l=new Uint8Array(16);window.crypto.getRandomValues(l),o=N(l.buffer),r.hash=s?"".concat(s,"&").concat(e,"=").concat(o):i?o:"".concat(e,"=").concat(o),ee.sessionURL=r.href,n&&(r.hash=s),V.has("debug","session")&&console.log('Croquet.App.autoPassword() generated "'.concat(ee.sessionURL,'"'))}if(V.has("debug","session")&&console.log("Croquet.App.sessionUrl: ".concat(ee.sessionURL)),window.location.href!==r.href&&window.history.replaceState({},"",r.href),o)try{o=decodeURIComponent(o)}catch(t){}var u=Promise.resolve(o);return u[Symbol.toPrimitive]=function(){return console.warn("Deprecated: Croquet.App.autoPassword() return value used directly. It returns a promise now!"),o},u}},ne=Y((function(t){var e=function(t,e){return t<e};function n(t){if(!(this instanceof n))return new n(t);this.array=[],this.size=0,this.compare=t||e}n.prototype.clone=function(){var t=new n(this.compare);t.size=this.size;for(var e=0;e<this.size;e++)t.array.push(this.array[e]);return t},n.prototype.add=function(t){var e,n,i=this.size;for(this.array[this.size]=t,this.size+=1;i>0&&(e=i-1>>1,n=this.array[e],this.compare(t,n));)this.array[i]=n,i=e;this.array[i]=t},n.prototype.heapify=function(t){var e;for(this.array=t,this.size=t.length,e=this.size>>1;e>=0;e--)this._percolateDown(e)},n.prototype._percolateUp=function(t,e){for(var n,i,r=this.array[t];t>0&&(n=t-1>>1,i=this.array[n],e||this.compare(r,i));)this.array[t]=i,t=n;this.array[t]=r},n.prototype._percolateDown=function(t){for(var e,n,i,r=this.size,o=this.size>>>1,s=this.array[t];t<o&&(n=(e=1+(t<<1))+1,i=this.array[e],n<r&&this.compare(this.array[n],i)&&(e=n,i=this.array[n]),this.compare(i,s));)this.array[t]=i,t=e;this.array[t]=s},n.prototype._removeAt=function(t){if(!(t>this.size-1||t<0))return this._percolateUp(t,!0),this.poll()},n.prototype.remove=function(t){for(var e=0;e<this.size;e++)if(!this.compare(this.array[e],t)&&!this.compare(t,this.array[e]))return this._removeAt(e),!0;return!1},n.prototype._batchRemove=function(t,e){var n=new Array(e||this.size),i=0;if("function"==typeof t&&this.size)for(var r=0;r<this.size&&i<n.length;)t(this.array[r])?(n[i]=this._removeAt(r),i++,r>>=1):r++;return n.length=i,n},n.prototype.removeOne=function(t){var e=this._batchRemove(t,1);return e.length>0?e[0]:void 0},n.prototype.removeMany=function(t,e){return this._batchRemove(t,e)},n.prototype.peek=function(){if(0!=this.size)return this.array[0]},n.prototype.poll=function(){if(0!=this.size){var t=this.array[0];return this.size>1?(this.array[0]=this.array[--this.size],this._percolateDown(0)):this.size-=1,t}},n.prototype.replaceTop=function(t){if(0!=this.size){var e=this.array[0];return this.array[0]=t,this._percolateDown(0),e}},n.prototype.trim=function(){this.array=this.array.slice(0,this.size)},n.prototype.isEmpty=function(){return 0===this.size},n.prototype.forEach=function(t){if(!this.isEmpty()&&"function"==typeof t)for(var e=0,n=this.clone();!n.isEmpty();)t(n.poll(),e++)},n.prototype.kSmallest=function(t){if(0==this.size)return[];var e=this.compare,i=this.array,r=new n((function(t,n){return e(i[t],i[n])}));t=Math.min(this.size,t);var o=new Array(t),s=0;for(r.add(0);s<t;){var a=r.poll();o[s++]=this.array[a];var c=1+(a<<1),l=c+1;c<this.size&&r.add(c),l<this.size&&r.add(l)}return o};undefined===t&&function(){var t=new n((function(t,e){return t<e}));for(t.add(1),t.add(0),t.add(5),t.add(4),t.add(3);!t.isEmpty();)console.log(t.poll())}(),t.exports=n})),ie=function(t){l(n,ne);var e=b(n);function n(){return i(this,n),e.apply(this,arguments)}return o(n,[{key:"poll",value:function(){var t=v(u(n.prototype),"poll",this).call(this);return this.array[this.size]=null,t}},{key:"asArray",value:function(){var t=[];return this.forEach((function(e){return t.push(e)})),t}},{key:"asUnsortedArray",value:function(){return this.array.slice(0,this.size)}}]),n}();function re(t,e){function n(t){var n,i=S(t);try{for(i.s();!(n=i.n()).done;){var r=n.value;r.for===e&&t.delete(r)}}catch(t){i.e(t)}finally{i.f()}}return n(t.immediate),n(t.oncePerFrame),n(t.oncePerFrameWhileSynced),n(t.queued),t.immediate.size+t.queued.size+t.oncePerFrame.size+t.oncePerFrameWhileSynced.size}var oe=new(function(){function t(){i(this,t),this.subscriptions={},this.queuedEvents=[],this.perFrameEvents=new Map,this.perSyncedFrameEvents=new Map,this.id=([1e7]+-1e3+-4e3+-8e3+-1e11).replace(/[018]/g,(function(t){return(t^crypto.getRandomValues(new Uint8Array(1))[0]&15>>t/4).toString(16)})),this.lastId=0}return o(t,[{key:"register",value:function(t){return this.id+"/V"+ ++this.lastId}},{key:"deregister",value:function(t){}},{key:"addSubscription",value:function(t,e,n,i,r){if("vote"!==r){var o=t+":"+e,s=i;s.for=n;var a=this.subscriptions[o];if(a||(a=this.subscriptions[o]={immediate:new Set,queued:new Set,oncePerFrame:new Set,oncePerFrameWhileSynced:new Set}),!a[r])throw Error('Unknown subscribe() option: handling="'.concat(r,'"'));a[r].add(s)}else this.addSubscription(t,e+"#__vote",n,i,"immediate")}},{key:"removeSubscription",value:function(t,e,n){var i=t+":"+e,r=this.subscriptions[i];r&&(0===re(r,n)&&delete this.subscriptions[i]);e.endsWith("#__vote")||this.removeSubscription(t,e+"#__vote",n)}},{key:"removeAllSubscriptionsFor",value:function(t){for(var e="".concat(t,":"),n=0,i=Object.entries(this.subscriptions);n<i.length;n++){var r=g(i[n],2),o=r[0],s=r[1];if(o.startsWith(e))delete this.subscriptions[o];else 0===re(s,t)&&delete this.subscriptions[o]}}},{key:"handleEvent",value:function(t,e){var n=arguments.length>2&&void 0!==arguments[2]?arguments[2]:function(t){return t()},i=this.subscriptions[t];i&&(i.queued.size>0&&this.queuedEvents.push({topic:t,data:e}),i.oncePerFrame.size>0&&this.perFrameEvents.set(t,e),i.oncePerFrameWhileSynced.size>0&&this.perSyncedFrameEvents.set(t,e),i.immediate.size>0&&n((function(){var n,r=S(i.immediate);try{for(r.s();!(n=r.n()).done;){var o=n.value;try{o(e)}catch(e){console.error(e),console.warn('Croquet: error "'.concat(e.message,'" in "immediate" subscription ').concat(t))}}}catch(t){r.e(t)}finally{r.f()}})))}},{key:"processFrameEvents",value:function(t,e){var n,i=this,r=0,o=function(t,e,n){var o=i.subscriptions[t];if(o){var s,a=S(o[n]);try{for(a.s();!(s=a.n()).done;){var c=s.value;try{c(e)}catch(e){console.error(e),console.warn('Croquet: error "'.concat(e.message,'" in "').concat(n,'" subscription ').concat(t))}r++}}catch(t){a.e(t)}finally{a.f()}}},s=S(this.queuedEvents);try{for(s.s();!(n=s.n()).done;){var a=n.value;o(a.topic,a.data,"queued")}}catch(t){s.e(t)}finally{s.f()}if(this.queuedEvents.length=0,t){var c,l=S(this.perFrameEvents);try{for(l.s();!(c=l.n()).done;){var u=g(c.value,2);o(u[0],u[1],"oncePerFrame")}}catch(t){l.e(t)}finally{l.f()}if(this.perFrameEvents.clear(),e){var d,h=S(this.perSyncedFrameEvents);try{for(h.s();!(d=h.n()).done;){var f=g(d.value,2);o(f[0],f[1],"oncePerFrameWhileSynced")}}catch(t){h.e(t)}finally{h.f()}this.perSyncedFrameEvents.clear()}var m,p=S(this.queuedEvents);try{for(p.s();!(m=p.n()).done;){var y=m.value;o(y.topic,y.data,"queued")}}catch(t){p.e(t)}finally{p.f()}this.queuedEvents.length=0}return r}}]),t}());var se={get subscribe(){return(se={subscribe:V.has("debug","subscribe",!1)}).subscribe}},ae=function(){function t(e){i(this,t),this.island=e}return o(t,[{key:"register",value:function(t){return this.island.registerModel(t)}},{key:"deregister",value:function(t){this.island.deregisterModel(t.id)}},{key:"publish",value:function(t,e,n){this.island.publishFromModel(n,t,e)}},{key:"subscribe",value:function(t,e,n,i){return se.subscribe&&console.log('Model.subscribe("'.concat(e,":").concat(n,'", ').concat(t," ").concat((""+i).replace(/\([\s\S]*/,""),")")),this.island.addSubscription(t,e,n,i)}},{key:"unsubscribe",value:function(t,e,n){var i=arguments.length>3&&void 0!==arguments[3]?arguments[3]:"*";se.subscribe&&console.log("Model.unsubscribe(".concat(e,":").concat(n,'", ').concat(t," ").concat((""+i).replace(/\([\s\S]*/,""),")")),this.island.removeSubscription(t,e,n,i)}},{key:"unsubscribeAll",value:function(t){se.subscribe&&console.log("Model.unsubscribeAll(".concat(t," ").concat(t.id,")")),this.island.removeAllSubscriptionsFor(t)}},{key:"future",value:function(t,e,n,i){if(le&&le.equal(this))return this.island.future(t,e,n,i);if(e)throw Error("tOffset not supported from cross-realm future send yet.");var r=this.island;return new Proxy(t,{get:function(e,n){if("function"==typeof t[n])return new Proxy(t[n],{apply:function(e,i,o){r.callModelMethod(t.id,n,o)}});throw Error("Tried to call "+n+"() on future of "+Object.getPrototypeOf(t).constructor.name+" which is not a function")}})}},{key:"random",value:function(){return this.island.random()}},{key:"now",value:function(){return this.island.time}},{key:"equal",value:function(e){return e instanceof t&&e.island===this.island}},{key:"isViewRealm",value:function(){return!1}}]),t}(),ce=function(){function t(e){i(this,t),this.island=e}return o(t,[{key:"register",value:function(t){return oe.register(t)}},{key:"deregister",value:function(t){oe.deregister(t)}},{key:"publish",value:function(t,e,n){this.island.publishFromView(n,t,e)}},{key:"subscribe",value:function(t,e,n,i){var r=arguments.length>4&&void 0!==arguments[4]?arguments[4]:"queued";se.subscribe&&console.log('View.subscribe("'.concat(i,":").concat(t,'", ').concat(e," ").concat(n.name||(""+n).replace(/\([\s\S]*/,"")," [").concat(r,"])")),oe.addSubscription(i,t,e,n,r)}},{key:"unsubscribe",value:function(t,e,n,i){se.subscribe&&console.log('View.unsubscribe("'.concat(i,":").concat(t,'", ').concat(e," ").concat(n.name||(""+n).replace(/\([\s\S]*/,""),")")),oe.removeSubscription(i,t,e,n)}},{key:"unsubscribeAll",value:function(t){se.subscribe&&console.log("View.unsubscribeAll(".concat(t,")")),oe.removeAllSubscriptionsFor(t)}},{key:"future",value:function(t,e){var n=this.island;return new Proxy(t,{get:function(i,r){if("function"==typeof t[r])return new Proxy(t[r],{apply:function(i,o,s){setTimeout((function(){t.id&&he(n,(function(){return t[r].apply(t,w(s))}),!0)}),e)}});throw Error("Tried to call "+r+"() on future of "+Object.getPrototypeOf(t).constructor.name+" which is not a function")}})}},{key:"random",value:function(){return Math.random()}},{key:"now",value:function(){return this.island.time}},{key:"externalNow",value:function(){return this.island.controller.reflectorTime}},{key:"extrapolatedNow",value:function(){return this.island.controller.extrapolatedTime}},{key:"isSynced",value:function(){return!!this.island.controller.synced}},{key:"equal",value:function(e){return e instanceof t&&e.island===this.island}},{key:"isViewRealm",value:function(){return!0}}]),t}(),le=null;function ue(){var t=arguments.length>0&&void 0!==arguments[0]?arguments[0]:"Tried to execute code that requires realm outside of realm.";if(!le&&t)throw Error(t);return le}function de(t,e){if(null!==le)throw Error("Can't switch realms from inside realm");try{return le=new ae(t),e()}finally{le=null}}function he(t,e){var n=arguments.length>2&&void 0!==arguments[2]&&arguments[2];if(null!==le&&!n)throw Error("Can't switch realms from inside realm");var i=le;try{return le=new ce(t),e()}finally{le=i}}var fe=function(e,n){n||(n={}),"function"==typeof n&&(n={cmp:n});var i,r="boolean"==typeof n.cycles&&n.cycles,o=n.cmp&&(i=n.cmp,function(t){return function(e,n){var r={key:e,value:t[e]},o={key:n,value:t[n]};return i(r,o)}}),s=[];return function e(n){if(n&&n.toJSON&&"function"==typeof n.toJSON&&(n=n.toJSON()),void 0!==n){if("number"==typeof n)return isFinite(n)?""+n:"null";if("object"!==t(n))return JSON.stringify(n);var i,a;if(Array.isArray(n)){for(a="[",i=0;i<n.length;i++)i&&(a+=","),a+=e(n[i])||"null";return a+"]"}if(null===n)return"null";if(-1!==s.indexOf(n)){if(r)return JSON.stringify("__cycle__");throw new TypeError("Converting circular structure to JSON")}var c=s.push(n)-1,l=Object.keys(n).sort(o&&o(n));for(a="",i=0;i<l.length;i++){var u=l[i],d=e(n[u]);d&&(a&&(a+=","),a+=JSON.stringify(u)+":"+d)}return s.splice(c,1),"{"+a+"}"}}(e)},me=Y((function(e){!function(n,i,r){var o,s=256,a=r.pow(s,6),c=r.pow(2,52),l=2*c,u=255;function d(t,e,u){var d=[],b=p(m((e=1==e?{entropy:!0}:e||{}).entropy?[t,y(i)]:null==t?function(){try{var t;return o&&(t=o.randomBytes)?t=t(s):(t=new Uint8Array(s),(n.crypto||n.msCrypto).getRandomValues(t)),y(t)}catch(t){var e=n.navigator,r=e&&e.plugins;return[+new Date,n,r,n.screen,y(i)]}}():t,3),d),v=new h(d),g=function(){for(var t=v.g(6),e=a,n=0;t<c;)t=(t+n)*s,e*=s,n=v.g(1);for(;t>=l;)t/=2,e/=2,n>>>=1;return(t+n)/e};return g.int32=function(){return 0|v.g(4)},g.quick=function(){return v.g(4)/4294967296},g.double=g,p(y(v.S),i),(e.pass||u||function(t,e,n,i){return i&&(i.S&&f(i,v),t.state=function(){return f(v,{})}),n?(r.random=t,e):t})(g,b,"global"in e?e.global:this==r,e.state)}function h(t){var e,n=t.length,i=this,r=0,o=i.i=i.j=0,a=i.S=[];for(n||(t=[n++]);r<s;)a[r]=r++;for(r=0;r<s;r++)a[r]=a[o=u&o+t[r%n]+(e=a[r])],a[o]=e;(i.g=function(t){for(var e,n=0,r=i.i,o=i.j,a=i.S;t--;)e=a[r=u&r+1],n=n*s+a[u&(a[r]=a[o=u&o+e])+(a[o]=e)];return i.i=r,i.j=o,n})(s)}function f(t,e){return e.i=t.i,e.j=t.j,e.S=t.S.slice(),e}function m(e,n){var i,r=[],o=t(e);if(n&&"object"==o)for(i in e)try{r.push(m(e[i],n-1))}catch(t){}return r.length?r:"string"==o?e:e+"\0"}function p(t,e){for(var n,i=t+"",r=0;r<i.length;)e[u&r]=u&(n^=19*e[u&r])+i.charCodeAt(r++);return y(e)}function y(t){return String.fromCharCode.apply(0,t)}if(p(r.random(),i),e.exports){e.exports=d;try{o=nt}catch(t){}}else r.seedrandom=d}("undefined"!=typeof self?self:W,[],Math)}));var pe=function(t){return t!=t},ye=Math.sqrt,be=.7853981633974483;var ve=function(t){var e,n;return 0===t?.16666666666666713:((t<0?-t:t)<=1?(e=t*(19.562619833175948+t*(t*(5.444622390564711+t*(.004253011369004428*t-.6019598008014124))-16.262479672107002))-8.198089802484825,n=t*(139.51056146574857+t*(t*(70.49610280856842+t*(1*t-14.740913729888538))-147.1791292232726))-49.18853881490881):(e=.004253011369004428+(t=1/t)*(t*(5.444622390564711+t*(t*(19.562619833175948+-8.198089802484825*t)-16.262479672107002))-.6019598008014124),n=1+t*(t*(70.49610280856842+t*(t*(139.51056146574857+-49.18853881490881*t)-147.1791292232726))-14.740913729888538)),e/n)};var ge=function(t){var e,n;return 0===t?.08333333333333809:((t<0?-t:t)<=1?(e=28.536655482610616+t*(t*(6.968710824104713+t*(.002967721961301243*t-.5634242780008963))-25.56901049652825),n=342.43986579130785+t*(t*(147.0656354026815+t*(1*t-21.947795316429207))-383.8770957603691)):(e=.002967721961301243+(t=1/t)*(t*(6.968710824104713+t*(28.536655482610616*t-25.56901049652825))-.5634242780008963),n=1+t*(t*(147.0656354026815+t*(342.43986579130785*t-383.8770957603691))-21.947795316429207)),e/n)};var Ze=function(t){var e,n,i,r,o;if(pe(t))return NaN;if(t>0?i=t:(e=!0,i=-t),i>1)return NaN;if(i>.625)r=(n=1-i)*ge(n),n=ye(n+n),o=be-n,o-=n=n*r-6123233995736766e-32,o+=be;else{if(i<1e-8)return t;o=i*(o=(n=i*i)*ve(n))+i}return e?-o:o};var we=function(t){var e;return pe(t)||t<-1||t>1?NaN:t>.5?2*Ze(ye(.5-.5*t)):(e=be-Ze(t),e+=6123233995736766e-32,e+=be)};var Xe=function(){return"function"==typeof Symbol&&"symbol"===t(Symbol("foo"))}();var Le=function(){return Xe&&"symbol"===t(Symbol.toStringTag)},xe=Object.prototype.toString;var ke=function(t){return xe.call(t)},Ge=Object.prototype.hasOwnProperty;var Se=function(t,e){return null!=t&&Ge.call(t,e)},We="function"==typeof Symbol?Symbol.toStringTag:"";var Ye=function(t){var e,n,i;if(null==t)return xe.call(t);n=t[We],e=Se(t,We);try{t[We]=void 0}catch(e){return xe.call(t)}return i=xe.call(t),e?t[We]=n:delete t[We],i},Ce=Le()?Ye:ke,Ie="function"==typeof Uint32Array;var Te=function(t){return Ie&&t instanceof Uint32Array||"[object Uint32Array]"===Ce(t)},Re="function"==typeof Uint32Array?Uint32Array:null;var Ke="function"==typeof Uint32Array?Uint32Array:null;var Pe=function(){throw new Error("not implemented")},Ve=function(){var t,e;if("function"!=typeof Re)return!1;try{e=new Re(e=[1,3.14,-3.14,4294967296,4294967297]),t=Te(e)&&1===e[0]&&3===e[1]&&4294967293===e[2]&&0===e[3]&&1===e[4]}catch(e){t=!1}return t}()?Ke:Pe,Me="function"==typeof Float64Array;var He=function(t){return Me&&t instanceof Float64Array||"[object Float64Array]"===Ce(t)},Ne="function"==typeof Float64Array?Float64Array:null;var ze="function"==typeof Float64Array?Float64Array:null;var je=function(){throw new Error("not implemented")},Fe=function(){var t,e;if("function"!=typeof Ne)return!1;try{e=new Ne([1,3.14,-3.14,NaN]),t=He(e)&&1===e[0]&&3.14===e[1]&&-3.14===e[2]&&e[3]!=e[3]}catch(e){t=!1}return t}()?ze:je,_e="function"==typeof Uint8Array;var Je=function(t){return _e&&t instanceof Uint8Array||"[object Uint8Array]"===Ce(t)},Ee="function"==typeof Uint8Array?Uint8Array:null;var Qe="function"==typeof Uint8Array?Uint8Array:null;var De=function(){throw new Error("not implemented")},Ue=function(){var t,e;if("function"!=typeof Ee)return!1;try{e=new Ee(e=[1,3.14,-3.14,256,257]),t=Je(e)&&1===e[0]&&3===e[1]&&253===e[2]&&0===e[3]&&1===e[4]}catch(e){t=!1}return t}()?Qe:De,Be="function"==typeof Uint16Array;var Oe=function(t){return Be&&t instanceof Uint16Array||"[object Uint16Array]"===Ce(t)},Ae="function"==typeof Uint16Array?Uint16Array:null;var qe="function"==typeof Uint16Array?Uint16Array:null;var $e,tn=function(){throw new Error("not implemented")},en={uint16:function(){var t,e;if("function"!=typeof Ae)return!1;try{e=new Ae(e=[1,3.14,-3.14,65536,65537]),t=Oe(e)&&1===e[0]&&3===e[1]&&65533===e[2]&&0===e[3]&&1===e[4]}catch(e){t=!1}return t}()?qe:tn,uint8:Ue};($e=new en.uint16(1))[0]=4660;var nn=52===new en.uint8($e.buffer)[0],rn=!0===nn?1:0,on=new Fe(1),sn=new Ve(on.buffer);var an=function(t){return on[0]=t,sn[rn]},cn=!0===nn?1:0,ln=new Fe(1),un=new Ve(ln.buffer);var dn=function(t,e){return ln[0]=t,un[cn]=e>>>0,ln[0]},hn=Number.POSITIVE_INFINITY,fn=Number.NEGATIVE_INFINITY;var mn=function(t){return 0===t?.6666666666666735:.6666666666666735+t*(.3999999999940942+t*(.2857142874366239+t*(.22222198432149784+t*(.1818357216161805+t*(.15313837699209373+.14798198605116586*t)))))},pn=.6931471803691238,yn=1.9082149292705877e-10;var bn=function(t){var e,n,i,r,o,s,a,c,l,u;if(t<-1||pe(t))return NaN;if(-1===t)return fn;if(t===hn)return t;if(0===t)return t;if(u=1,(i=t<0?-t:t)<.41421356237309503){if(i<1.862645149230957e-9)return i<5551115123125783e-32?t:t-t*t*.5;t>-.2928932188134525&&(u=0,r=t,n=1)}return 0!==u&&(i<9007199254740992?(o=(u=((n=an(l=1+t))>>20)-1023)>0?1-(l-t):t-(l-1),o/=l):(u=((n=an(l=t))>>20)-1023,o=0),(n&=1048575)<434334?l=dn(l,1072693248|n):(u+=1,l=dn(l,1071644672|n),n=1048576-n>>2),r=l-1),e=.5*r*r,0===n?0===r?u*pn+(o+=u*yn):u*pn-((c=e*(1-.6666666666666666*r))-(u*yn+o)-r):(c=(a=(s=r/(2+r))*s)*mn(a),0===u?r-(e-s*(e+c)):u*pn-(e-(s*(e+c)+(u*yn+o))-r))},vn=.6931471805599453;var gn=function(t){return 0===t?.3999999999940942:.3999999999940942+t*(.22222198432149784+.15313837699209373*t)};var Zn=function(t){return 0===t?.6666666666666735:.6666666666666735+t*(.2857142874366239+t*(.1818357216161805+.14798198605116586*t))},wn=.6931471803691238,Xn=1.9082149292705877e-10;var Ln=function(t){var e,n,i,r,o,s,a,c,l,u,d;return 0===t?fn:pe(t)||t<0?NaN:(r=0,(n=an(t))<1048576&&(r-=54,n=an(t*=0x40000000000000)),n>=2146435072?t+t:(r+=(n>>20)-1023|0,r+=(a=(n&=1048575)+614244&1048576|0)>>20|0,s=(t=dn(t,n|1072693248^a))-1,(1048575&2+n)<3?0===s?0===r?0:r*wn+r*Xn:(o=s*s*(.5-.3333333333333333*s),0===r?s-o:r*wn-(o-r*Xn-s)):(a=n-398458|0,c=440401-n|0,i=(u=(d=(l=s/(2+s))*l)*d)*gn(u),o=d*Zn(u)+i,(a|=c)>0?(e=.5*s*s,0===r?s-(e-l*(e+o)):r*wn-(e-(l*(e+o)+r*Xn)-s)):0===r?s-l*(s-o):r*wn-(l*(s-o)-r*Xn-s))))};var xn=function(t){var e;return pe(t)||t<1?NaN:1===t?0:t>=268435456?Ln(t)+vn:t>2?Ln(2*t-1/(t+ye(t*t-1))):bn((e=t-1)+ye(2*e+e*e))};var kn=function(t){return t===hn||t===fn};var Gn=function(t){var e,n,i;return pe(t)||kn(t)?t:(t<0&&(t=-t,e=!0),i=t<3.725290298461914e-9?t:t>268435456?Ln(t)+vn:t>2?Ln(2*t+1/(ye(t*t+1)+t)):bn(t+(n=t*t)/(1+ye(1+n))),e?-i:i)},Sn=1.5707963267948966;var Wn=function(t){return 0===t?-64.85021904942025:t*(t*(t*(-.8750608600031904*t-16.157537187333652)-75.00855792314705)-122.88666844901361)-64.85021904942025};var Yn=function(t){return 0===t?194.5506571482614:194.5506571482614+t*(485.3903996359137+t*(432.88106049129027+t*(165.02700983169885+t*(24.858464901423062+1*t))))};var Cn=function(t){var e,n,i,r;return pe(t)||0===t?t:t===hn?Sn:t===fn?-Sn:(t<0&&(n=!0,t=-t),e=0,t>2.414213562373095?(i=Sn,e=1,t=-1/t):t<=.66?i=0:(i=be,e=2,t=(t-1)/(t+1)),r=t*(r=(r=t*t)*Wn(r)/Yn(r))+t,2===e?r+=3061616997868383e-32:1===e&&(r+=6123233995736766e-32),i+=r,n?-i:i)};var In,Tn,Rn=function(t){var e,n;return pe(t)||t<-1||t>1?NaN:1===t?hn:-1===t?fn:(t<0&&(e=!0,t=-t),t<3.725290298461914e-9?e?-t:t:(n=t<.5?.5*bn((n=t+t)+n*t/(1-t)):.5*bn((t+t)/(1-t)),e?-n:n))};!0===nn?(In=1,Tn=0):(In=0,Tn=1);var Kn={HIGH:In,LOW:Tn},Pn=new Fe(1),Vn=new Ve(Pn.buffer),Mn=Kn.HIGH,Hn=Kn.LOW;var Nn=function(t,e){return Pn[0]=e,t[0]=Vn[Mn],t[1]=Vn[Hn],t};var zn,jn,Fn=function(t,e){return 1===arguments.length?Nn([0,0],t):Nn(t,e)};!0===nn?(zn=1,jn=0):(zn=0,jn=1);var _n={HIGH:zn,LOW:jn},Jn=new Fe(1),En=new Ve(Jn.buffer),Qn=_n.HIGH,Dn=_n.LOW;var Un=function(t,e){return En[Qn]=t,En[Dn]=e,Jn[0]},Bn=[0,0];var On=function(t,e){var n,i;return Fn(Bn,t),n=Bn[0],n&=2147483647,i=an(e),Un(n|=i&=2147483648,Bn[1])};var An=function(t){return!!(an(t)>>>31)},qn=3.141592653589793;var $n=function(t,e){var n;return pe(e)||pe(t)?NaN:kn(e)?e===hn?kn(t)?On(qn/4,t):On(0,t):kn(t)?On(3*qn/4,t):On(qn,t):kn(t)?On(qn/2,t):0===t?e>=0&&!An(e)?On(0,t):On(qn,t):0===e?On(qn/2,t):(n=Cn(t/e),e<0?n<=0?n+qn:n-qn:n)},ti=22250738585072014e-324;var ei=function(t){return 0===t?1.87595182427177:1.87595182427177+t*(t*(1.6214297201053545+t*(.14599619288661245*t-.758397934778766))-1.8849797954337717)};var ni=function(t){var e,n,i,r,o;return pe(t)||kn(t)||0===t?t:(n=-2147483648&(i=an(t)),i&=2147483647,o=0,t<ti?(o=0x40000000000000,e=an(o*=t),o=Un(n|(e=(2147483647&e)/3+696219795),0)):o=dn(o,n|(e=i/3+715094163)),o*=ei(r=o*o*(o/t)),e=an(o),o=Un(e+1,0),o+=o*(r=((r=t/(o*o))-o)/(o+o+r)))};var ii=function(t){return 0===t?.0416666666666666:.0416666666666666+t*(2480158728947673e-20*t-.001388888888887411)};var ri=function(t){return 0===t?-2.7557314351390663e-7:t*(2.087572321298175e-9+-11359647557788195e-27*t)-2.7557314351390663e-7};var oi=function(t,e){var n,i,r,o;return r=(o=t*t)*o,i=o*ii(o),i+=r*r*ri(o),(r=1-(n=.5*o))+(1-r-n+(o*i-t*e))},si=-.16666666666666632;var ai=function(t,e){var n,i,r;return n=.00833333333332249+(r=t*t)*(27557313707070068e-22*r-.0001984126982985795)+r*(r*r)*(1.58969099521155e-10*r-2.5050760253406863e-8),i=r*t,0===e?t+i*(si+r*n):t-(r*(.5*e-i*n)-e-i*si)},ci=!0===nn?0:1,li=new Fe(1),ui=new Ve(li.buffer);var di=function(t){return li[0]=t,ui[ci]},hi=Math.floor;var fi=function(t){return t<0?-t:0===t?0:t};var mi=function(t,e){return pe(e)||kn(e)?(t[0]=e,t[1]=0,t):0!==e&&fi(e)<ti?(t[0]=4503599627370496*e,t[1]=-52,t):(t[0]=e,t[1]=0,t)};var pi=function(t,e){return 1===arguments.length?mi([0,0],t):mi(t,e)};var yi=function(t){var e=an(t);return(e=(2146435072&e)>>>20)-1023|0},bi=[0,0],vi=[0,0];var gi=function(t,e){var n,i;return 0===t||pe(t)||kn(t)?t:(pi(bi,t),e+=bi[1],(e+=yi(t=bi[0]))<-1074?On(0,t):e>1023?t<0?fn:hn:(e<=-1023?(e+=52,i=2220446049250313e-31):i=1,Fn(vi,t),n=vi[0],n&=2148532223,i*Un(n|=e+1023<<20,vi[1])))},Zi=[10680707,7228996,1387004,2578385,16069853,12639074,9804092,4427841,16666979,11263675,12935607,2387514,4345298,14681673,3074569,13734428,16653803,1880361,10960616,8533493,3062596,8710556,7349940,6258241,3772886,3769171,3798172,8675211,12450088,3874808,9961438,366607,15675153,9132554,7151469,3571407,2607881,12013382,4155038,6285869,7677882,13102053,15825725,473591,9065106,15363067,6271263,9264392,5636912,4652155,7056368,13614112,10155062,1944035,9527646,15080200,6658437,6231200,6832269,16767104,5075751,3212806,1398474,7579849,6349435,12618859],wi=[1.570796251296997,7.549789415861596e-8,5390302529957765e-30,3282003415807913e-37,1270655753080676e-44,12293330898111133e-52,27337005381646456e-60,21674168387780482e-67],Xi=5.960464477539063e-8,Li=Si(new Array(20)),xi=Si(new Array(20)),ki=Si(new Array(20)),Gi=Si(new Array(20));function Si(t){var e,n=t.length;for(e=0;e<n;e++)t[e]=0;return t}function Wi(t,e,n,i,r,o,s,a,c){var l,u,d,h,f,m,p,y,b;for(h=o,b=i[n],y=n,f=0;y>0;f++)u=Xi*b|0,Gi[f]=b-16777216*u|0,b=i[y-1]+u,y-=1;if(b=gi(b,r),b-=8*hi(.125*b),b-=p=0|b,d=0,r>0?(p+=f=Gi[n-1]>>24-r,Gi[n-1]-=f<<24-r,d=Gi[n-1]>>23-r):0===r?d=Gi[n-1]>>23:b>=.5&&(d=2),d>0){for(p+=1,l=0,f=0;f<n;f++)y=Gi[f],0===l?0!==y&&(l=1,Gi[f]=16777216-y):Gi[f]=16777215-y;if(r>0)switch(r){case 1:Gi[n-1]&=8388607;break;case 2:Gi[n-1]&=4194303}2===d&&(b=1-b,0!==l&&(b-=gi(1,r)))}if(0===b){for(y=0,f=n-1;f>=o;f--)y|=Gi[f];if(0===y){for(m=1;0===Gi[o-m];m++);for(f=n+1;f<=n+m;f++){for(c[a+f]=Zi[s+f],u=0,y=0;y<=a;y++)u+=t[y]*c[a+(f-y)];i[f]=u}return Wi(t,e,n+=m,i,r,o,s,a,c)}}if(0===b)for(n-=1,r-=24;0===Gi[n];)n-=1,r-=24;else(b=gi(b,-r))>=16777216?(u=Xi*b|0,Gi[n]=b-16777216*u|0,r+=24,Gi[n+=1]=u):Gi[n]=0|b;for(u=gi(1,r),f=n;f>=0;f--)i[f]=u*Gi[f],u*=Xi;for(f=n;f>=0;f--){for(u=0,m=0;m<=h&&m<=n-f;m++)u+=wi[m]*i[f+m];ki[n-f]=u}for(u=0,f=n;f>=0;f--)u+=ki[f];for(e[0]=0===d?u:-u,u=ki[0]-u,f=1;f<=n;f++)u+=ki[f];return e[1]=0===d?u:-u,7&p}var Yi=function(t,e,n,i){var r,o,s,a,c,l,u;for(4,(o=(n-3)/24|0)<0&&(o=0),a=n-24*(o+1),l=o-(s=i-1),u=s+4,c=0;c<=u;c++)Li[c]=l<0?0:Zi[l],l+=1;for(c=0;c<=4;c++){for(r=0,l=0;l<=s;l++)r+=t[l]*Li[s+(c-l)];xi[c]=r}return 4,Wi(t,e,4,xi,a,4,o,s,Li)},Ci=Math.round;var Ii=function(t,e,n){var i,r,o,s,a;return o=t-1.5707963267341256*(i=Ci(.6366197723675814*t)),s=6077100506506192e-26*i,a=e>>20|0,n[0]=o-s,a-(an(n[0])>>20&2047)>16&&(s=20222662487959506e-37*i-((r=o)-(o=r-(s=6077100506303966e-26*i))-s),n[0]=o-s,a-(an(n[0])>>20&2047)>49&&(s=84784276603689e-45*i-((r=o)-(o=r-(s=20222662487111665e-37*i))-s),n[0]=o-s)),n[1]=o-n[0]-s,i},Ti=1.5707963267341256,Ri=6077100506506192e-26,Ki=2*Ri,Pi=4*Ri,Vi=new Array(3),Mi=new Array(2);var Hi=function(t,e){var n,i,r,o,s,a,c;if((r=2147483647&an(t)|0)<=1072243195)return e[0]=t,e[1]=0,0;if(r<=1074752122)return 598523==(1048575&r)?Ii(t,r,e):r<=1073928572?t>0?(c=t-Ti,e[0]=c-Ri,e[1]=c-e[0]-Ri,1):(c=t+Ti,e[0]=c+Ri,e[1]=c-e[0]+Ri,-1):t>0?(c=t-2*Ti,e[0]=c-Ki,e[1]=c-e[0]-Ki,2):(c=t+2*Ti,e[0]=c+Ki,e[1]=c-e[0]+Ki,-2);if(r<=1075594811)return r<=1075183036?1074977148===r?Ii(t,r,e):t>0?(c=t-3*Ti,e[0]=c-1.8231301519518578e-10,e[1]=c-e[0]-1.8231301519518578e-10,3):(c=t+3*Ti,e[0]=c+1.8231301519518578e-10,e[1]=c-e[0]+1.8231301519518578e-10,-3):1075388923===r?Ii(t,r,e):t>0?(c=t-4*Ti,e[0]=c-Pi,e[1]=c-e[0]-Pi,4):(c=t+4*Ti,e[0]=c+Pi,e[1]=c-e[0]+Pi,-4);if(r<1094263291)return Ii(t,r,e);if(r>=2146435072)return e[0]=NaN,e[1]=NaN,0;for(n=di(t),c=Un(r-((i=(r>>20)-1046)<<20|0),n),s=0;s<2;s++)Vi[s]=0|c,c=16777216*(c-Vi[s]);for(Vi[2]=c,o=3;0===Vi[o-1];)o-=1;return a=Yi(Vi,Mi,i,o),t<0?(e[0]=-Mi[0],e[1]=-Mi[1],-a):(e[0]=Mi[0],e[1]=Mi[1],a)},Ni=[0,0];var zi=function(t){var e;if(e=an(t),(e&=2147483647)<=1072243195)return e<1044381696?1:oi(t,0);if(e>=2146435072)return NaN;switch(3&Hi(t,Ni)){case 0:return oi(Ni[0],Ni[1]);case 1:return-ai(Ni[0],Ni[1]);case 2:return-oi(Ni[0],Ni[1]);default:return ai(Ni[0],Ni[1])}},ji=Math.ceil;var Fi=function(t){return t<0?ji(t):hi(t)};var _i=function(t){return 0===t?.16666666666666602:.16666666666666602+t*(t*(6613756321437934e-20+t*(4.1381367970572385e-8*t-16533902205465252e-22))-.0027777777777015593)};var Ji=function(t,e,n){var i,r,o;return o=(i=t-e)-(r=i*i)*_i(r),gi(1-(e-i*o/(2-o)-t),n)};var Ei=function(t){var e;return pe(t)||t===hn?t:t===fn?0:t>709.782712893384?hn:t<-745.1332191019411?0:t>-3.725290298461914e-9&&t<3.725290298461914e-9?1+t:(e=Fi(t<0?1.4426950408889634*t-.5:1.4426950408889634*t+.5),Ji(t-.6931471803691238*e,1.9082149292705877e-10*e,e))};var Qi=function(t){return pe(t)?t:(t<0&&(t=-t),t>21?Ei(t)/2:(Ei(t)+Ei(-t))/2)};var Di=function(t){return 0===t?-.03333333333333313:t*(.0015873015872548146+t*(t*(4008217827329362e-21+-2.0109921818362437e-7*t)-793650757867488e-19))-.03333333333333313},Ui=.6931471803691238,Bi=1.9082149292705877e-10;var Oi=function(t){var e,n,i,r,o,s,a,c,l,u,d,h;if(t===hn||pe(t))return t;if(t===fn)return-1;if(0===t)return t;if(t<0?(n=!0,a=-t):(n=!1,a=t),a>=38.816242111356935){if(n)return-1;if(a>=709.782712893384)return hn}if(o=0|an(a),a>.34657359027997264)a<1.0397207708399179?n?(i=t+Ui,r=-Bi,h=-1):(i=t-Ui,r=Bi,h=1):(h=n?1.4426950408889634*t-.5:1.4426950408889634*t+.5,i=t-(u=h|=0)*Ui,r=u*Bi),l=i-(t=i-r)-r;else{if(o<1016070144)return t;h=0}return d=(c=t*(e=.5*t))*(((s=1+c*Di(c))-(u=3-s*e))/(6-t*u)),0===h?t-(t*d-c):(d=t*(d-l)-l,d-=c,-1===h?.5*(t-d)-.5:1===h?t<-.25?-2*(d-(t+.5)):1+2*(t-d):h<=-2||h>56?(i=an(a=1-(d-t))+(h<<20)|0,(a=dn(a,i))-1):(u=1,h<20?a=(u=dn(u,i=1072693248-(2097152>>h)|0))-(d-t):(a=t-(d+(u=dn(u,i=1023-h<<20|0))),a+=1),i=an(a)+(h<<20)|0,dn(a,i)))},Ai=!0===nn?0:1,qi=new Fe(1),$i=new Ve(qi.buffer);var tr=function(t,e){return qi[0]=t,$i[Ai]=e>>>0,qi[0]};var er=function(t){return 0===t?.3999999999940942:.3999999999940942+t*(.22222198432149784+.15313837699209373*t)};var nr=function(t){return 0===t?.6666666666666735:.6666666666666735+t*(.2857142874366239+t*(.1818357216161805+.14798198605116586*t))};var ir=function(t){var e,n,i,r,o,s,a,c,l,u;return r=t-1,(1048575&2+(i=an(t)))<3?0===r?0:r*r*(.3333333333333333*r-.5):(l=(i&=1048575)-398458|0,u=440401-i|0,n=(c=(s=(o=r/(2+r))*o)*s)*er(c),a=s*nr(c)+n,(l|=u)>0?o*((e=.5*r*r)+a)-e:o*(a-r))};var rr=function(t){var e,n,i,r,o,s,a;return pe(t)||t<0?NaN:0===t?fn:(o=0,(n=an(t))<1048576&&(o-=54,n=an(t*=0x40000000000000)),n>=2146435072?t+t:(o+=(n>>20)-1023|0,t=dn(t,(n&=1048575)|1072693248^(r=n+614244&1048576|0)),s=o+=r>>20|0,i=ir(t),a=3694239077158931e-28*s+25082946711645275e-27*((t-=1)+i),(a+=.4342944818781689*(t-(e=tr(t,0))+i)+.4342944818781689*e)+.30102999566361177*s))};var or=function(t){return 0===t?.3999999999940942:.3999999999940942+t*(.22222198432149784+.15313837699209373*t)};var sr=function(t){return 0===t?.6666666666666735:.6666666666666735+t*(.2857142874366239+t*(.1818357216161805+.14798198605116586*t))};var ar=function(t){var e,n,i,r,o,s,a,c,l,u;return r=t-1,(1048575&2+(i=an(t)))<3?0===r?0:r*r*(.3333333333333333*r-.5):(l=(i&=1048575)-398458|0,u=440401-i|0,n=(c=(s=(o=r/(2+r))*o)*s)*or(c),a=s*sr(c)+n,(l|=u)>0?o*((e=.5*r*r)+a)-e:o*(a-r))},cr=[0,0];var lr=function(t){var e,n,i,r,o;if(pe(t)||t<0)return NaN;if(Fn(cr,t),o=0,(n=cr[0])<1048576){if(0==(2147483647&n|cr[1]))return fn;o-=54,n=an(t*=0x40000000000000)}return n>=2146435072?t+t:(o+=(n>>20)-1023|0,t=dn(t,(n&=1048575)|1072693248^(r=n+614244&1048576|0)),o+=r>>20|0,i=ar(t),1.6751713164886512e-10*((t-=1)+i)+1.4426950407214463*(t-(e=tr(t,0))+i)+1.4426950407214463*e+o)},ur=[0,0];var dr=function(t){var e;if(e=an(t),(e&=2147483647)<=1072243195)return e<1045430272?t:ai(t,0);if(e>=2146435072)return NaN;switch(3&Hi(t,ur)){case 0:return ai(ur[0],ur[1]);case 1:return oi(ur[0],ur[1]);case 2:return-ai(ur[0],ur[1]);default:return-oi(ur[0],ur[1])}};var hr=function(t){var e,n;return 0===t?.16666666666666666:((t<0?-t:t)<=1?(e=t*(t*(-.789474443963537*t-163.72585752598383)-11561.443576500522)-351754.9648081514,n=t*(36157.827983443196+t*(1*t-277.7110814206028))-2110529.7888489086):(e=(t=1/t)*(t*(-351754.9648081514*t-11561.443576500522)-163.72585752598383)-.789474443963537,n=1+t*(t*(36157.827983443196+-2110529.7888489086*t)-277.7110814206028)),e/n)};var fr=function(t){var e;return 0===t?t:(e=fi(t),t>710.4758600739439||t<-709.089565712824?t>0?hn:fn:e>1?e>=709.0895657128241?(e=Ei(.5*e),e*=.5*e,t<0&&(e=-e),e):(e=.5*(e=Ei(e))-.5/e,t<0&&(e=-e),e):t+t*(e*=e)*hr(e))};var mr=function(t){return 0===t?.13333333333320124:.13333333333320124+t*(.021869488294859542+t*(.0035920791075913124+t*(.0005880412408202641+t*(7817944429395571e-20+-18558637485527546e-21*t))))};var pr=function(t){return 0===t?.05396825397622605:.05396825397622605+t*(.0088632398235993+t*(.0014562094543252903+t*(.0002464631348184699+t*(7140724913826082e-20+2590730518636337e-20*t))))};var yr=function(t,e,n){var i,r,o,s,a,c,l,u,d;return(r=2147483647&(i=an(t))|0)>=1072010280&&(t<0&&(t=-t,e=-e),t=(d=.7853981633974483-t)+(u=3061616997868383e-32-e),e=0),s=e+(d=t*t)*((a=d*t)*((s=mr(u=d*d))+(l=d*pr(u)))+e),u=t+(s+=.3333333333333341*a),r>=1072010280?(1-(i>>30&2))*((l=n)-2*(t-(u*u/(u+l)-s))):1===n?u:(tr(d=u,0),l=s-(d-t),tr(c=o=-1/u,0),c+o*((a=1+c*d)+c*l))},br=[0,0];var vr=function(t){var e,n;return e=an(t),(e&=2147483647)<=1072243195?e<1044381696?t:yr(t,0,1):e>=2146435072?NaN:(n=Hi(t,br),yr(br[0],br[1],1-((1&n)<<1)))};var gr=function(t){var e,n;return 0===t?-.3333333333333332:((t<0?-t:t)<=1?(e=t*(t*(0*t-.9643991794250523)-99.28772310019185)-1614.6876844170845,n=4844.063053251255+t*(2235.4883906010045+t*(112.81167849163293+1*t))):(e=0+(t=1/t)*(t*(-1614.6876844170845*t-99.28772310019185)-.9643991794250523),n=1+t*(112.81167849163293+t*(2235.4883906010045+4844.063053251255*t))),e/n)};var Zr=function(t){var e,n;if((n=fi(t))>44.014845965556525)return t<0?-1:1;if(n>=.625)n=1-2/((e=Ei(2*n))+1),t<0&&(n=-n);else{if(0===t)return t;n=t+t*(e=t*t)*gr(e)}return n};void 0===window.CroquetMath&&(window.CroquetMath={}),Object.assign(window.CroquetMath,{acos:we,acosh:xn,asin:Ze,asinh:Gn,atan:Cn,atanh:Rn,atan2:$n,cbrt:ni,cos:zi,cosh:Qi,exp:Ei,expm1:Oi,log:Ln,log1p:bn,log10:rr,log2:lr,sin:dr,sinh:fr,tan:vr,tanh:Zr});var wr=Math.pow;function Xr(t){return t===1/0||t===-1/0}window.CroquetMath.pow=function(t,e){if(isNaN(t)||isNaN(e))return NaN;if(Xr(t)||Xr(e))return wr(t,e);if(0===t||0===e)return wr(t,e);if(t<0&&!function(t){return Number.isInteger(t)}(e))return NaN;if(1===e)return t;if(2===e)return t*t;if(3===e)return t*t*t;if(4===e)return t*t*t*t;var n=1;return t<0&&(t*=-1,n=wr(-1,e)),window.CroquetMath.exp(window.CroquetMath.log(t)*e)*n};var Lr=Y((function(t,e){var n;t.exports=(n=n||function(t,e){var n;if("undefined"!=typeof window&&window.crypto&&(n=window.crypto),!n&&"undefined"!=typeof window&&window.msCrypto&&(n=window.msCrypto),!n&&void 0!==W&&W.crypto&&(n=W.crypto),!n)try{n=nt}catch(t){}var i=function(){if(n){if("function"==typeof n.getRandomValues)try{return n.getRandomValues(new Uint32Array(1))[0]}catch(t){}if("function"==typeof n.randomBytes)try{return n.randomBytes(4).readInt32LE()}catch(t){}}throw new Error("Native crypto module could not be used to get secure random number.")},r=Object.create||function(){function t(){}return function(e){var n;return t.prototype=e,n=new t,t.prototype=null,n}}(),o={},s=o.lib={},a=s.Base={extend:function(t){var e=r(this);return t&&e.mixIn(t),e.hasOwnProperty("init")&&this.init!==e.init||(e.init=function(){e.$super.init.apply(this,arguments)}),e.init.prototype=e,e.$super=this,e},create:function(){var t=this.extend();return t.init.apply(t,arguments),t},init:function(){},mixIn:function(t){for(var e in t)t.hasOwnProperty(e)&&(this[e]=t[e]);t.hasOwnProperty("toString")&&(this.toString=t.toString)},clone:function(){return this.init.prototype.extend(this)}},c=s.WordArray=a.extend({init:function(t,n){t=this.words=t||[],this.sigBytes=n!=e?n:4*t.length},toString:function(t){return(t||u).stringify(this)},concat:function(t){var e=this.words,n=t.words,i=this.sigBytes,r=t.sigBytes;if(this.clamp(),i%4)for(var o=0;o<r;o++){var s=n[o>>>2]>>>24-o%4*8&255;e[i+o>>>2]|=s<<24-(i+o)%4*8}else for(o=0;o<r;o+=4)e[i+o>>>2]=n[o>>>2];return this.sigBytes+=r,this},clamp:function(){var e=this.words,n=this.sigBytes;e[n>>>2]&=4294967295<<32-n%4*8,e.length=t.ceil(n/4)},clone:function(){var t=a.clone.call(this);return t.words=this.words.slice(0),t},random:function(t){for(var e=[],n=0;n<t;n+=4)e.push(i());return new c.init(e,t)}}),l=o.enc={},u=l.Hex={stringify:function(t){for(var e=t.words,n=t.sigBytes,i=[],r=0;r<n;r++){var o=e[r>>>2]>>>24-r%4*8&255;i.push((o>>>4).toString(16)),i.push((15&o).toString(16))}return i.join("")},parse:function(t){for(var e=t.length,n=[],i=0;i<e;i+=2)n[i>>>3]|=parseInt(t.substr(i,2),16)<<24-i%8*4;return new c.init(n,e/2)}},d=l.Latin1={stringify:function(t){for(var e=t.words,n=t.sigBytes,i=[],r=0;r<n;r++){var o=e[r>>>2]>>>24-r%4*8&255;i.push(String.fromCharCode(o))}return i.join("")},parse:function(t){for(var e=t.length,n=[],i=0;i<e;i++)n[i>>>2]|=(255&t.charCodeAt(i))<<24-i%4*8;return new c.init(n,e)}},h=l.Utf8={stringify:function(t){try{return decodeURIComponent(escape(d.stringify(t)))}catch(t){throw new Error("Malformed UTF-8 data")}},parse:function(t){return d.parse(unescape(encodeURIComponent(t)))}},f=s.BufferedBlockAlgorithm=a.extend({reset:function(){this._data=new c.init,this._nDataBytes=0},_append:function(t){"string"==typeof t&&(t=h.parse(t)),this._data.concat(t),this._nDataBytes+=t.sigBytes},_process:function(e){var n,i=this._data,r=i.words,o=i.sigBytes,s=this.blockSize,a=o/(4*s),l=(a=e?t.ceil(a):t.max((0|a)-this._minBufferSize,0))*s,u=t.min(4*l,o);if(l){for(var d=0;d<l;d+=s)this._doProcessBlock(r,d);n=r.splice(0,l),i.sigBytes-=u}return new c.init(n,u)},clone:function(){var t=a.clone.call(this);return t._data=this._data.clone(),t},_minBufferSize:0}),m=(s.Hasher=f.extend({cfg:a.extend(),init:function(t){this.cfg=this.cfg.extend(t),this.reset()},reset:function(){f.reset.call(this),this._doReset()},update:function(t){return this._append(t),this._process(),this},finalize:function(t){return t&&this._append(t),this._doFinalize()},blockSize:16,_createHelper:function(t){return function(e,n){return new t.init(n).finalize(e)}},_createHmacHelper:function(t){return function(e,n){return new m.HMAC.init(t,n).finalize(e)}}}),o.algo={});return o}(Math),n)})),xr=Y((function(t,e){var n;t.exports=(n=Lr,function(){if("function"==typeof ArrayBuffer){var t=n.lib.WordArray,e=t.init;(t.init=function(t){if(t instanceof ArrayBuffer&&(t=new Uint8Array(t)),(t instanceof Int8Array||"undefined"!=typeof Uint8ClampedArray&&t instanceof Uint8ClampedArray||t instanceof Int16Array||t instanceof Uint16Array||t instanceof Int32Array||t instanceof Uint32Array||t instanceof Float32Array||t instanceof Float64Array)&&(t=new Uint8Array(t.buffer,t.byteOffset,t.byteLength)),t instanceof Uint8Array){for(var n=t.byteLength,i=[],r=0;r<n;r++)i[r>>>2]|=t[r]<<24-r%4*8;e.call(this,i,n)}else e.apply(this,arguments)}).prototype=t}}(),n.lib.WordArray)})),kr=Y((function(t,e){var n;t.exports=(n=Lr,function(){var t=n,e=t.lib.WordArray;function i(t,n,i){for(var r=[],o=0,s=0;s<n;s++)if(s%4){var a=i[t.charCodeAt(s-1)]<<s%4*2|i[t.charCodeAt(s)]>>>6-s%4*2;r[o>>>2]|=a<<24-o%4*8,o++}return e.create(r,o)}t.enc.Base64={stringify:function(t){var e=t.words,n=t.sigBytes,i=this._map;t.clamp();for(var r=[],o=0;o<n;o+=3)for(var s=(e[o>>>2]>>>24-o%4*8&255)<<16|(e[o+1>>>2]>>>24-(o+1)%4*8&255)<<8|e[o+2>>>2]>>>24-(o+2)%4*8&255,a=0;a<4&&o+.75*a<n;a++)r.push(i.charAt(s>>>6*(3-a)&63));var c=i.charAt(64);if(c)for(;r.length%4;)r.push(c);return r.join("")},parse:function(t){var e=t.length,n=this._map,r=this._reverseMap;if(!r){r=this._reverseMap=[];for(var o=0;o<n.length;o++)r[n.charCodeAt(o)]=o}var s=n.charAt(64);if(s){var a=t.indexOf(s);-1!==a&&(e=a)}return i(t,e,r)},_map:"ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789+/="}}(),n.enc.Base64)})),Gr=Y((function(t,e){var n;t.exports=(n=Lr,function(t){var e=n,i=e.lib,r=i.WordArray,o=i.Hasher,s=e.algo,a=[],c=[];!function(){function e(e){for(var n=t.sqrt(e),i=2;i<=n;i++)if(!(e%i))return!1;return!0}function n(t){return 4294967296*(t-(0|t))|0}for(var i=2,r=0;r<64;)e(i)&&(r<8&&(a[r]=n(t.pow(i,.5))),c[r]=n(t.pow(i,1/3)),r++),i++}();var l=[],u=s.SHA256=o.extend({_doReset:function(){this._hash=new r.init(a.slice(0))},_doProcessBlock:function(t,e){for(var n=this._hash.words,i=n[0],r=n[1],o=n[2],s=n[3],a=n[4],u=n[5],d=n[6],h=n[7],f=0;f<64;f++){if(f<16)l[f]=0|t[e+f];else{var m=l[f-15],p=(m<<25|m>>>7)^(m<<14|m>>>18)^m>>>3,y=l[f-2],b=(y<<15|y>>>17)^(y<<13|y>>>19)^y>>>10;l[f]=p+l[f-7]+b+l[f-16]}var v=i&r^i&o^r&o,g=(i<<30|i>>>2)^(i<<19|i>>>13)^(i<<10|i>>>22),Z=h+((a<<26|a>>>6)^(a<<21|a>>>11)^(a<<7|a>>>25))+(a&u^~a&d)+c[f]+l[f];h=d,d=u,u=a,a=s+Z|0,s=o,o=r,r=i,i=Z+(g+v)|0}n[0]=n[0]+i|0,n[1]=n[1]+r|0,n[2]=n[2]+o|0,n[3]=n[3]+s|0,n[4]=n[4]+a|0,n[5]=n[5]+u|0,n[6]=n[6]+d|0,n[7]=n[7]+h|0},_doFinalize:function(){var e=this._data,n=e.words,i=8*this._nDataBytes,r=8*e.sigBytes;return n[r>>>5]|=128<<24-r%32,n[14+(r+64>>>9<<4)]=t.floor(i/4294967296),n[15+(r+64>>>9<<4)]=i,e.sigBytes=4*n.length,this._process(),this._hash},clone:function(){var t=o.clone.call(this);return t._hash=this._hash.clone(),t}});e.SHA256=o._createHelper(u),e.HmacSHA256=o._createHmacHelper(u)}(Math),n.SHA256)})),Sr=Y((function(t,e){t.exports=Lr.enc.Utf8})),Wr=(Y((function(t,e){var n,i,r,o,s,a,c,l;t.exports=(i=(n=l=Lr).lib,r=i.WordArray,o=i.Hasher,s=n.algo,a=[],c=s.SHA1=o.extend({_doReset:function(){this._hash=new r.init([1732584193,4023233417,2562383102,271733878,3285377520])},_doProcessBlock:function(t,e){for(var n=this._hash.words,i=n[0],r=n[1],o=n[2],s=n[3],c=n[4],l=0;l<80;l++){if(l<16)a[l]=0|t[e+l];else{var u=a[l-3]^a[l-8]^a[l-14]^a[l-16];a[l]=u<<1|u>>>31}var d=(i<<5|i>>>27)+c+a[l];d+=l<20?1518500249+(r&o|~r&s):l<40?1859775393+(r^o^s):l<60?(r&o|r&s|o&s)-1894007588:(r^o^s)-899497514,c=s,s=o,o=r<<30|r>>>2,r=i,i=d}n[0]=n[0]+i|0,n[1]=n[1]+r|0,n[2]=n[2]+o|0,n[3]=n[3]+s|0,n[4]=n[4]+c|0},_doFinalize:function(){var t=this._data,e=t.words,n=8*this._nDataBytes,i=8*t.sigBytes;return e[i>>>5]|=128<<24-i%32,e[14+(i+64>>>9<<4)]=Math.floor(n/4294967296),e[15+(i+64>>>9<<4)]=n,t.sigBytes=4*e.length,this._process(),this._hash},clone:function(){var t=o.clone.call(this);return t._hash=this._hash.clone(),t}}),n.SHA1=o._createHelper(c),n.HmacSHA1=o._createHmacHelper(c),l.SHA1)})),Y((function(t,e){var n,i,r;t.exports=(i=(n=Lr).lib.Base,r=n.enc.Utf8,void(n.algo.HMAC=i.extend({init:function(t,e){t=this._hasher=new t.init,"string"==typeof e&&(e=r.parse(e));var n=t.blockSize,i=4*n;e.sigBytes>i&&(e=t.finalize(e)),e.clamp();for(var o=this._oKey=e.clone(),s=this._iKey=e.clone(),a=o.words,c=s.words,l=0;l<n;l++)a[l]^=1549556828,c[l]^=909522486;o.sigBytes=s.sigBytes=i,this.reset()},reset:function(){var t=this._hasher;t.reset(),t.update(this._iKey)},update:function(t){return this._hasher.update(t),this},finalize:function(t){var e=this._hasher,n=e.finalize(t);return e.reset(),e.finalize(this._oKey.clone().concat(n))}})))})),Y((function(t,e){var n,i,r,o,s,a,c,l,u;t.exports=(i=(n=u=Lr).lib,r=i.Base,o=i.WordArray,s=n.algo,a=s.SHA1,c=s.HMAC,l=s.PBKDF2=r.extend({cfg:r.extend({keySize:4,hasher:a,iterations:1}),init:function(t){this.cfg=this.cfg.extend(t)},compute:function(t,e){for(var n=this.cfg,i=c.create(n.hasher,t),r=o.create(),s=o.create([1]),a=r.words,l=s.words,u=n.keySize,d=n.iterations;a.length<u;){var h=i.update(e).finalize(s);i.reset();for(var f=h.words,m=f.length,p=h,y=1;y<d;y++){p=i.finalize(p),i.reset();for(var b=p.words,v=0;v<m;v++)f[v]^=b[v]}r.concat(h),l[0]++}return r.sigBytes=4*u,r}}),n.PBKDF2=function(t,e,n){return l.create(n).compute(t,e)},u.PBKDF2)}))),Yr=(Y((function(t,e){var n;t.exports=(n=Lr,function(t){var e=n,i=e.lib,r=i.WordArray,o=i.Hasher,s=e.algo,a=[];!function(){for(var e=0;e<64;e++)a[e]=4294967296*t.abs(t.sin(e+1))|0}();var c=s.MD5=o.extend({_doReset:function(){this._hash=new r.init([1732584193,4023233417,2562383102,271733878])},_doProcessBlock:function(t,e){for(var n=0;n<16;n++){var i=e+n,r=t[i];t[i]=16711935&(r<<8|r>>>24)|4278255360&(r<<24|r>>>8)}var o=this._hash.words,s=t[e+0],c=t[e+1],f=t[e+2],m=t[e+3],p=t[e+4],y=t[e+5],b=t[e+6],v=t[e+7],g=t[e+8],Z=t[e+9],w=t[e+10],X=t[e+11],L=t[e+12],x=t[e+13],k=t[e+14],G=t[e+15],S=o[0],W=o[1],Y=o[2],C=o[3];S=l(S,W,Y,C,s,7,a[0]),C=l(C,S,W,Y,c,12,a[1]),Y=l(Y,C,S,W,f,17,a[2]),W=l(W,Y,C,S,m,22,a[3]),S=l(S,W,Y,C,p,7,a[4]),C=l(C,S,W,Y,y,12,a[5]),Y=l(Y,C,S,W,b,17,a[6]),W=l(W,Y,C,S,v,22,a[7]),S=l(S,W,Y,C,g,7,a[8]),C=l(C,S,W,Y,Z,12,a[9]),Y=l(Y,C,S,W,w,17,a[10]),W=l(W,Y,C,S,X,22,a[11]),S=l(S,W,Y,C,L,7,a[12]),C=l(C,S,W,Y,x,12,a[13]),Y=l(Y,C,S,W,k,17,a[14]),S=u(S,W=l(W,Y,C,S,G,22,a[15]),Y,C,c,5,a[16]),C=u(C,S,W,Y,b,9,a[17]),Y=u(Y,C,S,W,X,14,a[18]),W=u(W,Y,C,S,s,20,a[19]),S=u(S,W,Y,C,y,5,a[20]),C=u(C,S,W,Y,w,9,a[21]),Y=u(Y,C,S,W,G,14,a[22]),W=u(W,Y,C,S,p,20,a[23]),S=u(S,W,Y,C,Z,5,a[24]),C=u(C,S,W,Y,k,9,a[25]),Y=u(Y,C,S,W,m,14,a[26]),W=u(W,Y,C,S,g,20,a[27]),S=u(S,W,Y,C,x,5,a[28]),C=u(C,S,W,Y,f,9,a[29]),Y=u(Y,C,S,W,v,14,a[30]),S=d(S,W=u(W,Y,C,S,L,20,a[31]),Y,C,y,4,a[32]),C=d(C,S,W,Y,g,11,a[33]),Y=d(Y,C,S,W,X,16,a[34]),W=d(W,Y,C,S,k,23,a[35]),S=d(S,W,Y,C,c,4,a[36]),C=d(C,S,W,Y,p,11,a[37]),Y=d(Y,C,S,W,v,16,a[38]),W=d(W,Y,C,S,w,23,a[39]),S=d(S,W,Y,C,x,4,a[40]),C=d(C,S,W,Y,s,11,a[41]),Y=d(Y,C,S,W,m,16,a[42]),W=d(W,Y,C,S,b,23,a[43]),S=d(S,W,Y,C,Z,4,a[44]),C=d(C,S,W,Y,L,11,a[45]),Y=d(Y,C,S,W,G,16,a[46]),S=h(S,W=d(W,Y,C,S,f,23,a[47]),Y,C,s,6,a[48]),C=h(C,S,W,Y,v,10,a[49]),Y=h(Y,C,S,W,k,15,a[50]),W=h(W,Y,C,S,y,21,a[51]),S=h(S,W,Y,C,L,6,a[52]),C=h(C,S,W,Y,m,10,a[53]),Y=h(Y,C,S,W,w,15,a[54]),W=h(W,Y,C,S,c,21,a[55]),S=h(S,W,Y,C,g,6,a[56]),C=h(C,S,W,Y,G,10,a[57]),Y=h(Y,C,S,W,b,15,a[58]),W=h(W,Y,C,S,x,21,a[59]),S=h(S,W,Y,C,p,6,a[60]),C=h(C,S,W,Y,X,10,a[61]),Y=h(Y,C,S,W,f,15,a[62]),W=h(W,Y,C,S,Z,21,a[63]),o[0]=o[0]+S|0,o[1]=o[1]+W|0,o[2]=o[2]+Y|0,o[3]=o[3]+C|0},_doFinalize:function(){var e=this._data,n=e.words,i=8*this._nDataBytes,r=8*e.sigBytes;n[r>>>5]|=128<<24-r%32;var o=t.floor(i/4294967296),s=i;n[15+(r+64>>>9<<4)]=16711935&(o<<8|o>>>24)|4278255360&(o<<24|o>>>8),n[14+(r+64>>>9<<4)]=16711935&(s<<8|s>>>24)|4278255360&(s<<24|s>>>8),e.sigBytes=4*(n.length+1),this._process();for(var a=this._hash,c=a.words,l=0;l<4;l++){var u=c[l];c[l]=16711935&(u<<8|u>>>24)|4278255360&(u<<24|u>>>8)}return a},clone:function(){var t=o.clone.call(this);return t._hash=this._hash.clone(),t}});function l(t,e,n,i,r,o,s){var a=t+(e&n|~e&i)+r+s;return(a<<o|a>>>32-o)+e}function u(t,e,n,i,r,o,s){var a=t+(e&i|n&~i)+r+s;return(a<<o|a>>>32-o)+e}function d(t,e,n,i,r,o,s){var a=t+(e^n^i)+r+s;return(a<<o|a>>>32-o)+e}function h(t,e,n,i,r,o,s){var a=t+(n^(e|~i))+r+s;return(a<<o|a>>>32-o)+e}e.MD5=o._createHelper(c),e.HmacMD5=o._createHmacHelper(c)}(Math),n.MD5)})),Y((function(t,e){var n,i,r,o,s,a,c,l;t.exports=(i=(n=l=Lr).lib,r=i.Base,o=i.WordArray,s=n.algo,a=s.MD5,c=s.EvpKDF=r.extend({cfg:r.extend({keySize:4,hasher:a,iterations:1}),init:function(t){this.cfg=this.cfg.extend(t)},compute:function(t,e){for(var n,i=this.cfg,r=i.hasher.create(),s=o.create(),a=s.words,c=i.keySize,l=i.iterations;a.length<c;){n&&r.update(n),n=r.update(t).finalize(e),r.reset();for(var u=1;u<l;u++)n=r.finalize(n),r.reset();s.concat(n)}return s.sigBytes=4*c,s}}),n.EvpKDF=function(t,e,n){return c.create(n).compute(t,e)},l.EvpKDF)})),Y((function(t,e){var n,i,r,o,s,a,c,l,u,d,h,f,m,p,y,b,v,g,Z,w;t.exports=void((n=Lr).lib.Cipher||(r=n,o=r.lib,s=o.Base,a=o.WordArray,c=o.BufferedBlockAlgorithm,l=r.enc,l.Utf8,u=l.Base64,d=r.algo.EvpKDF,h=o.Cipher=c.extend({cfg:s.extend(),createEncryptor:function(t,e){return this.create(this._ENC_XFORM_MODE,t,e)},createDecryptor:function(t,e){return this.create(this._DEC_XFORM_MODE,t,e)},init:function(t,e,n){this.cfg=this.cfg.extend(n),this._xformMode=t,this._key=e,this.reset()},reset:function(){c.reset.call(this),this._doReset()},process:function(t){return this._append(t),this._process()},finalize:function(t){return t&&this._append(t),this._doFinalize()},keySize:4,ivSize:4,_ENC_XFORM_MODE:1,_DEC_XFORM_MODE:2,_createHelper:function(){function t(t){return"string"==typeof t?w:g}return function(e){return{encrypt:function(n,i,r){return t(i).encrypt(e,n,i,r)},decrypt:function(n,i,r){return t(i).decrypt(e,n,i,r)}}}}()}),o.StreamCipher=h.extend({_doFinalize:function(){return this._process(!0)},blockSize:1}),f=r.mode={},m=o.BlockCipherMode=s.extend({createEncryptor:function(t,e){return this.Encryptor.create(t,e)},createDecryptor:function(t,e){return this.Decryptor.create(t,e)},init:function(t,e){this._cipher=t,this._iv=e}}),p=f.CBC=function(){var t=m.extend();function e(t,e,n){var r,o=this._iv;o?(r=o,this._iv=i):r=this._prevBlock;for(var s=0;s<n;s++)t[e+s]^=r[s]}return t.Encryptor=t.extend({processBlock:function(t,n){var i=this._cipher,r=i.blockSize;e.call(this,t,n,r),i.encryptBlock(t,n),this._prevBlock=t.slice(n,n+r)}}),t.Decryptor=t.extend({processBlock:function(t,n){var i=this._cipher,r=i.blockSize,o=t.slice(n,n+r);i.decryptBlock(t,n),e.call(this,t,n,r),this._prevBlock=o}}),t}(),y=(r.pad={}).Pkcs7={pad:function(t,e){for(var n=4*e,i=n-t.sigBytes%n,r=i<<24|i<<16|i<<8|i,o=[],s=0;s<i;s+=4)o.push(r);var c=a.create(o,i);t.concat(c)},unpad:function(t){var e=255&t.words[t.sigBytes-1>>>2];t.sigBytes-=e}},o.BlockCipher=h.extend({cfg:h.cfg.extend({mode:p,padding:y}),reset:function(){var t;h.reset.call(this);var e=this.cfg,n=e.iv,i=e.mode;this._xformMode==this._ENC_XFORM_MODE?t=i.createEncryptor:(t=i.createDecryptor,this._minBufferSize=1),this._mode&&this._mode.__creator==t?this._mode.init(this,n&&n.words):(this._mode=t.call(i,this,n&&n.words),this._mode.__creator=t)},_doProcessBlock:function(t,e){this._mode.processBlock(t,e)},_doFinalize:function(){var t,e=this.cfg.padding;return this._xformMode==this._ENC_XFORM_MODE?(e.pad(this._data,this.blockSize),t=this._process(!0)):(t=this._process(!0),e.unpad(t)),t},blockSize:4}),b=o.CipherParams=s.extend({init:function(t){this.mixIn(t)},toString:function(t){return(t||this.formatter).stringify(this)}}),v=(r.format={}).OpenSSL={stringify:function(t){var e=t.ciphertext,n=t.salt;return(n?a.create([1398893684,1701076831]).concat(n).concat(e):e).toString(u)},parse:function(t){var e,n=u.parse(t),i=n.words;return 1398893684==i[0]&&1701076831==i[1]&&(e=a.create(i.slice(2,4)),i.splice(0,4),n.sigBytes-=16),b.create({ciphertext:n,salt:e})}},g=o.SerializableCipher=s.extend({cfg:s.extend({format:v}),encrypt:function(t,e,n,i){i=this.cfg.extend(i);var r=t.createEncryptor(n,i),o=r.finalize(e),s=r.cfg;return b.create({ciphertext:o,key:n,iv:s.iv,algorithm:t,mode:s.mode,padding:s.padding,blockSize:t.blockSize,formatter:i.format})},decrypt:function(t,e,n,i){return i=this.cfg.extend(i),e=this._parse(e,i.format),t.createDecryptor(n,i).finalize(e.ciphertext)},_parse:function(t,e){return"string"==typeof t?e.parse(t,this):t}}),Z=(r.kdf={}).OpenSSL={execute:function(t,e,n,i){i||(i=a.random(8));var r=d.create({keySize:e+n}).compute(t,i),o=a.create(r.words.slice(e),4*n);return r.sigBytes=4*e,b.create({key:r,iv:o,salt:i})}},w=o.PasswordBasedCipher=g.extend({cfg:g.cfg.extend({kdf:Z}),encrypt:function(t,e,n,i){var r=(i=this.cfg.extend(i)).kdf.execute(n,t.keySize,t.ivSize);i.iv=r.iv;var o=g.encrypt.call(this,t,e,r.key,i);return o.mixIn(r),o},decrypt:function(t,e,n,i){i=this.cfg.extend(i),e=this._parse(e,i.format);var r=i.kdf.execute(n,t.keySize,t.ivSize,e.salt);return i.iv=r.iv,g.decrypt.call(this,t,e,r.key,i)}})))})),Y((function(t,e){var n;t.exports=(n=Lr,function(){var t=n,e=t.lib.BlockCipher,i=t.algo,r=[],o=[],s=[],a=[],c=[],l=[],u=[],d=[],h=[],f=[];!function(){for(var t=[],e=0;e<256;e++)t[e]=e<128?e<<1:e<<1^283;var n=0,i=0;for(e=0;e<256;e++){var m=i^i<<1^i<<2^i<<3^i<<4;m=m>>>8^255&m^99,r[n]=m,o[m]=n;var p=t[n],y=t[p],b=t[y],v=257*t[m]^16843008*m;s[n]=v<<24|v>>>8,a[n]=v<<16|v>>>16,c[n]=v<<8|v>>>24,l[n]=v,v=16843009*b^65537*y^257*p^16843008*n,u[m]=v<<24|v>>>8,d[m]=v<<16|v>>>16,h[m]=v<<8|v>>>24,f[m]=v,n?(n=p^t[t[t[b^p]]],i^=t[t[i]]):n=i=1}}();var m=[0,1,2,4,8,16,32,64,128,27,54],p=i.AES=e.extend({_doReset:function(){if(!this._nRounds||this._keyPriorReset!==this._key){for(var t=this._keyPriorReset=this._key,e=t.words,n=t.sigBytes/4,i=4*((this._nRounds=n+6)+1),o=this._keySchedule=[],s=0;s<i;s++)s<n?o[s]=e[s]:(l=o[s-1],s%n?n>6&&s%n==4&&(l=r[l>>>24]<<24|r[l>>>16&255]<<16|r[l>>>8&255]<<8|r[255&l]):(l=r[(l=l<<8|l>>>24)>>>24]<<24|r[l>>>16&255]<<16|r[l>>>8&255]<<8|r[255&l],l^=m[s/n|0]<<24),o[s]=o[s-n]^l);for(var a=this._invKeySchedule=[],c=0;c<i;c++){if(s=i-c,c%4)var l=o[s];else l=o[s-4];a[c]=c<4||s<=4?l:u[r[l>>>24]]^d[r[l>>>16&255]]^h[r[l>>>8&255]]^f[r[255&l]]}}},encryptBlock:function(t,e){this._doCryptBlock(t,e,this._keySchedule,s,a,c,l,r)},decryptBlock:function(t,e){var n=t[e+1];t[e+1]=t[e+3],t[e+3]=n,this._doCryptBlock(t,e,this._invKeySchedule,u,d,h,f,o),n=t[e+1],t[e+1]=t[e+3],t[e+3]=n},_doCryptBlock:function(t,e,n,i,r,o,s,a){for(var c=this._nRounds,l=t[e]^n[0],u=t[e+1]^n[1],d=t[e+2]^n[2],h=t[e+3]^n[3],f=4,m=1;m<c;m++){var p=i[l>>>24]^r[u>>>16&255]^o[d>>>8&255]^s[255&h]^n[f++],y=i[u>>>24]^r[d>>>16&255]^o[h>>>8&255]^s[255&l]^n[f++],b=i[d>>>24]^r[h>>>16&255]^o[l>>>8&255]^s[255&u]^n[f++],v=i[h>>>24]^r[l>>>16&255]^o[u>>>8&255]^s[255&d]^n[f++];l=p,u=y,d=b,h=v}p=(a[l>>>24]<<24|a[u>>>16&255]<<16|a[d>>>8&255]<<8|a[255&h])^n[f++],y=(a[u>>>24]<<24|a[d>>>16&255]<<16|a[h>>>8&255]<<8|a[255&l])^n[f++],b=(a[d>>>24]<<24|a[h>>>16&255]<<16|a[l>>>8&255]<<8|a[255&u])^n[f++],v=(a[h>>>24]<<24|a[l>>>16&255]<<16|a[u>>>8&255]<<8|a[255&d])^n[f++],t[e]=p,t[e+1]=y,t[e+2]=b,t[e+3]=v},keySize:8});t.AES=e._createHelper(p)}(),n.AES)}))),Cr=Y((function(t,e){t.exports=Lr.HmacSHA256})),Ir=Y((function(e,n){var i="undefined"!=typeof Uint8Array&&"undefined"!=typeof Uint16Array&&"undefined"!=typeof Int32Array;function r(t,e){return Object.prototype.hasOwnProperty.call(t,e)}n.assign=function(e){for(var n=Array.prototype.slice.call(arguments,1);n.length;){var i=n.shift();if(i){if("object"!==t(i))throw new TypeError(i+"must be non-object");for(var o in i)r(i,o)&&(e[o]=i[o])}}return e},n.shrinkBuf=function(t,e){return t.length===e?t:t.subarray?t.subarray(0,e):(t.length=e,t)};var o={arraySet:function(t,e,n,i,r){if(e.subarray&&t.subarray)t.set(e.subarray(n,n+i),r);else for(var o=0;o<i;o++)t[r+o]=e[n+o]},flattenChunks:function(t){var e,n,i,r,o,s;for(i=0,e=0,n=t.length;e<n;e++)i+=t[e].length;for(s=new Uint8Array(i),r=0,e=0,n=t.length;e<n;e++)o=t[e],s.set(o,r),r+=o.length;return s}},s={arraySet:function(t,e,n,i,r){for(var o=0;o<i;o++)t[r+o]=e[n+o]},flattenChunks:function(t){return[].concat.apply([],t)}};n.setTyped=function(t){t?(n.Buf8=Uint8Array,n.Buf16=Uint16Array,n.Buf32=Int32Array,n.assign(n,o)):(n.Buf8=Array,n.Buf16=Array,n.Buf32=Array,n.assign(n,s))},n.setTyped(i)}));function Tr(t){for(var e=t.length;--e>=0;)t[e]=0}var Rr=[0,0,0,0,0,0,0,0,1,1,1,1,2,2,2,2,3,3,3,3,4,4,4,4,5,5,5,5,0],Kr=[0,0,0,0,1,1,2,2,3,3,4,4,5,5,6,6,7,7,8,8,9,9,10,10,11,11,12,12,13,13],Pr=[0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,2,3,7],Vr=[16,17,18,0,8,7,9,6,10,5,11,4,12,3,13,2,14,1,15],Mr=new Array(576);Tr(Mr);var Hr=new Array(60);Tr(Hr);var Nr=new Array(512);Tr(Nr);var zr=new Array(256);Tr(zr);var jr=new Array(29);Tr(jr);var Fr,_r,Jr,Er=new Array(30);function Qr(t,e,n,i,r){this.static_tree=t,this.extra_bits=e,this.extra_base=n,this.elems=i,this.max_length=r,this.has_stree=t&&t.length}function Dr(t,e){this.dyn_tree=t,this.max_code=0,this.stat_desc=e}function Ur(t){return t<256?Nr[t]:Nr[256+(t>>>7)]}function Br(t,e){t.pending_buf[t.pending++]=255&e,t.pending_buf[t.pending++]=e>>>8&255}function Or(t,e,n){t.bi_valid>16-n?(t.bi_buf|=e<<t.bi_valid&65535,Br(t,t.bi_buf),t.bi_buf=e>>16-t.bi_valid,t.bi_valid+=n-16):(t.bi_buf|=e<<t.bi_valid&65535,t.bi_valid+=n)}function Ar(t,e,n){Or(t,n[2*e],n[2*e+1])}function qr(t,e){var n=0;do{n|=1&t,t>>>=1,n<<=1}while(--e>0);return n>>>1}function $r(t,e,n){var i,r,o=new Array(16),s=0;for(i=1;i<=15;i++)o[i]=s=s+n[i-1]<<1;for(r=0;r<=e;r++){var a=t[2*r+1];0!==a&&(t[2*r]=qr(o[a]++,a))}}function to(t){var e;for(e=0;e<286;e++)t.dyn_ltree[2*e]=0;for(e=0;e<30;e++)t.dyn_dtree[2*e]=0;for(e=0;e<19;e++)t.bl_tree[2*e]=0;t.dyn_ltree[512]=1,t.opt_len=t.static_len=0,t.last_lit=t.matches=0}function eo(t){t.bi_valid>8?Br(t,t.bi_buf):t.bi_valid>0&&(t.pending_buf[t.pending++]=t.bi_buf),t.bi_buf=0,t.bi_valid=0}function no(t,e,n,i){var r=2*e,o=2*n;return t[r]<t[o]||t[r]===t[o]&&i[e]<=i[n]}function io(t,e,n){for(var i=t.heap[n],r=n<<1;r<=t.heap_len&&(r<t.heap_len&&no(e,t.heap[r+1],t.heap[r],t.depth)&&r++,!no(e,i,t.heap[r],t.depth));)t.heap[n]=t.heap[r],n=r,r<<=1;t.heap[n]=i}function ro(t,e,n){var i,r,o,s,a=0;if(0!==t.last_lit)do{i=t.pending_buf[t.d_buf+2*a]<<8|t.pending_buf[t.d_buf+2*a+1],r=t.pending_buf[t.l_buf+a],a++,0===i?Ar(t,r,e):(Ar(t,(o=zr[r])+256+1,e),0!==(s=Rr[o])&&Or(t,r-=jr[o],s),Ar(t,o=Ur(--i),n),0!==(s=Kr[o])&&Or(t,i-=Er[o],s))}while(a<t.last_lit);Ar(t,256,e)}function oo(t,e){var n,i,r,o=e.dyn_tree,s=e.stat_desc.static_tree,a=e.stat_desc.has_stree,c=e.stat_desc.elems,l=-1;for(t.heap_len=0,t.heap_max=573,n=0;n<c;n++)0!==o[2*n]?(t.heap[++t.heap_len]=l=n,t.depth[n]=0):o[2*n+1]=0;for(;t.heap_len<2;)o[2*(r=t.heap[++t.heap_len]=l<2?++l:0)]=1,t.depth[r]=0,t.opt_len--,a&&(t.static_len-=s[2*r+1]);for(e.max_code=l,n=t.heap_len>>1;n>=1;n--)io(t,o,n);r=c;do{n=t.heap[1],t.heap[1]=t.heap[t.heap_len--],io(t,o,1),i=t.heap[1],t.heap[--t.heap_max]=n,t.heap[--t.heap_max]=i,o[2*r]=o[2*n]+o[2*i],t.depth[r]=(t.depth[n]>=t.depth[i]?t.depth[n]:t.depth[i])+1,o[2*n+1]=o[2*i+1]=r,t.heap[1]=r++,io(t,o,1)}while(t.heap_len>=2);t.heap[--t.heap_max]=t.heap[1],function(t,e){var n,i,r,o,s,a,c=e.dyn_tree,l=e.max_code,u=e.stat_desc.static_tree,d=e.stat_desc.has_stree,h=e.stat_desc.extra_bits,f=e.stat_desc.extra_base,m=e.stat_desc.max_length,p=0;for(o=0;o<=15;o++)t.bl_count[o]=0;for(c[2*t.heap[t.heap_max]+1]=0,n=t.heap_max+1;n<573;n++)(o=c[2*c[2*(i=t.heap[n])+1]+1]+1)>m&&(o=m,p++),c[2*i+1]=o,i>l||(t.bl_count[o]++,s=0,i>=f&&(s=h[i-f]),a=c[2*i],t.opt_len+=a*(o+s),d&&(t.static_len+=a*(u[2*i+1]+s)));if(0!==p){do{for(o=m-1;0===t.bl_count[o];)o--;t.bl_count[o]--,t.bl_count[o+1]+=2,t.bl_count[m]--,p-=2}while(p>0);for(o=m;0!==o;o--)for(i=t.bl_count[o];0!==i;)(r=t.heap[--n])>l||(c[2*r+1]!==o&&(t.opt_len+=(o-c[2*r+1])*c[2*r],c[2*r+1]=o),i--)}}(t,e),$r(o,l,t.bl_count)}function so(t,e,n){var i,r,o=-1,s=e[1],a=0,c=7,l=4;for(0===s&&(c=138,l=3),e[2*(n+1)+1]=65535,i=0;i<=n;i++)r=s,s=e[2*(i+1)+1],++a<c&&r===s||(a<l?t.bl_tree[2*r]+=a:0!==r?(r!==o&&t.bl_tree[2*r]++,t.bl_tree[32]++):a<=10?t.bl_tree[34]++:t.bl_tree[36]++,a=0,o=r,0===s?(c=138,l=3):r===s?(c=6,l=3):(c=7,l=4))}function ao(t,e,n){var i,r,o=-1,s=e[1],a=0,c=7,l=4;for(0===s&&(c=138,l=3),i=0;i<=n;i++)if(r=s,s=e[2*(i+1)+1],!(++a<c&&r===s)){if(a<l)do{Ar(t,r,t.bl_tree)}while(0!=--a);else 0!==r?(r!==o&&(Ar(t,r,t.bl_tree),a--),Ar(t,16,t.bl_tree),Or(t,a-3,2)):a<=10?(Ar(t,17,t.bl_tree),Or(t,a-3,3)):(Ar(t,18,t.bl_tree),Or(t,a-11,7));a=0,o=r,0===s?(c=138,l=3):r===s?(c=6,l=3):(c=7,l=4)}}Tr(Er);var co=!1;function lo(t,e,n,i){Or(t,0+(i?1:0),3),function(t,e,n,i){eo(t),i&&(Br(t,n),Br(t,~n)),Ir.arraySet(t.pending_buf,t.window,e,n,t.pending),t.pending+=n}(t,e,n,!0)}var uo={_tr_init:function(t){co||(!function(){var t,e,n,i,r,o=new Array(16);for(n=0,i=0;i<28;i++)for(jr[i]=n,t=0;t<1<<Rr[i];t++)zr[n++]=i;for(zr[n-1]=i,r=0,i=0;i<16;i++)for(Er[i]=r,t=0;t<1<<Kr[i];t++)Nr[r++]=i;for(r>>=7;i<30;i++)for(Er[i]=r<<7,t=0;t<1<<Kr[i]-7;t++)Nr[256+r++]=i;for(e=0;e<=15;e++)o[e]=0;for(t=0;t<=143;)Mr[2*t+1]=8,t++,o[8]++;for(;t<=255;)Mr[2*t+1]=9,t++,o[9]++;for(;t<=279;)Mr[2*t+1]=7,t++,o[7]++;for(;t<=287;)Mr[2*t+1]=8,t++,o[8]++;for($r(Mr,287,o),t=0;t<30;t++)Hr[2*t+1]=5,Hr[2*t]=qr(t,5);Fr=new Qr(Mr,Rr,257,286,15),_r=new Qr(Hr,Kr,0,30,15),Jr=new Qr(new Array(0),Pr,0,19,7)}(),co=!0),t.l_desc=new Dr(t.dyn_ltree,Fr),t.d_desc=new Dr(t.dyn_dtree,_r),t.bl_desc=new Dr(t.bl_tree,Jr),t.bi_buf=0,t.bi_valid=0,to(t)},_tr_stored_block:lo,_tr_flush_block:function(t,e,n,i){var r,o,s=0;t.level>0?(2===t.strm.data_type&&(t.strm.data_type=function(t){var e,n=4093624447;for(e=0;e<=31;e++,n>>>=1)if(1&n&&0!==t.dyn_ltree[2*e])return 0;if(0!==t.dyn_ltree[18]||0!==t.dyn_ltree[20]||0!==t.dyn_ltree[26])return 1;for(e=32;e<256;e++)if(0!==t.dyn_ltree[2*e])return 1;return 0}(t)),oo(t,t.l_desc),oo(t,t.d_desc),s=function(t){var e;for(so(t,t.dyn_ltree,t.l_desc.max_code),so(t,t.dyn_dtree,t.d_desc.max_code),oo(t,t.bl_desc),e=18;e>=3&&0===t.bl_tree[2*Vr[e]+1];e--);return t.opt_len+=3*(e+1)+5+5+4,e}(t),r=t.opt_len+3+7>>>3,(o=t.static_len+3+7>>>3)<=r&&(r=o)):r=o=n+5,n+4<=r&&-1!==e?lo(t,e,n,i):4===t.strategy||o===r?(Or(t,2+(i?1:0),3),ro(t,Mr,Hr)):(Or(t,4+(i?1:0),3),function(t,e,n,i){var r;for(Or(t,e-257,5),Or(t,n-1,5),Or(t,i-4,4),r=0;r<i;r++)Or(t,t.bl_tree[2*Vr[r]+1],3);ao(t,t.dyn_ltree,e-1),ao(t,t.dyn_dtree,n-1)}(t,t.l_desc.max_code+1,t.d_desc.max_code+1,s+1),ro(t,t.dyn_ltree,t.dyn_dtree)),to(t),i&&eo(t)},_tr_tally:function(t,e,n){return t.pending_buf[t.d_buf+2*t.last_lit]=e>>>8&255,t.pending_buf[t.d_buf+2*t.last_lit+1]=255&e,t.pending_buf[t.l_buf+t.last_lit]=255&n,t.last_lit++,0===e?t.dyn_ltree[2*n]++:(t.matches++,e--,t.dyn_ltree[2*(zr[n]+256+1)]++,t.dyn_dtree[2*Ur(e)]++),t.last_lit===t.lit_bufsize-1},_tr_align:function(t){Or(t,2,3),Ar(t,256,Mr),function(t){16===t.bi_valid?(Br(t,t.bi_buf),t.bi_buf=0,t.bi_valid=0):t.bi_valid>=8&&(t.pending_buf[t.pending++]=255&t.bi_buf,t.bi_buf>>=8,t.bi_valid-=8)}(t)}};var ho=function(t,e,n,i){for(var r=65535&t|0,o=t>>>16&65535|0,s=0;0!==n;){n-=s=n>2e3?2e3:n;do{o=o+(r=r+e[i++]|0)|0}while(--s);r%=65521,o%=65521}return r|o<<16|0};var fo=function(){for(var t,e=[],n=0;n<256;n++){t=n;for(var i=0;i<8;i++)t=1&t?3988292384^t>>>1:t>>>1;e[n]=t}return e}();var mo,po=function(t,e,n,i){var r=fo,o=i+n;t^=-1;for(var s=i;s<o;s++)t=t>>>8^r[255&(t^e[s])];return-1^t},yo={2:"need dictionary",1:"stream end",0:"","-1":"file error","-2":"stream error","-3":"data error","-4":"insufficient memory","-5":"buffer error","-6":"incompatible version"};function bo(t,e){return t.msg=yo[e],e}function vo(t){return(t<<1)-(t>4?9:0)}function go(t){for(var e=t.length;--e>=0;)t[e]=0}function Zo(t){var e=t.state,n=e.pending;n>t.avail_out&&(n=t.avail_out),0!==n&&(Ir.arraySet(t.output,e.pending_buf,e.pending_out,n,t.next_out),t.next_out+=n,e.pending_out+=n,t.total_out+=n,t.avail_out-=n,e.pending-=n,0===e.pending&&(e.pending_out=0))}function wo(t,e){uo._tr_flush_block(t,t.block_start>=0?t.block_start:-1,t.strstart-t.block_start,e),t.block_start=t.strstart,Zo(t.strm)}function Xo(t,e){t.pending_buf[t.pending++]=e}function Lo(t,e){t.pending_buf[t.pending++]=e>>>8&255,t.pending_buf[t.pending++]=255&e}function xo(t,e){var n,i,r=t.max_chain_length,o=t.strstart,s=t.prev_length,a=t.nice_match,c=t.strstart>t.w_size-262?t.strstart-(t.w_size-262):0,l=t.window,u=t.w_mask,d=t.prev,h=t.strstart+258,f=l[o+s-1],m=l[o+s];t.prev_length>=t.good_match&&(r>>=2),a>t.lookahead&&(a=t.lookahead);do{if(l[(n=e)+s]===m&&l[n+s-1]===f&&l[n]===l[o]&&l[++n]===l[o+1]){o+=2,n++;do{}while(l[++o]===l[++n]&&l[++o]===l[++n]&&l[++o]===l[++n]&&l[++o]===l[++n]&&l[++o]===l[++n]&&l[++o]===l[++n]&&l[++o]===l[++n]&&l[++o]===l[++n]&&o<h);if(i=258-(h-o),o=h-258,i>s){if(t.match_start=e,s=i,i>=a)break;f=l[o+s-1],m=l[o+s]}}}while((e=d[e&u])>c&&0!=--r);return s<=t.lookahead?s:t.lookahead}function ko(t){var e,n,i,r,o,s,a,c,l,u,d=t.w_size;do{if(r=t.window_size-t.lookahead-t.strstart,t.strstart>=d+(d-262)){Ir.arraySet(t.window,t.window,d,d,0),t.match_start-=d,t.strstart-=d,t.block_start-=d,e=n=t.hash_size;do{i=t.head[--e],t.head[e]=i>=d?i-d:0}while(--n);e=n=d;do{i=t.prev[--e],t.prev[e]=i>=d?i-d:0}while(--n);r+=d}if(0===t.strm.avail_in)break;if(s=t.strm,a=t.window,c=t.strstart+t.lookahead,l=r,u=void 0,(u=s.avail_in)>l&&(u=l),n=0===u?0:(s.avail_in-=u,Ir.arraySet(a,s.input,s.next_in,u,c),1===s.state.wrap?s.adler=ho(s.adler,a,u,c):2===s.state.wrap&&(s.adler=po(s.adler,a,u,c)),s.next_in+=u,s.total_in+=u,u),t.lookahead+=n,t.lookahead+t.insert>=3)for(o=t.strstart-t.insert,t.ins_h=t.window[o],t.ins_h=(t.ins_h<<t.hash_shift^t.window[o+1])&t.hash_mask;t.insert&&(t.ins_h=(t.ins_h<<t.hash_shift^t.window[o+3-1])&t.hash_mask,t.prev[o&t.w_mask]=t.head[t.ins_h],t.head[t.ins_h]=o,o++,t.insert--,!(t.lookahead+t.insert<3)););}while(t.lookahead<262&&0!==t.strm.avail_in)}function Go(t,e){for(var n,i;;){if(t.lookahead<262){if(ko(t),t.lookahead<262&&0===e)return 1;if(0===t.lookahead)break}if(n=0,t.lookahead>=3&&(t.ins_h=(t.ins_h<<t.hash_shift^t.window[t.strstart+3-1])&t.hash_mask,n=t.prev[t.strstart&t.w_mask]=t.head[t.ins_h],t.head[t.ins_h]=t.strstart),0!==n&&t.strstart-n<=t.w_size-262&&(t.match_length=xo(t,n)),t.match_length>=3)if(i=uo._tr_tally(t,t.strstart-t.match_start,t.match_length-3),t.lookahead-=t.match_length,t.match_length<=t.max_lazy_match&&t.lookahead>=3){t.match_length--;do{t.strstart++,t.ins_h=(t.ins_h<<t.hash_shift^t.window[t.strstart+3-1])&t.hash_mask,n=t.prev[t.strstart&t.w_mask]=t.head[t.ins_h],t.head[t.ins_h]=t.strstart}while(0!=--t.match_length);t.strstart++}else t.strstart+=t.match_length,t.match_length=0,t.ins_h=t.window[t.strstart],t.ins_h=(t.ins_h<<t.hash_shift^t.window[t.strstart+1])&t.hash_mask;else i=uo._tr_tally(t,0,t.window[t.strstart]),t.lookahead--,t.strstart++;if(i&&(wo(t,!1),0===t.strm.avail_out))return 1}return t.insert=t.strstart<2?t.strstart:2,4===e?(wo(t,!0),0===t.strm.avail_out?3:4):t.last_lit&&(wo(t,!1),0===t.strm.avail_out)?1:2}function So(t,e){for(var n,i,r;;){if(t.lookahead<262){if(ko(t),t.lookahead<262&&0===e)return 1;if(0===t.lookahead)break}if(n=0,t.lookahead>=3&&(t.ins_h=(t.ins_h<<t.hash_shift^t.window[t.strstart+3-1])&t.hash_mask,n=t.prev[t.strstart&t.w_mask]=t.head[t.ins_h],t.head[t.ins_h]=t.strstart),t.prev_length=t.match_length,t.prev_match=t.match_start,t.match_length=2,0!==n&&t.prev_length<t.max_lazy_match&&t.strstart-n<=t.w_size-262&&(t.match_length=xo(t,n),t.match_length<=5&&(1===t.strategy||3===t.match_length&&t.strstart-t.match_start>4096)&&(t.match_length=2)),t.prev_length>=3&&t.match_length<=t.prev_length){r=t.strstart+t.lookahead-3,i=uo._tr_tally(t,t.strstart-1-t.prev_match,t.prev_length-3),t.lookahead-=t.prev_length-1,t.prev_length-=2;do{++t.strstart<=r&&(t.ins_h=(t.ins_h<<t.hash_shift^t.window[t.strstart+3-1])&t.hash_mask,n=t.prev[t.strstart&t.w_mask]=t.head[t.ins_h],t.head[t.ins_h]=t.strstart)}while(0!=--t.prev_length);if(t.match_available=0,t.match_length=2,t.strstart++,i&&(wo(t,!1),0===t.strm.avail_out))return 1}else if(t.match_available){if((i=uo._tr_tally(t,0,t.window[t.strstart-1]))&&wo(t,!1),t.strstart++,t.lookahead--,0===t.strm.avail_out)return 1}else t.match_available=1,t.strstart++,t.lookahead--}return t.match_available&&(i=uo._tr_tally(t,0,t.window[t.strstart-1]),t.match_available=0),t.insert=t.strstart<2?t.strstart:2,4===e?(wo(t,!0),0===t.strm.avail_out?3:4):t.last_lit&&(wo(t,!1),0===t.strm.avail_out)?1:2}function Wo(t,e,n,i,r){this.good_length=t,this.max_lazy=e,this.nice_length=n,this.max_chain=i,this.func=r}function Yo(){this.strm=null,this.status=0,this.pending_buf=null,this.pending_buf_size=0,this.pending_out=0,this.pending=0,this.wrap=0,this.gzhead=null,this.gzindex=0,this.method=8,this.last_flush=-1,this.w_size=0,this.w_bits=0,this.w_mask=0,this.window=null,this.window_size=0,this.prev=null,this.head=null,this.ins_h=0,this.hash_size=0,this.hash_bits=0,this.hash_mask=0,this.hash_shift=0,this.block_start=0,this.match_length=0,this.prev_match=0,this.match_available=0,this.strstart=0,this.match_start=0,this.lookahead=0,this.prev_length=0,this.max_chain_length=0,this.max_lazy_match=0,this.level=0,this.strategy=0,this.good_match=0,this.nice_match=0,this.dyn_ltree=new Ir.Buf16(1146),this.dyn_dtree=new Ir.Buf16(122),this.bl_tree=new Ir.Buf16(78),go(this.dyn_ltree),go(this.dyn_dtree),go(this.bl_tree),this.l_desc=null,this.d_desc=null,this.bl_desc=null,this.bl_count=new Ir.Buf16(16),this.heap=new Ir.Buf16(573),go(this.heap),this.heap_len=0,this.heap_max=0,this.depth=new Ir.Buf16(573),go(this.depth),this.l_buf=0,this.lit_bufsize=0,this.last_lit=0,this.d_buf=0,this.opt_len=0,this.static_len=0,this.matches=0,this.insert=0,this.bi_buf=0,this.bi_valid=0}function Co(t){var e;return t&&t.state?(t.total_in=t.total_out=0,t.data_type=2,(e=t.state).pending=0,e.pending_out=0,e.wrap<0&&(e.wrap=-e.wrap),e.status=e.wrap?42:113,t.adler=2===e.wrap?0:1,e.last_flush=0,uo._tr_init(e),0):bo(t,-2)}function Io(t){var e,n=Co(t);return 0===n&&((e=t.state).window_size=2*e.w_size,go(e.head),e.max_lazy_match=mo[e.level].max_lazy,e.good_match=mo[e.level].good_length,e.nice_match=mo[e.level].nice_length,e.max_chain_length=mo[e.level].max_chain,e.strstart=0,e.block_start=0,e.lookahead=0,e.insert=0,e.match_length=e.prev_length=2,e.match_available=0,e.ins_h=0),n}function To(t,e,n,i,r,o){if(!t)return-2;var s=1;if(-1===e&&(e=6),i<0?(s=0,i=-i):i>15&&(s=2,i-=16),r<1||r>9||8!==n||i<8||i>15||e<0||e>9||o<0||o>4)return bo(t,-2);8===i&&(i=9);var a=new Yo;return t.state=a,a.strm=t,a.wrap=s,a.gzhead=null,a.w_bits=i,a.w_size=1<<a.w_bits,a.w_mask=a.w_size-1,a.hash_bits=r+7,a.hash_size=1<<a.hash_bits,a.hash_mask=a.hash_size-1,a.hash_shift=~~((a.hash_bits+3-1)/3),a.window=new Ir.Buf8(2*a.w_size),a.head=new Ir.Buf16(a.hash_size),a.prev=new Ir.Buf16(a.w_size),a.lit_bufsize=1<<r+6,a.pending_buf_size=4*a.lit_bufsize,a.pending_buf=new Ir.Buf8(a.pending_buf_size),a.d_buf=1*a.lit_bufsize,a.l_buf=3*a.lit_bufsize,a.level=e,a.strategy=o,a.method=n,Io(t)}mo=[new Wo(0,0,0,0,(function(t,e){var n=65535;for(n>t.pending_buf_size-5&&(n=t.pending_buf_size-5);;){if(t.lookahead<=1){if(ko(t),0===t.lookahead&&0===e)return 1;if(0===t.lookahead)break}t.strstart+=t.lookahead,t.lookahead=0;var i=t.block_start+n;if((0===t.strstart||t.strstart>=i)&&(t.lookahead=t.strstart-i,t.strstart=i,wo(t,!1),0===t.strm.avail_out))return 1;if(t.strstart-t.block_start>=t.w_size-262&&(wo(t,!1),0===t.strm.avail_out))return 1}return t.insert=0,4===e?(wo(t,!0),0===t.strm.avail_out?3:4):(t.strstart>t.block_start&&(wo(t,!1),t.strm.avail_out),1)})),new Wo(4,4,8,4,Go),new Wo(4,5,16,8,Go),new Wo(4,6,32,32,Go),new Wo(4,4,16,16,So),new Wo(8,16,32,32,So),new Wo(8,16,128,128,So),new Wo(8,32,128,256,So),new Wo(32,128,258,1024,So),new Wo(32,258,258,4096,So)];var Ro={deflateInit:function(t,e){return To(t,e,8,15,8,0)},deflateInit2:To,deflateReset:Io,deflateResetKeep:Co,deflateSetHeader:function(t,e){return t&&t.state?2!==t.state.wrap?-2:(t.state.gzhead=e,0):-2},deflate:function(t,e){var n,i,r,o;if(!t||!t.state||e>5||e<0)return t?bo(t,-2):-2;if(i=t.state,!t.output||!t.input&&0!==t.avail_in||666===i.status&&4!==e)return bo(t,0===t.avail_out?-5:-2);if(i.strm=t,n=i.last_flush,i.last_flush=e,42===i.status)if(2===i.wrap)t.adler=0,Xo(i,31),Xo(i,139),Xo(i,8),i.gzhead?(Xo(i,(i.gzhead.text?1:0)+(i.gzhead.hcrc?2:0)+(i.gzhead.extra?4:0)+(i.gzhead.name?8:0)+(i.gzhead.comment?16:0)),Xo(i,255&i.gzhead.time),Xo(i,i.gzhead.time>>8&255),Xo(i,i.gzhead.time>>16&255),Xo(i,i.gzhead.time>>24&255),Xo(i,9===i.level?2:i.strategy>=2||i.level<2?4:0),Xo(i,255&i.gzhead.os),i.gzhead.extra&&i.gzhead.extra.length&&(Xo(i,255&i.gzhead.extra.length),Xo(i,i.gzhead.extra.length>>8&255)),i.gzhead.hcrc&&(t.adler=po(t.adler,i.pending_buf,i.pending,0)),i.gzindex=0,i.status=69):(Xo(i,0),Xo(i,0),Xo(i,0),Xo(i,0),Xo(i,0),Xo(i,9===i.level?2:i.strategy>=2||i.level<2?4:0),Xo(i,3),i.status=113);else{var s=8+(i.w_bits-8<<4)<<8;s|=(i.strategy>=2||i.level<2?0:i.level<6?1:6===i.level?2:3)<<6,0!==i.strstart&&(s|=32),s+=31-s%31,i.status=113,Lo(i,s),0!==i.strstart&&(Lo(i,t.adler>>>16),Lo(i,65535&t.adler)),t.adler=1}if(69===i.status)if(i.gzhead.extra){for(r=i.pending;i.gzindex<(65535&i.gzhead.extra.length)&&(i.pending!==i.pending_buf_size||(i.gzhead.hcrc&&i.pending>r&&(t.adler=po(t.adler,i.pending_buf,i.pending-r,r)),Zo(t),r=i.pending,i.pending!==i.pending_buf_size));)Xo(i,255&i.gzhead.extra[i.gzindex]),i.gzindex++;i.gzhead.hcrc&&i.pending>r&&(t.adler=po(t.adler,i.pending_buf,i.pending-r,r)),i.gzindex===i.gzhead.extra.length&&(i.gzindex=0,i.status=73)}else i.status=73;if(73===i.status)if(i.gzhead.name){r=i.pending;do{if(i.pending===i.pending_buf_size&&(i.gzhead.hcrc&&i.pending>r&&(t.adler=po(t.adler,i.pending_buf,i.pending-r,r)),Zo(t),r=i.pending,i.pending===i.pending_buf_size)){o=1;break}o=i.gzindex<i.gzhead.name.length?255&i.gzhead.name.charCodeAt(i.gzindex++):0,Xo(i,o)}while(0!==o);i.gzhead.hcrc&&i.pending>r&&(t.adler=po(t.adler,i.pending_buf,i.pending-r,r)),0===o&&(i.gzindex=0,i.status=91)}else i.status=91;if(91===i.status)if(i.gzhead.comment){r=i.pending;do{if(i.pending===i.pending_buf_size&&(i.gzhead.hcrc&&i.pending>r&&(t.adler=po(t.adler,i.pending_buf,i.pending-r,r)),Zo(t),r=i.pending,i.pending===i.pending_buf_size)){o=1;break}o=i.gzindex<i.gzhead.comment.length?255&i.gzhead.comment.charCodeAt(i.gzindex++):0,Xo(i,o)}while(0!==o);i.gzhead.hcrc&&i.pending>r&&(t.adler=po(t.adler,i.pending_buf,i.pending-r,r)),0===o&&(i.status=103)}else i.status=103;if(103===i.status&&(i.gzhead.hcrc?(i.pending+2>i.pending_buf_size&&Zo(t),i.pending+2<=i.pending_buf_size&&(Xo(i,255&t.adler),Xo(i,t.adler>>8&255),t.adler=0,i.status=113)):i.status=113),0!==i.pending){if(Zo(t),0===t.avail_out)return i.last_flush=-1,0}else if(0===t.avail_in&&vo(e)<=vo(n)&&4!==e)return bo(t,-5);if(666===i.status&&0!==t.avail_in)return bo(t,-5);if(0!==t.avail_in||0!==i.lookahead||0!==e&&666!==i.status){var a=2===i.strategy?function(t,e){for(var n;;){if(0===t.lookahead&&(ko(t),0===t.lookahead)){if(0===e)return 1;break}if(t.match_length=0,n=uo._tr_tally(t,0,t.window[t.strstart]),t.lookahead--,t.strstart++,n&&(wo(t,!1),0===t.strm.avail_out))return 1}return t.insert=0,4===e?(wo(t,!0),0===t.strm.avail_out?3:4):t.last_lit&&(wo(t,!1),0===t.strm.avail_out)?1:2}(i,e):3===i.strategy?function(t,e){for(var n,i,r,o,s=t.window;;){if(t.lookahead<=258){if(ko(t),t.lookahead<=258&&0===e)return 1;if(0===t.lookahead)break}if(t.match_length=0,t.lookahead>=3&&t.strstart>0&&(i=s[r=t.strstart-1])===s[++r]&&i===s[++r]&&i===s[++r]){o=t.strstart+258;do{}while(i===s[++r]&&i===s[++r]&&i===s[++r]&&i===s[++r]&&i===s[++r]&&i===s[++r]&&i===s[++r]&&i===s[++r]&&r<o);t.match_length=258-(o-r),t.match_length>t.lookahead&&(t.match_length=t.lookahead)}if(t.match_length>=3?(n=uo._tr_tally(t,1,t.match_length-3),t.lookahead-=t.match_length,t.strstart+=t.match_length,t.match_length=0):(n=uo._tr_tally(t,0,t.window[t.strstart]),t.lookahead--,t.strstart++),n&&(wo(t,!1),0===t.strm.avail_out))return 1}return t.insert=0,4===e?(wo(t,!0),0===t.strm.avail_out?3:4):t.last_lit&&(wo(t,!1),0===t.strm.avail_out)?1:2}(i,e):mo[i.level].func(i,e);if(3!==a&&4!==a||(i.status=666),1===a||3===a)return 0===t.avail_out&&(i.last_flush=-1),0;if(2===a&&(1===e?uo._tr_align(i):5!==e&&(uo._tr_stored_block(i,0,0,!1),3===e&&(go(i.head),0===i.lookahead&&(i.strstart=0,i.block_start=0,i.insert=0))),Zo(t),0===t.avail_out))return i.last_flush=-1,0}return 4!==e?0:i.wrap<=0?1:(2===i.wrap?(Xo(i,255&t.adler),Xo(i,t.adler>>8&255),Xo(i,t.adler>>16&255),Xo(i,t.adler>>24&255),Xo(i,255&t.total_in),Xo(i,t.total_in>>8&255),Xo(i,t.total_in>>16&255),Xo(i,t.total_in>>24&255)):(Lo(i,t.adler>>>16),Lo(i,65535&t.adler)),Zo(t),i.wrap>0&&(i.wrap=-i.wrap),0!==i.pending?0:1)},deflateEnd:function(t){var e;return t&&t.state?42!==(e=t.state.status)&&69!==e&&73!==e&&91!==e&&103!==e&&113!==e&&666!==e?bo(t,-2):(t.state=null,113===e?bo(t,-3):0):-2},deflateSetDictionary:function(t,e){var n,i,r,o,s,a,c,l,u=e.length;if(!t||!t.state)return-2;if(2===(o=(n=t.state).wrap)||1===o&&42!==n.status||n.lookahead)return-2;for(1===o&&(t.adler=ho(t.adler,e,u,0)),n.wrap=0,u>=n.w_size&&(0===o&&(go(n.head),n.strstart=0,n.block_start=0,n.insert=0),l=new Ir.Buf8(n.w_size),Ir.arraySet(l,e,u-n.w_size,n.w_size,0),e=l,u=n.w_size),s=t.avail_in,a=t.next_in,c=t.input,t.avail_in=u,t.next_in=0,t.input=e,ko(n);n.lookahead>=3;){i=n.strstart,r=n.lookahead-2;do{n.ins_h=(n.ins_h<<n.hash_shift^n.window[i+3-1])&n.hash_mask,n.prev[i&n.w_mask]=n.head[n.ins_h],n.head[n.ins_h]=i,i++}while(--r);n.strstart=i,n.lookahead=2,ko(n)}return n.strstart+=n.lookahead,n.block_start=n.strstart,n.insert=n.lookahead,n.lookahead=0,n.match_length=n.prev_length=2,n.match_available=0,t.next_in=a,t.input=c,t.avail_in=s,n.wrap=o,0},deflateInfo:"pako deflate (from Nodeca project)"},Ko=!0,Po=!0;try{String.fromCharCode.apply(null,[0])}catch(t){Ko=!1}try{String.fromCharCode.apply(null,new Uint8Array(1))}catch(t){Po=!1}for(var Vo=new Ir.Buf8(256),Mo=0;Mo<256;Mo++)Vo[Mo]=Mo>=252?6:Mo>=248?5:Mo>=240?4:Mo>=224?3:Mo>=192?2:1;Vo[254]=Vo[254]=1;function Ho(t,e){if(e<65534&&(t.subarray&&Po||!t.subarray&&Ko))return String.fromCharCode.apply(null,Ir.shrinkBuf(t,e));for(var n="",i=0;i<e;i++)n+=String.fromCharCode(t[i]);return n}var No=function(t){var e,n,i,r,o,s=t.length,a=0;for(r=0;r<s;r++)55296==(64512&(n=t.charCodeAt(r)))&&r+1<s&&56320==(64512&(i=t.charCodeAt(r+1)))&&(n=65536+(n-55296<<10)+(i-56320),r++),a+=n<128?1:n<2048?2:n<65536?3:4;for(e=new Ir.Buf8(a),o=0,r=0;o<a;r++)55296==(64512&(n=t.charCodeAt(r)))&&r+1<s&&56320==(64512&(i=t.charCodeAt(r+1)))&&(n=65536+(n-55296<<10)+(i-56320),r++),n<128?e[o++]=n:n<2048?(e[o++]=192|n>>>6,e[o++]=128|63&n):n<65536?(e[o++]=224|n>>>12,e[o++]=128|n>>>6&63,e[o++]=128|63&n):(e[o++]=240|n>>>18,e[o++]=128|n>>>12&63,e[o++]=128|n>>>6&63,e[o++]=128|63&n);return e},zo=function(t){return Ho(t,t.length)},jo=function(t){for(var e=new Ir.Buf8(t.length),n=0,i=e.length;n<i;n++)e[n]=t.charCodeAt(n);return e},Fo=function(t,e){var n,i,r,o,s=e||t.length,a=new Array(2*s);for(i=0,n=0;n<s;)if((r=t[n++])<128)a[i++]=r;else if((o=Vo[r])>4)a[i++]=65533,n+=o-1;else{for(r&=2===o?31:3===o?15:7;o>1&&n<s;)r=r<<6|63&t[n++],o--;o>1?a[i++]=65533:r<65536?a[i++]=r:(r-=65536,a[i++]=55296|r>>10&1023,a[i++]=56320|1023&r)}return Ho(a,i)},_o=function(t,e){var n;for((e=e||t.length)>t.length&&(e=t.length),n=e-1;n>=0&&128==(192&t[n]);)n--;return n<0||0===n?e:n+Vo[t[n]]>e?n:e};var Jo=function(){this.input=null,this.next_in=0,this.avail_in=0,this.total_in=0,this.output=null,this.next_out=0,this.avail_out=0,this.total_out=0,this.msg="",this.state=null,this.data_type=2,this.adler=0},Eo=Object.prototype.toString;function Qo(t){if(!(this instanceof Qo))return new Qo(t);this.options=Ir.assign({level:-1,method:8,chunkSize:16384,windowBits:15,memLevel:8,strategy:0,to:""},t||{});var e=this.options;e.raw&&e.windowBits>0?e.windowBits=-e.windowBits:e.gzip&&e.windowBits>0&&e.windowBits<16&&(e.windowBits+=16),this.err=0,this.msg="",this.ended=!1,this.chunks=[],this.strm=new Jo,this.strm.avail_out=0;var n=Ro.deflateInit2(this.strm,e.level,e.method,e.windowBits,e.memLevel,e.strategy);if(0!==n)throw new Error(yo[n]);if(e.header&&Ro.deflateSetHeader(this.strm,e.header),e.dictionary){var i;if(i="string"==typeof e.dictionary?No(e.dictionary):"[object ArrayBuffer]"===Eo.call(e.dictionary)?new Uint8Array(e.dictionary):e.dictionary,0!==(n=Ro.deflateSetDictionary(this.strm,i)))throw new Error(yo[n]);this._dict_set=!0}}function Do(t,e){var n=new Qo(e);if(n.push(t,!0),n.err)throw n.msg||yo[n.err];return n.result}Qo.prototype.push=function(t,e){var n,i,r=this.strm,o=this.options.chunkSize;if(this.ended)return!1;i=e===~~e?e:!0===e?4:0,"string"==typeof t?r.input=No(t):"[object ArrayBuffer]"===Eo.call(t)?r.input=new Uint8Array(t):r.input=t,r.next_in=0,r.avail_in=r.input.length;do{if(0===r.avail_out&&(r.output=new Ir.Buf8(o),r.next_out=0,r.avail_out=o),1!==(n=Ro.deflate(r,i))&&0!==n)return this.onEnd(n),this.ended=!0,!1;0!==r.avail_out&&(0!==r.avail_in||4!==i&&2!==i)||("string"===this.options.to?this.onData(zo(Ir.shrinkBuf(r.output,r.next_out))):this.onData(Ir.shrinkBuf(r.output,r.next_out)))}while((r.avail_in>0||0===r.avail_out)&&1!==n);return 4===i?(n=Ro.deflateEnd(this.strm),this.onEnd(n),this.ended=!0,0===n):2!==i||(this.onEnd(0),r.avail_out=0,!0)},Qo.prototype.onData=function(t){this.chunks.push(t)},Qo.prototype.onEnd=function(t){0===t&&("string"===this.options.to?this.result=this.chunks.join(""):this.result=Ir.flattenChunks(this.chunks)),this.chunks=[],this.err=t,this.msg=this.strm.msg};var Uo={Deflate:Qo,deflate:Do,deflateRaw:function(t,e){return(e=e||{}).raw=!0,Do(t,e)},gzip:function(t,e){return(e=e||{}).gzip=!0,Do(t,e)}},Bo=function(t,e){var n,i,r,o,s,a,c,l,u,d,h,f,m,p,y,b,v,g,Z,w,X,L,x,k,G;n=t.state,i=t.next_in,k=t.input,r=i+(t.avail_in-5),o=t.next_out,G=t.output,s=o-(e-t.avail_out),a=o+(t.avail_out-257),c=n.dmax,l=n.wsize,u=n.whave,d=n.wnext,h=n.window,f=n.hold,m=n.bits,p=n.lencode,y=n.distcode,b=(1<<n.lenbits)-1,v=(1<<n.distbits)-1;t:do{m<15&&(f+=k[i++]<<m,m+=8,f+=k[i++]<<m,m+=8),g=p[f&b];e:for(;;){if(f>>>=Z=g>>>24,m-=Z,0===(Z=g>>>16&255))G[o++]=65535&g;else{if(!(16&Z)){if(0==(64&Z)){g=p[(65535&g)+(f&(1<<Z)-1)];continue e}if(32&Z){n.mode=12;break t}t.msg="invalid literal/length code",n.mode=30;break t}w=65535&g,(Z&=15)&&(m<Z&&(f+=k[i++]<<m,m+=8),w+=f&(1<<Z)-1,f>>>=Z,m-=Z),m<15&&(f+=k[i++]<<m,m+=8,f+=k[i++]<<m,m+=8),g=y[f&v];n:for(;;){if(f>>>=Z=g>>>24,m-=Z,!(16&(Z=g>>>16&255))){if(0==(64&Z)){g=y[(65535&g)+(f&(1<<Z)-1)];continue n}t.msg="invalid distance code",n.mode=30;break t}if(X=65535&g,m<(Z&=15)&&(f+=k[i++]<<m,(m+=8)<Z&&(f+=k[i++]<<m,m+=8)),(X+=f&(1<<Z)-1)>c){t.msg="invalid distance too far back",n.mode=30;break t}if(f>>>=Z,m-=Z,X>(Z=o-s)){if((Z=X-Z)>u&&n.sane){t.msg="invalid distance too far back",n.mode=30;break t}if(L=0,x=h,0===d){if(L+=l-Z,Z<w){w-=Z;do{G[o++]=h[L++]}while(--Z);L=o-X,x=G}}else if(d<Z){if(L+=l+d-Z,(Z-=d)<w){w-=Z;do{G[o++]=h[L++]}while(--Z);if(L=0,d<w){w-=Z=d;do{G[o++]=h[L++]}while(--Z);L=o-X,x=G}}}else if(L+=d-Z,Z<w){w-=Z;do{G[o++]=h[L++]}while(--Z);L=o-X,x=G}for(;w>2;)G[o++]=x[L++],G[o++]=x[L++],G[o++]=x[L++],w-=3;w&&(G[o++]=x[L++],w>1&&(G[o++]=x[L++]))}else{L=o-X;do{G[o++]=G[L++],G[o++]=G[L++],G[o++]=G[L++],w-=3}while(w>2);w&&(G[o++]=G[L++],w>1&&(G[o++]=G[L++]))}break}}break}}while(i<r&&o<a);i-=w=m>>3,f&=(1<<(m-=w<<3))-1,t.next_in=i,t.next_out=o,t.avail_in=i<r?r-i+5:5-(i-r),t.avail_out=o<a?a-o+257:257-(o-a),n.hold=f,n.bits=m},Oo=[3,4,5,6,7,8,9,10,11,13,15,17,19,23,27,31,35,43,51,59,67,83,99,115,131,163,195,227,258,0,0],Ao=[16,16,16,16,16,16,16,16,17,17,17,17,18,18,18,18,19,19,19,19,20,20,20,20,21,21,21,21,16,72,78],qo=[1,2,3,4,5,7,9,13,17,25,33,49,65,97,129,193,257,385,513,769,1025,1537,2049,3073,4097,6145,8193,12289,16385,24577,0,0],$o=[16,16,16,16,17,17,18,18,19,19,20,20,21,21,22,22,23,23,24,24,25,25,26,26,27,27,28,28,29,29,64,64],ts=function(t,e,n,i,r,o,s,a){var c,l,u,d,h,f,m,p,y,b=a.bits,v=0,g=0,Z=0,w=0,X=0,L=0,x=0,k=0,G=0,S=0,W=null,Y=0,C=new Ir.Buf16(16),I=new Ir.Buf16(16),T=null,R=0;for(v=0;v<=15;v++)C[v]=0;for(g=0;g<i;g++)C[e[n+g]]++;for(X=b,w=15;w>=1&&0===C[w];w--);if(X>w&&(X=w),0===w)return r[o++]=20971520,r[o++]=20971520,a.bits=1,0;for(Z=1;Z<w&&0===C[Z];Z++);for(X<Z&&(X=Z),k=1,v=1;v<=15;v++)if(k<<=1,(k-=C[v])<0)return-1;if(k>0&&(0===t||1!==w))return-1;for(I[1]=0,v=1;v<15;v++)I[v+1]=I[v]+C[v];for(g=0;g<i;g++)0!==e[n+g]&&(s[I[e[n+g]]++]=g);if(0===t?(W=T=s,f=19):1===t?(W=Oo,Y-=257,T=Ao,R-=257,f=256):(W=qo,T=$o,f=-1),S=0,g=0,v=Z,h=o,L=X,x=0,u=-1,d=(G=1<<X)-1,1===t&&G>852||2===t&&G>592)return 1;for(;;){m=v-x,s[g]<f?(p=0,y=s[g]):s[g]>f?(p=T[R+s[g]],y=W[Y+s[g]]):(p=96,y=0),c=1<<v-x,Z=l=1<<L;do{r[h+(S>>x)+(l-=c)]=m<<24|p<<16|y|0}while(0!==l);for(c=1<<v-1;S&c;)c>>=1;if(0!==c?(S&=c-1,S+=c):S=0,g++,0==--C[v]){if(v===w)break;v=e[n+s[g]]}if(v>X&&(S&d)!==u){for(0===x&&(x=X),h+=Z,k=1<<(L=v-x);L+x<w&&!((k-=C[L+x])<=0);)L++,k<<=1;if(G+=1<<L,1===t&&G>852||2===t&&G>592)return 1;r[u=S&d]=X<<24|L<<16|h-o|0}}return 0!==S&&(r[h+S]=v-x<<24|64<<16|0),a.bits=X,0};function es(t){return(t>>>24&255)+(t>>>8&65280)+((65280&t)<<8)+((255&t)<<24)}function ns(){this.mode=0,this.last=!1,this.wrap=0,this.havedict=!1,this.flags=0,this.dmax=0,this.check=0,this.total=0,this.head=null,this.wbits=0,this.wsize=0,this.whave=0,this.wnext=0,this.window=null,this.hold=0,this.bits=0,this.length=0,this.offset=0,this.extra=0,this.lencode=null,this.distcode=null,this.lenbits=0,this.distbits=0,this.ncode=0,this.nlen=0,this.ndist=0,this.have=0,this.next=null,this.lens=new Ir.Buf16(320),this.work=new Ir.Buf16(288),this.lendyn=null,this.distdyn=null,this.sane=0,this.back=0,this.was=0}function is(t){var e;return t&&t.state?(e=t.state,t.total_in=t.total_out=e.total=0,t.msg="",e.wrap&&(t.adler=1&e.wrap),e.mode=1,e.last=0,e.havedict=0,e.dmax=32768,e.head=null,e.hold=0,e.bits=0,e.lencode=e.lendyn=new Ir.Buf32(852),e.distcode=e.distdyn=new Ir.Buf32(592),e.sane=1,e.back=-1,0):-2}function rs(t){var e;return t&&t.state?((e=t.state).wsize=0,e.whave=0,e.wnext=0,is(t)):-2}function os(t,e){var n,i;return t&&t.state?(i=t.state,e<0?(n=0,e=-e):(n=1+(e>>4),e<48&&(e&=15)),e&&(e<8||e>15)?-2:(null!==i.window&&i.wbits!==e&&(i.window=null),i.wrap=n,i.wbits=e,rs(t))):-2}function ss(t,e){var n,i;return t?(i=new ns,t.state=i,i.window=null,0!==(n=os(t,e))&&(t.state=null),n):-2}var as,cs,ls=!0;function us(t){if(ls){var e;for(as=new Ir.Buf32(512),cs=new Ir.Buf32(32),e=0;e<144;)t.lens[e++]=8;for(;e<256;)t.lens[e++]=9;for(;e<280;)t.lens[e++]=7;for(;e<288;)t.lens[e++]=8;for(ts(1,t.lens,0,288,as,0,t.work,{bits:9}),e=0;e<32;)t.lens[e++]=5;ts(2,t.lens,0,32,cs,0,t.work,{bits:5}),ls=!1}t.lencode=as,t.lenbits=9,t.distcode=cs,t.distbits=5}function ds(t,e,n,i){var r,o=t.state;return null===o.window&&(o.wsize=1<<o.wbits,o.wnext=0,o.whave=0,o.window=new Ir.Buf8(o.wsize)),i>=o.wsize?(Ir.arraySet(o.window,e,n-o.wsize,o.wsize,0),o.wnext=0,o.whave=o.wsize):((r=o.wsize-o.wnext)>i&&(r=i),Ir.arraySet(o.window,e,n-i,r,o.wnext),(i-=r)?(Ir.arraySet(o.window,e,n-i,i,0),o.wnext=i,o.whave=o.wsize):(o.wnext+=r,o.wnext===o.wsize&&(o.wnext=0),o.whave<o.wsize&&(o.whave+=r))),0}var hs={inflateReset:rs,inflateReset2:os,inflateResetKeep:is,inflateInit:function(t){return ss(t,15)},inflateInit2:ss,inflate:function(t,e){var n,i,r,o,s,a,c,l,u,d,h,f,m,p,y,b,v,g,Z,w,X,L,x,k,G=0,S=new Ir.Buf8(4),W=[16,17,18,0,8,7,9,6,10,5,11,4,12,3,13,2,14,1,15];if(!t||!t.state||!t.output||!t.input&&0!==t.avail_in)return-2;12===(n=t.state).mode&&(n.mode=13),s=t.next_out,r=t.output,c=t.avail_out,o=t.next_in,i=t.input,a=t.avail_in,l=n.hold,u=n.bits,d=a,h=c,L=0;t:for(;;)switch(n.mode){case 1:if(0===n.wrap){n.mode=13;break}for(;u<16;){if(0===a)break t;a--,l+=i[o++]<<u,u+=8}if(2&n.wrap&&35615===l){n.check=0,S[0]=255&l,S[1]=l>>>8&255,n.check=po(n.check,S,2,0),l=0,u=0,n.mode=2;break}if(n.flags=0,n.head&&(n.head.done=!1),!(1&n.wrap)||(((255&l)<<8)+(l>>8))%31){t.msg="incorrect header check",n.mode=30;break}if(8!=(15&l)){t.msg="unknown compression method",n.mode=30;break}if(u-=4,X=8+(15&(l>>>=4)),0===n.wbits)n.wbits=X;else if(X>n.wbits){t.msg="invalid window size",n.mode=30;break}n.dmax=1<<X,t.adler=n.check=1,n.mode=512&l?10:12,l=0,u=0;break;case 2:for(;u<16;){if(0===a)break t;a--,l+=i[o++]<<u,u+=8}if(n.flags=l,8!=(255&n.flags)){t.msg="unknown compression method",n.mode=30;break}if(57344&n.flags){t.msg="unknown header flags set",n.mode=30;break}n.head&&(n.head.text=l>>8&1),512&n.flags&&(S[0]=255&l,S[1]=l>>>8&255,n.check=po(n.check,S,2,0)),l=0,u=0,n.mode=3;case 3:for(;u<32;){if(0===a)break t;a--,l+=i[o++]<<u,u+=8}n.head&&(n.head.time=l),512&n.flags&&(S[0]=255&l,S[1]=l>>>8&255,S[2]=l>>>16&255,S[3]=l>>>24&255,n.check=po(n.check,S,4,0)),l=0,u=0,n.mode=4;case 4:for(;u<16;){if(0===a)break t;a--,l+=i[o++]<<u,u+=8}n.head&&(n.head.xflags=255&l,n.head.os=l>>8),512&n.flags&&(S[0]=255&l,S[1]=l>>>8&255,n.check=po(n.check,S,2,0)),l=0,u=0,n.mode=5;case 5:if(1024&n.flags){for(;u<16;){if(0===a)break t;a--,l+=i[o++]<<u,u+=8}n.length=l,n.head&&(n.head.extra_len=l),512&n.flags&&(S[0]=255&l,S[1]=l>>>8&255,n.check=po(n.check,S,2,0)),l=0,u=0}else n.head&&(n.head.extra=null);n.mode=6;case 6:if(1024&n.flags&&((f=n.length)>a&&(f=a),f&&(n.head&&(X=n.head.extra_len-n.length,n.head.extra||(n.head.extra=new Array(n.head.extra_len)),Ir.arraySet(n.head.extra,i,o,f,X)),512&n.flags&&(n.check=po(n.check,i,f,o)),a-=f,o+=f,n.length-=f),n.length))break t;n.length=0,n.mode=7;case 7:if(2048&n.flags){if(0===a)break t;f=0;do{X=i[o+f++],n.head&&X&&n.length<65536&&(n.head.name+=String.fromCharCode(X))}while(X&&f<a);if(512&n.flags&&(n.check=po(n.check,i,f,o)),a-=f,o+=f,X)break t}else n.head&&(n.head.name=null);n.length=0,n.mode=8;case 8:if(4096&n.flags){if(0===a)break t;f=0;do{X=i[o+f++],n.head&&X&&n.length<65536&&(n.head.comment+=String.fromCharCode(X))}while(X&&f<a);if(512&n.flags&&(n.check=po(n.check,i,f,o)),a-=f,o+=f,X)break t}else n.head&&(n.head.comment=null);n.mode=9;case 9:if(512&n.flags){for(;u<16;){if(0===a)break t;a--,l+=i[o++]<<u,u+=8}if(l!==(65535&n.check)){t.msg="header crc mismatch",n.mode=30;break}l=0,u=0}n.head&&(n.head.hcrc=n.flags>>9&1,n.head.done=!0),t.adler=n.check=0,n.mode=12;break;case 10:for(;u<32;){if(0===a)break t;a--,l+=i[o++]<<u,u+=8}t.adler=n.check=es(l),l=0,u=0,n.mode=11;case 11:if(0===n.havedict)return t.next_out=s,t.avail_out=c,t.next_in=o,t.avail_in=a,n.hold=l,n.bits=u,2;t.adler=n.check=1,n.mode=12;case 12:if(5===e||6===e)break t;case 13:if(n.last){l>>>=7&u,u-=7&u,n.mode=27;break}for(;u<3;){if(0===a)break t;a--,l+=i[o++]<<u,u+=8}switch(n.last=1&l,u-=1,3&(l>>>=1)){case 0:n.mode=14;break;case 1:if(us(n),n.mode=20,6===e){l>>>=2,u-=2;break t}break;case 2:n.mode=17;break;case 3:t.msg="invalid block type",n.mode=30}l>>>=2,u-=2;break;case 14:for(l>>>=7&u,u-=7&u;u<32;){if(0===a)break t;a--,l+=i[o++]<<u,u+=8}if((65535&l)!=(l>>>16^65535)){t.msg="invalid stored block lengths",n.mode=30;break}if(n.length=65535&l,l=0,u=0,n.mode=15,6===e)break t;case 15:n.mode=16;case 16:if(f=n.length){if(f>a&&(f=a),f>c&&(f=c),0===f)break t;Ir.arraySet(r,i,o,f,s),a-=f,o+=f,c-=f,s+=f,n.length-=f;break}n.mode=12;break;case 17:for(;u<14;){if(0===a)break t;a--,l+=i[o++]<<u,u+=8}if(n.nlen=257+(31&l),l>>>=5,u-=5,n.ndist=1+(31&l),l>>>=5,u-=5,n.ncode=4+(15&l),l>>>=4,u-=4,n.nlen>286||n.ndist>30){t.msg="too many length or distance symbols",n.mode=30;break}n.have=0,n.mode=18;case 18:for(;n.have<n.ncode;){for(;u<3;){if(0===a)break t;a--,l+=i[o++]<<u,u+=8}n.lens[W[n.have++]]=7&l,l>>>=3,u-=3}for(;n.have<19;)n.lens[W[n.have++]]=0;if(n.lencode=n.lendyn,n.lenbits=7,x={bits:n.lenbits},L=ts(0,n.lens,0,19,n.lencode,0,n.work,x),n.lenbits=x.bits,L){t.msg="invalid code lengths set",n.mode=30;break}n.have=0,n.mode=19;case 19:for(;n.have<n.nlen+n.ndist;){for(;b=(G=n.lencode[l&(1<<n.lenbits)-1])>>>16&255,v=65535&G,!((y=G>>>24)<=u);){if(0===a)break t;a--,l+=i[o++]<<u,u+=8}if(v<16)l>>>=y,u-=y,n.lens[n.have++]=v;else{if(16===v){for(k=y+2;u<k;){if(0===a)break t;a--,l+=i[o++]<<u,u+=8}if(l>>>=y,u-=y,0===n.have){t.msg="invalid bit length repeat",n.mode=30;break}X=n.lens[n.have-1],f=3+(3&l),l>>>=2,u-=2}else if(17===v){for(k=y+3;u<k;){if(0===a)break t;a--,l+=i[o++]<<u,u+=8}u-=y,X=0,f=3+(7&(l>>>=y)),l>>>=3,u-=3}else{for(k=y+7;u<k;){if(0===a)break t;a--,l+=i[o++]<<u,u+=8}u-=y,X=0,f=11+(127&(l>>>=y)),l>>>=7,u-=7}if(n.have+f>n.nlen+n.ndist){t.msg="invalid bit length repeat",n.mode=30;break}for(;f--;)n.lens[n.have++]=X}}if(30===n.mode)break;if(0===n.lens[256]){t.msg="invalid code -- missing end-of-block",n.mode=30;break}if(n.lenbits=9,x={bits:n.lenbits},L=ts(1,n.lens,0,n.nlen,n.lencode,0,n.work,x),n.lenbits=x.bits,L){t.msg="invalid literal/lengths set",n.mode=30;break}if(n.distbits=6,n.distcode=n.distdyn,x={bits:n.distbits},L=ts(2,n.lens,n.nlen,n.ndist,n.distcode,0,n.work,x),n.distbits=x.bits,L){t.msg="invalid distances set",n.mode=30;break}if(n.mode=20,6===e)break t;case 20:n.mode=21;case 21:if(a>=6&&c>=258){t.next_out=s,t.avail_out=c,t.next_in=o,t.avail_in=a,n.hold=l,n.bits=u,Bo(t,h),s=t.next_out,r=t.output,c=t.avail_out,o=t.next_in,i=t.input,a=t.avail_in,l=n.hold,u=n.bits,12===n.mode&&(n.back=-1);break}for(n.back=0;b=(G=n.lencode[l&(1<<n.lenbits)-1])>>>16&255,v=65535&G,!((y=G>>>24)<=u);){if(0===a)break t;a--,l+=i[o++]<<u,u+=8}if(b&&0==(240&b)){for(g=y,Z=b,w=v;b=(G=n.lencode[w+((l&(1<<g+Z)-1)>>g)])>>>16&255,v=65535&G,!(g+(y=G>>>24)<=u);){if(0===a)break t;a--,l+=i[o++]<<u,u+=8}l>>>=g,u-=g,n.back+=g}if(l>>>=y,u-=y,n.back+=y,n.length=v,0===b){n.mode=26;break}if(32&b){n.back=-1,n.mode=12;break}if(64&b){t.msg="invalid literal/length code",n.mode=30;break}n.extra=15&b,n.mode=22;case 22:if(n.extra){for(k=n.extra;u<k;){if(0===a)break t;a--,l+=i[o++]<<u,u+=8}n.length+=l&(1<<n.extra)-1,l>>>=n.extra,u-=n.extra,n.back+=n.extra}n.was=n.length,n.mode=23;case 23:for(;b=(G=n.distcode[l&(1<<n.distbits)-1])>>>16&255,v=65535&G,!((y=G>>>24)<=u);){if(0===a)break t;a--,l+=i[o++]<<u,u+=8}if(0==(240&b)){for(g=y,Z=b,w=v;b=(G=n.distcode[w+((l&(1<<g+Z)-1)>>g)])>>>16&255,v=65535&G,!(g+(y=G>>>24)<=u);){if(0===a)break t;a--,l+=i[o++]<<u,u+=8}l>>>=g,u-=g,n.back+=g}if(l>>>=y,u-=y,n.back+=y,64&b){t.msg="invalid distance code",n.mode=30;break}n.offset=v,n.extra=15&b,n.mode=24;case 24:if(n.extra){for(k=n.extra;u<k;){if(0===a)break t;a--,l+=i[o++]<<u,u+=8}n.offset+=l&(1<<n.extra)-1,l>>>=n.extra,u-=n.extra,n.back+=n.extra}if(n.offset>n.dmax){t.msg="invalid distance too far back",n.mode=30;break}n.mode=25;case 25:if(0===c)break t;if(f=h-c,n.offset>f){if((f=n.offset-f)>n.whave&&n.sane){t.msg="invalid distance too far back",n.mode=30;break}f>n.wnext?(f-=n.wnext,m=n.wsize-f):m=n.wnext-f,f>n.length&&(f=n.length),p=n.window}else p=r,m=s-n.offset,f=n.length;f>c&&(f=c),c-=f,n.length-=f;do{r[s++]=p[m++]}while(--f);0===n.length&&(n.mode=21);break;case 26:if(0===c)break t;r[s++]=n.length,c--,n.mode=21;break;case 27:if(n.wrap){for(;u<32;){if(0===a)break t;a--,l|=i[o++]<<u,u+=8}if(h-=c,t.total_out+=h,n.total+=h,h&&(t.adler=n.check=n.flags?po(n.check,r,h,s-h):ho(n.check,r,h,s-h)),h=c,(n.flags?l:es(l))!==n.check){t.msg="incorrect data check",n.mode=30;break}l=0,u=0}n.mode=28;case 28:if(n.wrap&&n.flags){for(;u<32;){if(0===a)break t;a--,l+=i[o++]<<u,u+=8}if(l!==(4294967295&n.total)){t.msg="incorrect length check",n.mode=30;break}l=0,u=0}n.mode=29;case 29:L=1;break t;case 30:L=-3;break t;case 31:return-4;case 32:default:return-2}return t.next_out=s,t.avail_out=c,t.next_in=o,t.avail_in=a,n.hold=l,n.bits=u,(n.wsize||h!==t.avail_out&&n.mode<30&&(n.mode<27||4!==e))&&ds(t,t.output,t.next_out,h-t.avail_out),d-=t.avail_in,h-=t.avail_out,t.total_in+=d,t.total_out+=h,n.total+=h,n.wrap&&h&&(t.adler=n.check=n.flags?po(n.check,r,h,t.next_out-h):ho(n.check,r,h,t.next_out-h)),t.data_type=n.bits+(n.last?64:0)+(12===n.mode?128:0)+(20===n.mode||15===n.mode?256:0),(0===d&&0===h||4===e)&&0===L&&(L=-5),L},inflateEnd:function(t){if(!t||!t.state)return-2;var e=t.state;return e.window&&(e.window=null),t.state=null,0},inflateGetHeader:function(t,e){var n;return t&&t.state?0==(2&(n=t.state).wrap)?-2:(n.head=e,e.done=!1,0):-2},inflateSetDictionary:function(t,e){var n,i=e.length;return t&&t.state?0!==(n=t.state).wrap&&11!==n.mode?-2:11===n.mode&&ho(1,e,i,0)!==n.check?-3:ds(t,e,i,i)?(n.mode=31,-4):(n.havedict=1,0):-2},inflateInfo:"pako inflate (from Nodeca project)"},fs={Z_NO_FLUSH:0,Z_PARTIAL_FLUSH:1,Z_SYNC_FLUSH:2,Z_FULL_FLUSH:3,Z_FINISH:4,Z_BLOCK:5,Z_TREES:6,Z_OK:0,Z_STREAM_END:1,Z_NEED_DICT:2,Z_ERRNO:-1,Z_STREAM_ERROR:-2,Z_DATA_ERROR:-3,Z_BUF_ERROR:-5,Z_NO_COMPRESSION:0,Z_BEST_SPEED:1,Z_BEST_COMPRESSION:9,Z_DEFAULT_COMPRESSION:-1,Z_FILTERED:1,Z_HUFFMAN_ONLY:2,Z_RLE:3,Z_FIXED:4,Z_DEFAULT_STRATEGY:0,Z_BINARY:0,Z_TEXT:1,Z_UNKNOWN:2,Z_DEFLATED:8};var ms=function(){this.text=0,this.time=0,this.xflags=0,this.os=0,this.extra=null,this.extra_len=0,this.name="",this.comment="",this.hcrc=0,this.done=!1},ps=Object.prototype.toString;function ys(t){if(!(this instanceof ys))return new ys(t);this.options=Ir.assign({chunkSize:16384,windowBits:0,to:""},t||{});var e=this.options;e.raw&&e.windowBits>=0&&e.windowBits<16&&(e.windowBits=-e.windowBits,0===e.windowBits&&(e.windowBits=-15)),!(e.windowBits>=0&&e.windowBits<16)||t&&t.windowBits||(e.windowBits+=32),e.windowBits>15&&e.windowBits<48&&0==(15&e.windowBits)&&(e.windowBits|=15),this.err=0,this.msg="",this.ended=!1,this.chunks=[],this.strm=new Jo,this.strm.avail_out=0;var n=hs.inflateInit2(this.strm,e.windowBits);if(n!==fs.Z_OK)throw new Error(yo[n]);if(this.header=new ms,hs.inflateGetHeader(this.strm,this.header),e.dictionary&&("string"==typeof e.dictionary?e.dictionary=No(e.dictionary):"[object ArrayBuffer]"===ps.call(e.dictionary)&&(e.dictionary=new Uint8Array(e.dictionary)),e.raw&&(n=hs.inflateSetDictionary(this.strm,e.dictionary))!==fs.Z_OK))throw new Error(yo[n])}function bs(t,e){var n=new ys(e);if(n.push(t,!0),n.err)throw n.msg||yo[n.err];return n.result}ys.prototype.push=function(t,e){var n,i,r,o,s,a=this.strm,c=this.options.chunkSize,l=this.options.dictionary,u=!1;if(this.ended)return!1;i=e===~~e?e:!0===e?fs.Z_FINISH:fs.Z_NO_FLUSH,"string"==typeof t?a.input=jo(t):"[object ArrayBuffer]"===ps.call(t)?a.input=new Uint8Array(t):a.input=t,a.next_in=0,a.avail_in=a.input.length;do{if(0===a.avail_out&&(a.output=new Ir.Buf8(c),a.next_out=0,a.avail_out=c),(n=hs.inflate(a,fs.Z_NO_FLUSH))===fs.Z_NEED_DICT&&l&&(n=hs.inflateSetDictionary(this.strm,l)),n===fs.Z_BUF_ERROR&&!0===u&&(n=fs.Z_OK,u=!1),n!==fs.Z_STREAM_END&&n!==fs.Z_OK)return this.onEnd(n),this.ended=!0,!1;a.next_out&&(0!==a.avail_out&&n!==fs.Z_STREAM_END&&(0!==a.avail_in||i!==fs.Z_FINISH&&i!==fs.Z_SYNC_FLUSH)||("string"===this.options.to?(r=_o(a.output,a.next_out),o=a.next_out-r,s=Fo(a.output,r),a.next_out=o,a.avail_out=c-o,o&&Ir.arraySet(a.output,a.output,r,o,0),this.onData(s)):this.onData(Ir.shrinkBuf(a.output,a.next_out)))),0===a.avail_in&&0===a.avail_out&&(u=!0)}while((a.avail_in>0||0===a.avail_out)&&n!==fs.Z_STREAM_END);return n===fs.Z_STREAM_END&&(i=fs.Z_FINISH),i===fs.Z_FINISH?(n=hs.inflateEnd(this.strm),this.onEnd(n),this.ended=!0,n===fs.Z_OK):i!==fs.Z_SYNC_FLUSH||(this.onEnd(fs.Z_OK),a.avail_out=0,!0)},ys.prototype.onData=function(t){this.chunks.push(t)},ys.prototype.onEnd=function(t){t===fs.Z_OK&&("string"===this.options.to?this.result=this.chunks.join(""):this.result=Ir.flattenChunks(this.chunks)),this.chunks=[],this.err=t,this.msg=this.strm.msg};var vs={Inflate:ys,inflate:bs,inflateRaw:function(t,e){return(e=e||{}).raw=!0,bs(t,e)},ungzip:bs},gs={};(0,Ir.assign)(gs,Uo,vs,fs);var Zs=gs;function ws(t,e,n){var i=void 0===e?null:e,r=function(t,e){var n=atob(t);if(e){for(var i=new Uint8Array(n.length),r=0,o=n.length;r<o;++r)i[r]=n.charCodeAt(r);return String.fromCharCode.apply(null,new Uint16Array(i.buffer))}return n}(t,void 0!==n&&n),o=r.indexOf("\n",10)+1,s=r.substring(o)+(i?"\/\/# sourceMappingURL="+i:""),a=new Blob([s],{type:"application/javascript"});return URL.createObjectURL(a)}var Xs,Ls,xs,ks,Gs=(Xs="Lyogcm9sbHVwLXBsdWdpbi13ZWItd29ya2VyLWxvYWRlciAqLwovKioKICogQ29weXJpZ2h0IENyb3F1ZXQgQ29ycG9yYXRpb24gMjAyMQogKiBCdW5kbGUgb2YgQGNyb3F1ZXQvY3JvcXVldAogKiBEYXRlOiAyMDIxLTA4LTI0CiAqIFZlcnNpb246IDEuMC40CiAqLwoKIWZ1bmN0aW9uKCl7InVzZSBzdHJpY3QiO2Z1bmN0aW9uIHQoZSl7cmV0dXJuKHQ9ImZ1bmN0aW9uIj09dHlwZW9mIFN5bWJvbCYmInN5bWJvbCI9PXR5cGVvZiBTeW1ib2wuaXRlcmF0b3I/ZnVuY3Rpb24odCl7cmV0dXJuIHR5cGVvZiB0fTpmdW5jdGlvbih0KXtyZXR1cm4gdCYmImZ1bmN0aW9uIj09dHlwZW9mIFN5bWJvbCYmdC5jb25zdHJ1Y3Rvcj09PVN5bWJvbCYmdCE9PVN5bWJvbC5wcm90b3R5cGU/InN5bWJvbCI6dHlwZW9mIHR9KShlKX1mdW5jdGlvbiBlKHQsZSxyLG4saSxhLG8pe3RyeXt2YXIgcz10W2FdKG8pLGg9cy52YWx1ZX1jYXRjaCh0KXtyZXR1cm4gdm9pZCByKHQpfXMuZG9uZT9lKGgpOlByb21pc2UucmVzb2x2ZShoKS50aGVuKG4saSl9ZnVuY3Rpb24gcih0KXtyZXR1cm4gZnVuY3Rpb24oKXt2YXIgcj10aGlzLG49YXJndW1lbnRzO3JldHVybiBuZXcgUHJvbWlzZSgoZnVuY3Rpb24oaSxhKXt2YXIgbz10LmFwcGx5KHIsbik7ZnVuY3Rpb24gcyh0KXtlKG8saSxhLHMsaCwibmV4dCIsdCl9ZnVuY3Rpb24gaCh0KXtlKG8saSxhLHMsaCwidGhyb3ciLHQpfXModm9pZCAwKX0pKX19ZnVuY3Rpb24gbih0LGUpeyhudWxsPT1lfHxlPnQubGVuZ3RoKSYmKGU9dC5sZW5ndGgpO2Zvcih2YXIgcj0wLG49bmV3IEFycmF5KGUpO3I8ZTtyKyspbltyXT10W3JdO3JldHVybiBufWZ1bmN0aW9uIGkodCxlKXt2YXIgcjtpZigidW5kZWZpbmVkIj09dHlwZW9mIFN5bWJvbHx8bnVsbD09dFtTeW1ib2wuaXRlcmF0b3JdKXtpZihBcnJheS5pc0FycmF5KHQpfHwocj1mdW5jdGlvbih0LGUpe2lmKHQpe2lmKCJzdHJpbmciPT10eXBlb2YgdClyZXR1cm4gbih0LGUpO3ZhciByPU9iamVjdC5wcm90b3R5cGUudG9TdHJpbmcuY2FsbCh0KS5zbGljZSg4LC0xKTtyZXR1cm4iT2JqZWN0Ij09PXImJnQuY29uc3RydWN0b3ImJihyPXQuY29uc3RydWN0b3IubmFtZSksIk1hcCI9PT1yfHwiU2V0Ij09PXI/QXJyYXkuZnJvbSh0KToiQXJndW1lbnRzIj09PXJ8fC9eKD86VWl8SSludCg/Ojh8MTZ8MzIpKD86Q2xhbXBlZCk/QXJyYXkkLy50ZXN0KHIpP24odCxlKTp2b2lkIDB9fSh0KSl8fGUmJnQmJiJudW1iZXIiPT10eXBlb2YgdC5sZW5ndGgpe3ImJih0PXIpO3ZhciBpPTAsYT1mdW5jdGlvbigpe307cmV0dXJue3M6YSxuOmZ1bmN0aW9uKCl7cmV0dXJuIGk+PXQubGVuZ3RoP3tkb25lOiEwfTp7ZG9uZTohMSx2YWx1ZTp0W2krK119fSxlOmZ1bmN0aW9uKHQpe3Rocm93IHR9LGY6YX19dGhyb3cgbmV3IFR5cGVFcnJvcigiSW52YWxpZCBhdHRlbXB0IHRvIGl0ZXJhdGUgbm9uLWl0ZXJhYmxlIGluc3RhbmNlLlxuSW4gb3JkZXIgdG8gYmUgaXRlcmFibGUsIG5vbi1hcnJheSBvYmplY3RzIG11c3QgaGF2ZSBhIFtTeW1ib2wuaXRlcmF0b3JdKCkgbWV0aG9kLiIpfXZhciBvLHM9ITAsaD0hMTtyZXR1cm57czpmdW5jdGlvbigpe3I9dFtTeW1ib2wuaXRlcmF0b3JdKCl9LG46ZnVuY3Rpb24oKXt2YXIgdD1yLm5leHQoKTtyZXR1cm4gcz10LmRvbmUsdH0sZTpmdW5jdGlvbih0KXtoPSEwLG89dH0sZjpmdW5jdGlvbigpe3RyeXtzfHxudWxsPT1yLnJldHVybnx8ci5yZXR1cm4oKX1maW5hbGx5e2lmKGgpdGhyb3cgb319fX12YXIgYT0idW5kZWZpbmVkIiE9dHlwZW9mIGdsb2JhbFRoaXM/Z2xvYmFsVGhpczoidW5kZWZpbmVkIiE9dHlwZW9mIHdpbmRvdz93aW5kb3c6InVuZGVmaW5lZCIhPXR5cGVvZiBnbG9iYWw/Z2xvYmFsOiJ1bmRlZmluZWQiIT10eXBlb2Ygc2VsZj9zZWxmOnt9O2Z1bmN0aW9uIG8odCxlLHIpe3JldHVybiB0KHI9e3BhdGg6ZSxleHBvcnRzOnt9LHJlcXVpcmU6ZnVuY3Rpb24odCxlKXtyZXR1cm4gaChudWxsPT1lJiZyLnBhdGgpfX0sci5leHBvcnRzKSxyLmV4cG9ydHN9ZnVuY3Rpb24gcyh0KXtpZih0Ll9fZXNNb2R1bGUpcmV0dXJuIHQ7dmFyIGU9T2JqZWN0LmRlZmluZVByb3BlcnR5KHt9LCJfX2VzTW9kdWxlIix7dmFsdWU6ITB9KTtyZXR1cm4gT2JqZWN0LmtleXModCkuZm9yRWFjaCgoZnVuY3Rpb24ocil7dmFyIG49T2JqZWN0LmdldE93blByb3BlcnR5RGVzY3JpcHRvcih0LHIpO09iamVjdC5kZWZpbmVQcm9wZXJ0eShlLHIsbi5nZXQ/bjp7ZW51bWVyYWJsZTohMCxnZXQ6ZnVuY3Rpb24oKXtyZXR1cm4gdFtyXX19KX0pKSxlfWZ1bmN0aW9uIGgoKXt0aHJvdyBuZXcgRXJyb3IoIkR5bmFtaWMgcmVxdWlyZXMgYXJlIG5vdCBjdXJyZW50bHkgc3VwcG9ydGVkIGJ5IEByb2xsdXAvcGx1Z2luLWNvbW1vbmpzIil9bygoZnVuY3Rpb24oZSl7dmFyIHI9ZnVuY3Rpb24oZSl7dmFyIHIsbj1PYmplY3QucHJvdG90eXBlLGk9bi5oYXNPd25Qcm9wZXJ0eSxhPSJmdW5jdGlvbiI9PXR5cGVvZiBTeW1ib2w/U3ltYm9sOnt9LG89YS5pdGVyYXRvcnx8IkBAaXRlcmF0b3IiLHM9YS5hc3luY0l0ZXJhdG9yfHwiQEBhc3luY0l0ZXJhdG9yIixoPWEudG9TdHJpbmdUYWd8fCJAQHRvU3RyaW5nVGFnIjtmdW5jdGlvbiBjKHQsZSxyKXtyZXR1cm4gT2JqZWN0LmRlZmluZVByb3BlcnR5KHQsZSx7dmFsdWU6cixlbnVtZXJhYmxlOiEwLGNvbmZpZ3VyYWJsZTohMCx3cml0YWJsZTohMH0pLHRbZV19dHJ5e2Moe30sIiIpfWNhdGNoKHQpe2M9ZnVuY3Rpb24odCxlLHIpe3JldHVybiB0W2VdPXJ9fWZ1bmN0aW9uIGwodCxlLHIsbil7dmFyIGk9ZSYmZS5wcm90b3R5cGUgaW5zdGFuY2VvZiB2P2U6dixhPU9iamVjdC5jcmVhdGUoaS5wcm90b3R5cGUpLG89bmV3IEMobnx8W10pO3JldHVybiBhLl9pbnZva2U9ZnVuY3Rpb24odCxlLHIpe3ZhciBuPWY7cmV0dXJuIGZ1bmN0aW9uKGksYSl7aWYobj09PV8pdGhyb3cgbmV3IEVycm9yKCJHZW5lcmF0b3IgaXMgYWxyZWFkeSBydW5uaW5nIik7aWYobj09PXApe2lmKCJ0aHJvdyI9PT1pKXRocm93IGE7cmV0dXJuIE8oKX1mb3Ioci5tZXRob2Q9aSxyLmFyZz1hOzspe3ZhciBvPXIuZGVsZWdhdGU7aWYobyl7dmFyIHM9QShvLHIpO2lmKHMpe2lmKHM9PT1nKWNvbnRpbnVlO3JldHVybiBzfX1pZigibmV4dCI9PT1yLm1ldGhvZClyLnNlbnQ9ci5fc2VudD1yLmFyZztlbHNlIGlmKCJ0aHJvdyI9PT1yLm1ldGhvZCl7aWYobj09PWYpdGhyb3cgbj1wLHIuYXJnO3IuZGlzcGF0Y2hFeGNlcHRpb24oci5hcmcpfWVsc2UicmV0dXJuIj09PXIubWV0aG9kJiZyLmFicnVwdCgicmV0dXJuIixyLmFyZyk7bj1fO3ZhciBoPXUodCxlLHIpO2lmKCJub3JtYWwiPT09aC50eXBlKXtpZihuPXIuZG9uZT9wOmQsaC5hcmc9PT1nKWNvbnRpbnVlO3JldHVybnt2YWx1ZTpoLmFyZyxkb25lOnIuZG9uZX19InRocm93Ij09PWgudHlwZSYmKG49cCxyLm1ldGhvZD0idGhyb3ciLHIuYXJnPWguYXJnKX19fSh0LHIsbyksYX1mdW5jdGlvbiB1KHQsZSxyKXt0cnl7cmV0dXJue3R5cGU6Im5vcm1hbCIsYXJnOnQuY2FsbChlLHIpfX1jYXRjaCh0KXtyZXR1cm57dHlwZToidGhyb3ciLGFyZzp0fX19ZS53cmFwPWw7dmFyIGY9InN1c3BlbmRlZFN0YXJ0IixkPSJzdXNwZW5kZWRZaWVsZCIsXz0iZXhlY3V0aW5nIixwPSJjb21wbGV0ZWQiLGc9e307ZnVuY3Rpb24gdigpe31mdW5jdGlvbiB5KCl7fWZ1bmN0aW9uIG0oKXt9dmFyIHc9e307d1tvXT1mdW5jdGlvbigpe3JldHVybiB0aGlzfTt2YXIgYj1PYmplY3QuZ2V0UHJvdG90eXBlT2Ysaz1iJiZiKGIoRChbXSkpKTtrJiZrIT09biYmaS5jYWxsKGssbykmJih3PWspO3ZhciB4PW0ucHJvdG90eXBlPXYucHJvdG90eXBlPU9iamVjdC5jcmVhdGUodyk7ZnVuY3Rpb24geih0KXtbIm5leHQiLCJ0aHJvdyIsInJldHVybiJdLmZvckVhY2goKGZ1bmN0aW9uKGUpe2ModCxlLChmdW5jdGlvbih0KXtyZXR1cm4gdGhpcy5faW52b2tlKGUsdCl9KSl9KSl9ZnVuY3Rpb24gQihlLHIpe2Z1bmN0aW9uIG4oYSxvLHMsaCl7dmFyIGM9dShlW2FdLGUsbyk7aWYoInRocm93IiE9PWMudHlwZSl7dmFyIGw9Yy5hcmcsZj1sLnZhbHVlO3JldHVybiBmJiYib2JqZWN0Ij09PXQoZikmJmkuY2FsbChmLCJfX2F3YWl0Iik/ci5yZXNvbHZlKGYuX19hd2FpdCkudGhlbigoZnVuY3Rpb24odCl7bigibmV4dCIsdCxzLGgpfSksKGZ1bmN0aW9uKHQpe24oInRocm93Iix0LHMsaCl9KSk6ci5yZXNvbHZlKGYpLnRoZW4oKGZ1bmN0aW9uKHQpe2wudmFsdWU9dCxzKGwpfSksKGZ1bmN0aW9uKHQpe3JldHVybiBuKCJ0aHJvdyIsdCxzLGgpfSkpfWgoYy5hcmcpfXZhciBhO3RoaXMuX2ludm9rZT1mdW5jdGlvbih0LGUpe2Z1bmN0aW9uIGkoKXtyZXR1cm4gbmV3IHIoKGZ1bmN0aW9uKHIsaSl7bih0LGUscixpKX0pKX1yZXR1cm4gYT1hP2EudGhlbihpLGkpOmkoKX19ZnVuY3Rpb24gQSh0LGUpe3ZhciBuPXQuaXRlcmF0b3JbZS5tZXRob2RdO2lmKG49PT1yKXtpZihlLmRlbGVnYXRlPW51bGwsInRocm93Ij09PWUubWV0aG9kKXtpZih0Lml0ZXJhdG9yLnJldHVybiYmKGUubWV0aG9kPSJyZXR1cm4iLGUuYXJnPXIsQSh0LGUpLCJ0aHJvdyI9PT1lLm1ldGhvZCkpcmV0dXJuIGc7ZS5tZXRob2Q9InRocm93IixlLmFyZz1uZXcgVHlwZUVycm9yKCJUaGUgaXRlcmF0b3IgZG9lcyBub3QgcHJvdmlkZSBhICd0aHJvdycgbWV0aG9kIil9cmV0dXJuIGd9dmFyIGk9dShuLHQuaXRlcmF0b3IsZS5hcmcpO2lmKCJ0aHJvdyI9PT1pLnR5cGUpcmV0dXJuIGUubWV0aG9kPSJ0aHJvdyIsZS5hcmc9aS5hcmcsZS5kZWxlZ2F0ZT1udWxsLGc7dmFyIGE9aS5hcmc7cmV0dXJuIGE/YS5kb25lPyhlW3QucmVzdWx0TmFtZV09YS52YWx1ZSxlLm5leHQ9dC5uZXh0TG9jLCJyZXR1cm4iIT09ZS5tZXRob2QmJihlLm1ldGhvZD0ibmV4dCIsZS5hcmc9ciksZS5kZWxlZ2F0ZT1udWxsLGcpOmE6KGUubWV0aG9kPSJ0aHJvdyIsZS5hcmc9bmV3IFR5cGVFcnJvcigiaXRlcmF0b3IgcmVzdWx0IGlzIG5vdCBhbiBvYmplY3QiKSxlLmRlbGVnYXRlPW51bGwsZyl9ZnVuY3Rpb24gUyh0KXt2YXIgZT17dHJ5TG9jOnRbMF19OzEgaW4gdCYmKGUuY2F0Y2hMb2M9dFsxXSksMiBpbiB0JiYoZS5maW5hbGx5TG9jPXRbMl0sZS5hZnRlckxvYz10WzNdKSx0aGlzLnRyeUVudHJpZXMucHVzaChlKX1mdW5jdGlvbiBFKHQpe3ZhciBlPXQuY29tcGxldGlvbnx8e307ZS50eXBlPSJub3JtYWwiLGRlbGV0ZSBlLmFyZyx0LmNvbXBsZXRpb249ZX1mdW5jdGlvbiBDKHQpe3RoaXMudHJ5RW50cmllcz1be3RyeUxvYzoicm9vdCJ9XSx0LmZvckVhY2goUyx0aGlzKSx0aGlzLnJlc2V0KCEwKX1mdW5jdGlvbiBEKHQpe2lmKHQpe3ZhciBlPXRbb107aWYoZSlyZXR1cm4gZS5jYWxsKHQpO2lmKCJmdW5jdGlvbiI9PXR5cGVvZiB0Lm5leHQpcmV0dXJuIHQ7aWYoIWlzTmFOKHQubGVuZ3RoKSl7dmFyIG49LTEsYT1mdW5jdGlvbiBlKCl7Zm9yKDsrK248dC5sZW5ndGg7KWlmKGkuY2FsbCh0LG4pKXJldHVybiBlLnZhbHVlPXRbbl0sZS5kb25lPSExLGU7cmV0dXJuIGUudmFsdWU9cixlLmRvbmU9ITAsZX07cmV0dXJuIGEubmV4dD1hfX1yZXR1cm57bmV4dDpPfX1mdW5jdGlvbiBPKCl7cmV0dXJue3ZhbHVlOnIsZG9uZTohMH19cmV0dXJuIHkucHJvdG90eXBlPXguY29uc3RydWN0b3I9bSxtLmNvbnN0cnVjdG9yPXkseS5kaXNwbGF5TmFtZT1jKG0saCwiR2VuZXJhdG9yRnVuY3Rpb24iKSxlLmlzR2VuZXJhdG9yRnVuY3Rpb249ZnVuY3Rpb24odCl7dmFyIGU9ImZ1bmN0aW9uIj09dHlwZW9mIHQmJnQuY29uc3RydWN0b3I7cmV0dXJuISFlJiYoZT09PXl8fCJHZW5lcmF0b3JGdW5jdGlvbiI9PT0oZS5kaXNwbGF5TmFtZXx8ZS5uYW1lKSl9LGUubWFyaz1mdW5jdGlvbih0KXtyZXR1cm4gT2JqZWN0LnNldFByb3RvdHlwZU9mP09iamVjdC5zZXRQcm90b3R5cGVPZih0LG0pOih0Ll9fcHJvdG9fXz1tLGModCxoLCJHZW5lcmF0b3JGdW5jdGlvbiIpKSx0LnByb3RvdHlwZT1PYmplY3QuY3JlYXRlKHgpLHR9LGUuYXdyYXA9ZnVuY3Rpb24odCl7cmV0dXJue19fYXdhaXQ6dH19LHooQi5wcm90b3R5cGUpLEIucHJvdG90eXBlW3NdPWZ1bmN0aW9uKCl7cmV0dXJuIHRoaXN9LGUuQXN5bmNJdGVyYXRvcj1CLGUuYXN5bmM9ZnVuY3Rpb24odCxyLG4saSxhKXt2b2lkIDA9PT1hJiYoYT1Qcm9taXNlKTt2YXIgbz1uZXcgQihsKHQscixuLGkpLGEpO3JldHVybiBlLmlzR2VuZXJhdG9yRnVuY3Rpb24ocik/bzpvLm5leHQoKS50aGVuKChmdW5jdGlvbih0KXtyZXR1cm4gdC5kb25lP3QudmFsdWU6by5uZXh0KCl9KSl9LHooeCksYyh4LGgsIkdlbmVyYXRvciIpLHhbb109ZnVuY3Rpb24oKXtyZXR1cm4gdGhpc30seC50b1N0cmluZz1mdW5jdGlvbigpe3JldHVybiJbb2JqZWN0IEdlbmVyYXRvcl0ifSxlLmtleXM9ZnVuY3Rpb24odCl7dmFyIGU9W107Zm9yKHZhciByIGluIHQpZS5wdXNoKHIpO3JldHVybiBlLnJldmVyc2UoKSxmdW5jdGlvbiByKCl7Zm9yKDtlLmxlbmd0aDspe3ZhciBuPWUucG9wKCk7aWYobiBpbiB0KXJldHVybiByLnZhbHVlPW4sci5kb25lPSExLHJ9cmV0dXJuIHIuZG9uZT0hMCxyfX0sZS52YWx1ZXM9RCxDLnByb3RvdHlwZT17Y29uc3RydWN0b3I6QyxyZXNldDpmdW5jdGlvbih0KXtpZih0aGlzLnByZXY9MCx0aGlzLm5leHQ9MCx0aGlzLnNlbnQ9dGhpcy5fc2VudD1yLHRoaXMuZG9uZT0hMSx0aGlzLmRlbGVnYXRlPW51bGwsdGhpcy5tZXRob2Q9Im5leHQiLHRoaXMuYXJnPXIsdGhpcy50cnlFbnRyaWVzLmZvckVhY2goRSksIXQpZm9yKHZhciBlIGluIHRoaXMpInQiPT09ZS5jaGFyQXQoMCkmJmkuY2FsbCh0aGlzLGUpJiYhaXNOYU4oK2Uuc2xpY2UoMSkpJiYodGhpc1tlXT1yKX0sc3RvcDpmdW5jdGlvbigpe3RoaXMuZG9uZT0hMDt2YXIgdD10aGlzLnRyeUVudHJpZXNbMF0uY29tcGxldGlvbjtpZigidGhyb3ciPT09dC50eXBlKXRocm93IHQuYXJnO3JldHVybiB0aGlzLnJ2YWx9LGRpc3BhdGNoRXhjZXB0aW9uOmZ1bmN0aW9uKHQpe2lmKHRoaXMuZG9uZSl0aHJvdyB0O3ZhciBlPXRoaXM7ZnVuY3Rpb24gbihuLGkpe3JldHVybiBzLnR5cGU9InRocm93IixzLmFyZz10LGUubmV4dD1uLGkmJihlLm1ldGhvZD0ibmV4dCIsZS5hcmc9ciksISFpfWZvcih2YXIgYT10aGlzLnRyeUVudHJpZXMubGVuZ3RoLTE7YT49MDstLWEpe3ZhciBvPXRoaXMudHJ5RW50cmllc1thXSxzPW8uY29tcGxldGlvbjtpZigicm9vdCI9PT1vLnRyeUxvYylyZXR1cm4gbigiZW5kIik7aWYoby50cnlMb2M8PXRoaXMucHJldil7dmFyIGg9aS5jYWxsKG8sImNhdGNoTG9jIiksYz1pLmNhbGwobywiZmluYWxseUxvYyIpO2lmKGgmJmMpe2lmKHRoaXMucHJldjxvLmNhdGNoTG9jKXJldHVybiBuKG8uY2F0Y2hMb2MsITApO2lmKHRoaXMucHJldjxvLmZpbmFsbHlMb2MpcmV0dXJuIG4oby5maW5hbGx5TG9jKX1lbHNlIGlmKGgpe2lmKHRoaXMucHJldjxvLmNhdGNoTG9jKXJldHVybiBuKG8uY2F0Y2hMb2MsITApfWVsc2V7aWYoIWMpdGhyb3cgbmV3IEVycm9yKCJ0cnkgc3RhdGVtZW50IHdpdGhvdXQgY2F0Y2ggb3IgZmluYWxseSIpO2lmKHRoaXMucHJldjxvLmZpbmFsbHlMb2MpcmV0dXJuIG4oby5maW5hbGx5TG9jKX19fX0sYWJydXB0OmZ1bmN0aW9uKHQsZSl7Zm9yKHZhciByPXRoaXMudHJ5RW50cmllcy5sZW5ndGgtMTtyPj0wOy0tcil7dmFyIG49dGhpcy50cnlFbnRyaWVzW3JdO2lmKG4udHJ5TG9jPD10aGlzLnByZXYmJmkuY2FsbChuLCJmaW5hbGx5TG9jIikmJnRoaXMucHJldjxuLmZpbmFsbHlMb2Mpe3ZhciBhPW47YnJlYWt9fWEmJigiYnJlYWsiPT09dHx8ImNvbnRpbnVlIj09PXQpJiZhLnRyeUxvYzw9ZSYmZTw9YS5maW5hbGx5TG9jJiYoYT1udWxsKTt2YXIgbz1hP2EuY29tcGxldGlvbjp7fTtyZXR1cm4gby50eXBlPXQsby5hcmc9ZSxhPyh0aGlzLm1ldGhvZD0ibmV4dCIsdGhpcy5uZXh0PWEuZmluYWxseUxvYyxnKTp0aGlzLmNvbXBsZXRlKG8pfSxjb21wbGV0ZTpmdW5jdGlvbih0LGUpe2lmKCJ0aHJvdyI9PT10LnR5cGUpdGhyb3cgdC5hcmc7cmV0dXJuImJyZWFrIj09PXQudHlwZXx8ImNvbnRpbnVlIj09PXQudHlwZT90aGlzLm5leHQ9dC5hcmc6InJldHVybiI9PT10LnR5cGU/KHRoaXMucnZhbD10aGlzLmFyZz10LmFyZyx0aGlzLm1ldGhvZD0icmV0dXJuIix0aGlzLm5leHQ9ImVuZCIpOiJub3JtYWwiPT09dC50eXBlJiZlJiYodGhpcy5uZXh0PWUpLGd9LGZpbmlzaDpmdW5jdGlvbih0KXtmb3IodmFyIGU9dGhpcy50cnlFbnRyaWVzLmxlbmd0aC0xO2U+PTA7LS1lKXt2YXIgcj10aGlzLnRyeUVudHJpZXNbZV07aWYoci5maW5hbGx5TG9jPT09dClyZXR1cm4gdGhpcy5jb21wbGV0ZShyLmNvbXBsZXRpb24sci5hZnRlckxvYyksRShyKSxnfX0sY2F0Y2g6ZnVuY3Rpb24odCl7Zm9yKHZhciBlPXRoaXMudHJ5RW50cmllcy5sZW5ndGgtMTtlPj0wOy0tZSl7dmFyIHI9dGhpcy50cnlFbnRyaWVzW2VdO2lmKHIudHJ5TG9jPT09dCl7dmFyIG49ci5jb21wbGV0aW9uO2lmKCJ0aHJvdyI9PT1uLnR5cGUpe3ZhciBpPW4uYXJnO0Uocil9cmV0dXJuIGl9fXRocm93IG5ldyBFcnJvcigiaWxsZWdhbCBjYXRjaCBhdHRlbXB0Iil9LGRlbGVnYXRlWWllbGQ6ZnVuY3Rpb24odCxlLG4pe3JldHVybiB0aGlzLmRlbGVnYXRlPXtpdGVyYXRvcjpEKHQpLHJlc3VsdE5hbWU6ZSxuZXh0TG9jOm59LCJuZXh0Ij09PXRoaXMubWV0aG9kJiYodGhpcy5hcmc9ciksZ319LGV9KGUuZXhwb3J0cyk7dHJ5e2dsb2JhbFRoaXMucmVnZW5lcmF0b3JSdW50aW1lPXJ9Y2F0Y2godCl7RnVuY3Rpb24oInIiLCJyZWdlbmVyYXRvclJ1bnRpbWUgPSByIikocil9fSkpO3ZhciBjPW8oKGZ1bmN0aW9uKGUscil7ZS5leHBvcnRzPWZ1bmN0aW9uKCl7ZnVuY3Rpb24gdChlLHIsbil7ZnVuY3Rpb24gaShvLHMpe2lmKCFyW29dKXtpZighZVtvXSl7aWYoIXMmJmgpcmV0dXJuIGgoKTtpZihhKXJldHVybiBhKG8sITApO3ZhciBjPW5ldyBFcnJvcigiQ2Fubm90IGZpbmQgbW9kdWxlICciK28rIiciKTt0aHJvdyBjLmNvZGU9Ik1PRFVMRV9OT1RfRk9VTkQiLGN9dmFyIGw9cltvXT17ZXhwb3J0czp7fX07ZVtvXVswXS5jYWxsKGwuZXhwb3J0cywoZnVuY3Rpb24odCl7cmV0dXJuIGkoZVtvXVsxXVt0XXx8dCl9KSxsLGwuZXhwb3J0cyx0LGUscixuKX1yZXR1cm4gcltvXS5leHBvcnRzfWZvcih2YXIgYT1oLG89MDtvPG4ubGVuZ3RoO28rKylpKG5bb10pO3JldHVybiBpfXJldHVybiB0fSgpKHsxOltmdW5jdGlvbihlLHIsbil7dmFyIGk9InVuZGVmaW5lZCIhPXR5cGVvZiBVaW50OEFycmF5JiYidW5kZWZpbmVkIiE9dHlwZW9mIFVpbnQxNkFycmF5JiYidW5kZWZpbmVkIiE9dHlwZW9mIEludDMyQXJyYXk7ZnVuY3Rpb24gYSh0LGUpe3JldHVybiBPYmplY3QucHJvdG90eXBlLmhhc093blByb3BlcnR5LmNhbGwodCxlKX1uLmFzc2lnbj1mdW5jdGlvbihlKXtmb3IodmFyIHI9QXJyYXkucHJvdG90eXBlLnNsaWNlLmNhbGwoYXJndW1lbnRzLDEpO3IubGVuZ3RoOyl7dmFyIG49ci5zaGlmdCgpO2lmKG4pe2lmKCJvYmplY3QiIT09dChuKSl0aHJvdyBuZXcgVHlwZUVycm9yKG4rIm11c3QgYmUgbm9uLW9iamVjdCIpO2Zvcih2YXIgaSBpbiBuKWEobixpKSYmKGVbaV09bltpXSl9fXJldHVybiBlfSxuLnNocmlua0J1Zj1mdW5jdGlvbih0LGUpe3JldHVybiB0Lmxlbmd0aD09PWU/dDp0LnN1YmFycmF5P3Quc3ViYXJyYXkoMCxlKToodC5sZW5ndGg9ZSx0KX07dmFyIG89e2FycmF5U2V0OmZ1bmN0aW9uKHQsZSxyLG4saSl7aWYoZS5zdWJhcnJheSYmdC5zdWJhcnJheSl0LnNldChlLnN1YmFycmF5KHIscituKSxpKTtlbHNlIGZvcih2YXIgYT0wO2E8bjthKyspdFtpK2FdPWVbcithXX0sZmxhdHRlbkNodW5rczpmdW5jdGlvbih0KXt2YXIgZSxyLG4saSxhLG87Zm9yKG49MCxlPTAscj10Lmxlbmd0aDtlPHI7ZSsrKW4rPXRbZV0ubGVuZ3RoO2ZvcihvPW5ldyBVaW50OEFycmF5KG4pLGk9MCxlPTAscj10Lmxlbmd0aDtlPHI7ZSsrKWE9dFtlXSxvLnNldChhLGkpLGkrPWEubGVuZ3RoO3JldHVybiBvfX0scz17YXJyYXlTZXQ6ZnVuY3Rpb24odCxlLHIsbixpKXtmb3IodmFyIGE9MDthPG47YSsrKXRbaSthXT1lW3IrYV19LGZsYXR0ZW5DaHVua3M6ZnVuY3Rpb24odCl7cmV0dXJuW10uY29uY2F0LmFwcGx5KFtdLHQpfX07bi5zZXRUeXBlZD1mdW5jdGlvbih0KXt0PyhuLkJ1Zjg9VWludDhBcnJheSxuLkJ1ZjE2PVVpbnQxNkFycmF5LG4uQnVmMzI9SW50MzJBcnJheSxuLmFzc2lnbihuLG8pKToobi5CdWY4PUFycmF5LG4uQnVmMTY9QXJyYXksbi5CdWYzMj1BcnJheSxuLmFzc2lnbihuLHMpKX0sbi5zZXRUeXBlZChpKX0se31dLDI6W2Z1bmN0aW9uKHQsZSxyKXt2YXIgbj10KCIuL2NvbW1vbiIpLGk9ITAsYT0hMDt0cnl7U3RyaW5nLmZyb21DaGFyQ29kZS5hcHBseShudWxsLFswXSl9Y2F0Y2godCl7aT0hMX10cnl7U3RyaW5nLmZyb21DaGFyQ29kZS5hcHBseShudWxsLG5ldyBVaW50OEFycmF5KDEpKX1jYXRjaCh0KXthPSExfWZvcih2YXIgbz1uZXcgbi5CdWY4KDI1Nikscz0wO3M8MjU2O3MrKylvW3NdPXM+PTI1Mj82OnM+PTI0OD81OnM+PTI0MD80OnM+PTIyND8zOnM+PTE5Mj8yOjE7ZnVuY3Rpb24gaCh0LGUpe2lmKGU8NjU1MzQmJih0LnN1YmFycmF5JiZhfHwhdC5zdWJhcnJheSYmaSkpcmV0dXJuIFN0cmluZy5mcm9tQ2hhckNvZGUuYXBwbHkobnVsbCxuLnNocmlua0J1Zih0LGUpKTtmb3IodmFyIHI9IiIsbz0wO288ZTtvKyspcis9U3RyaW5nLmZyb21DaGFyQ29kZSh0W29dKTtyZXR1cm4gcn1vWzI1NF09b1syNTRdPTEsci5zdHJpbmcyYnVmPWZ1bmN0aW9uKHQpe3ZhciBlLHIsaSxhLG8scz10Lmxlbmd0aCxoPTA7Zm9yKGE9MDthPHM7YSsrKTU1Mjk2PT0oNjQ1MTImKHI9dC5jaGFyQ29kZUF0KGEpKSkmJmErMTxzJiY1NjMyMD09KDY0NTEyJihpPXQuY2hhckNvZGVBdChhKzEpKSkmJihyPTY1NTM2KyhyLTU1Mjk2PDwxMCkrKGktNTYzMjApLGErKyksaCs9cjwxMjg/MTpyPDIwNDg/MjpyPDY1NTM2PzM6NDtmb3IoZT1uZXcgbi5CdWY4KGgpLG89MCxhPTA7bzxoO2ErKyk1NTI5Nj09KDY0NTEyJihyPXQuY2hhckNvZGVBdChhKSkpJiZhKzE8cyYmNTYzMjA9PSg2NDUxMiYoaT10LmNoYXJDb2RlQXQoYSsxKSkpJiYocj02NTUzNisoci01NTI5Njw8MTApKyhpLTU2MzIwKSxhKyspLHI8MTI4P2VbbysrXT1yOnI8MjA0OD8oZVtvKytdPTE5MnxyPj4+NixlW28rK109MTI4fDYzJnIpOnI8NjU1MzY/KGVbbysrXT0yMjR8cj4+PjEyLGVbbysrXT0xMjh8cj4+PjYmNjMsZVtvKytdPTEyOHw2MyZyKTooZVtvKytdPTI0MHxyPj4+MTgsZVtvKytdPTEyOHxyPj4+MTImNjMsZVtvKytdPTEyOHxyPj4+NiY2MyxlW28rK109MTI4fDYzJnIpO3JldHVybiBlfSxyLmJ1ZjJiaW5zdHJpbmc9ZnVuY3Rpb24odCl7cmV0dXJuIGgodCx0Lmxlbmd0aCl9LHIuYmluc3RyaW5nMmJ1Zj1mdW5jdGlvbih0KXtmb3IodmFyIGU9bmV3IG4uQnVmOCh0Lmxlbmd0aCkscj0wLGk9ZS5sZW5ndGg7cjxpO3IrKyllW3JdPXQuY2hhckNvZGVBdChyKTtyZXR1cm4gZX0sci5idWYyc3RyaW5nPWZ1bmN0aW9uKHQsZSl7dmFyIHIsbixpLGEscz1lfHx0Lmxlbmd0aCxjPW5ldyBBcnJheSgyKnMpO2ZvcihuPTAscj0wO3I8czspaWYoKGk9dFtyKytdKTwxMjgpY1tuKytdPWk7ZWxzZSBpZigoYT1vW2ldKT40KWNbbisrXT02NTUzMyxyKz1hLTE7ZWxzZXtmb3IoaSY9Mj09PWE/MzE6Mz09PWE/MTU6NzthPjEmJnI8czspaT1pPDw2fDYzJnRbcisrXSxhLS07YT4xP2NbbisrXT02NTUzMzppPDY1NTM2P2NbbisrXT1pOihpLT02NTUzNixjW24rK109NTUyOTZ8aT4+MTAmMTAyMyxjW24rK109NTYzMjB8MTAyMyZpKX1yZXR1cm4gaChjLG4pfSxyLnV0Zjhib3JkZXI9ZnVuY3Rpb24odCxlKXt2YXIgcjtmb3IoKGU9ZXx8dC5sZW5ndGgpPnQubGVuZ3RoJiYoZT10Lmxlbmd0aCkscj1lLTE7cj49MCYmMTI4PT0oMTkyJnRbcl0pOylyLS07cmV0dXJuIHI8MHx8MD09PXI/ZTpyK29bdFtyXV0+ZT9yOmV9fSx7Ii4vY29tbW9uIjoxfV0sMzpbZnVuY3Rpb24odCxlLHIpe2Z1bmN0aW9uIG4odCxlLHIsbil7Zm9yKHZhciBpPTY1NTM1JnR8MCxhPXQ+Pj4xNiY2NTUzNXwwLG89MDswIT09cjspe3ItPW89cj4yZTM/MmUzOnI7ZG97YT1hKyhpPWkrZVtuKytdfDApfDB9d2hpbGUoLS1vKTtpJT02NTUyMSxhJT02NTUyMX1yZXR1cm4gaXxhPDwxNnwwfWUuZXhwb3J0cz1ufSx7fV0sNDpbZnVuY3Rpb24odCxlLHIpe2Z1bmN0aW9uIG4oKXtmb3IodmFyIHQsZT1bXSxyPTA7cjwyNTY7cisrKXt0PXI7Zm9yKHZhciBuPTA7bjw4O24rKyl0PTEmdD8zOTg4MjkyMzg0XnQ+Pj4xOnQ+Pj4xO2Vbcl09dH1yZXR1cm4gZX12YXIgaT1uKCk7ZnVuY3Rpb24gYSh0LGUscixuKXt2YXIgYT1pLG89bityO3RePS0xO2Zvcih2YXIgcz1uO3M8bztzKyspdD10Pj4+OF5hWzI1NSYodF5lW3NdKV07cmV0dXJuLTFedH1lLmV4cG9ydHM9YX0se31dLDU6W2Z1bmN0aW9uKHQsZSxyKXt2YXIgbixpPXQoIi4uL3V0aWxzL2NvbW1vbiIpLGE9dCgiLi90cmVlcyIpLG89dCgiLi9hZGxlcjMyIikscz10KCIuL2NyYzMyIiksaD10KCIuL21lc3NhZ2VzIiksYz0wLGw9MSx1PTMsZj00LGQ9NSxfPTAscD0xLGc9LTIsdj0tMyx5PS01LG09LTEsdz0xLGI9MixrPTMseD00LHo9MCxCPTIsQT04LFM9OSxFPTE1LEM9OCxEPTI4NixPPTMwLEg9MTksaj0yKkQrMSxMPTE1LE09MyxVPTI1OCxSPVUrTSsxLEk9MzIsRj00MixQPTY5LFQ9NzMsTj05MSxLPTEwMyxYPTExMyxXPTY2NixxPTEsRz0yLFY9MyxZPTQsJD0zO2Z1bmN0aW9uIEoodCxlKXtyZXR1cm4gdC5tc2c9aFtlXSxlfWZ1bmN0aW9uIFEodCl7cmV0dXJuKHQ8PDEpLSh0PjQ/OTowKX1mdW5jdGlvbiBaKHQpe2Zvcih2YXIgZT10Lmxlbmd0aDstLWU+PTA7KXRbZV09MH1mdW5jdGlvbiB0dCh0KXt2YXIgZT10LnN0YXRlLHI9ZS5wZW5kaW5nO3I+dC5hdmFpbF9vdXQmJihyPXQuYXZhaWxfb3V0KSwwIT09ciYmKGkuYXJyYXlTZXQodC5vdXRwdXQsZS5wZW5kaW5nX2J1ZixlLnBlbmRpbmdfb3V0LHIsdC5uZXh0X291dCksdC5uZXh0X291dCs9cixlLnBlbmRpbmdfb3V0Kz1yLHQudG90YWxfb3V0Kz1yLHQuYXZhaWxfb3V0LT1yLGUucGVuZGluZy09ciwwPT09ZS5wZW5kaW5nJiYoZS5wZW5kaW5nX291dD0wKSl9ZnVuY3Rpb24gZXQodCxlKXthLl90cl9mbHVzaF9ibG9jayh0LHQuYmxvY2tfc3RhcnQ+PTA/dC5ibG9ja19zdGFydDotMSx0LnN0cnN0YXJ0LXQuYmxvY2tfc3RhcnQsZSksdC5ibG9ja19zdGFydD10LnN0cnN0YXJ0LHR0KHQuc3RybSl9ZnVuY3Rpb24gcnQodCxlKXt0LnBlbmRpbmdfYnVmW3QucGVuZGluZysrXT1lfWZ1bmN0aW9uIG50KHQsZSl7dC5wZW5kaW5nX2J1Zlt0LnBlbmRpbmcrK109ZT4+PjgmMjU1LHQucGVuZGluZ19idWZbdC5wZW5kaW5nKytdPTI1NSZlfWZ1bmN0aW9uIGl0KHQsZSxyLG4pe3ZhciBhPXQuYXZhaWxfaW47cmV0dXJuIGE+biYmKGE9biksMD09PWE/MDoodC5hdmFpbF9pbi09YSxpLmFycmF5U2V0KGUsdC5pbnB1dCx0Lm5leHRfaW4sYSxyKSwxPT09dC5zdGF0ZS53cmFwP3QuYWRsZXI9byh0LmFkbGVyLGUsYSxyKToyPT09dC5zdGF0ZS53cmFwJiYodC5hZGxlcj1zKHQuYWRsZXIsZSxhLHIpKSx0Lm5leHRfaW4rPWEsdC50b3RhbF9pbis9YSxhKX1mdW5jdGlvbiBhdCh0LGUpe3ZhciByLG4saT10Lm1heF9jaGFpbl9sZW5ndGgsYT10LnN0cnN0YXJ0LG89dC5wcmV2X2xlbmd0aCxzPXQubmljZV9tYXRjaCxoPXQuc3Ryc3RhcnQ+dC53X3NpemUtUj90LnN0cnN0YXJ0LSh0Lndfc2l6ZS1SKTowLGM9dC53aW5kb3csbD10LndfbWFzayx1PXQucHJldixmPXQuc3Ryc3RhcnQrVSxkPWNbYStvLTFdLF89Y1thK29dO3QucHJldl9sZW5ndGg+PXQuZ29vZF9tYXRjaCYmKGk+Pj0yKSxzPnQubG9va2FoZWFkJiYocz10Lmxvb2thaGVhZCk7ZG97aWYoY1socj1lKStvXT09PV8mJmNbcitvLTFdPT09ZCYmY1tyXT09PWNbYV0mJmNbKytyXT09PWNbYSsxXSl7YSs9MixyKys7ZG97fXdoaWxlKGNbKythXT09PWNbKytyXSYmY1srK2FdPT09Y1srK3JdJiZjWysrYV09PT1jWysrcl0mJmNbKythXT09PWNbKytyXSYmY1srK2FdPT09Y1srK3JdJiZjWysrYV09PT1jWysrcl0mJmNbKythXT09PWNbKytyXSYmY1srK2FdPT09Y1srK3JdJiZhPGYpO2lmKG49VS0oZi1hKSxhPWYtVSxuPm8pe2lmKHQubWF0Y2hfc3RhcnQ9ZSxvPW4sbj49cylicmVhaztkPWNbYStvLTFdLF89Y1thK29dfX19d2hpbGUoKGU9dVtlJmxdKT5oJiYwIT0tLWkpO3JldHVybiBvPD10Lmxvb2thaGVhZD9vOnQubG9va2FoZWFkfWZ1bmN0aW9uIG90KHQpe3ZhciBlLHIsbixhLG8scz10Lndfc2l6ZTtkb3tpZihhPXQud2luZG93X3NpemUtdC5sb29rYWhlYWQtdC5zdHJzdGFydCx0LnN0cnN0YXJ0Pj1zKyhzLVIpKXtpLmFycmF5U2V0KHQud2luZG93LHQud2luZG93LHMscywwKSx0Lm1hdGNoX3N0YXJ0LT1zLHQuc3Ryc3RhcnQtPXMsdC5ibG9ja19zdGFydC09cyxlPXI9dC5oYXNoX3NpemU7ZG97bj10LmhlYWRbLS1lXSx0LmhlYWRbZV09bj49cz9uLXM6MH13aGlsZSgtLXIpO2U9cj1zO2Rve249dC5wcmV2Wy0tZV0sdC5wcmV2W2VdPW4+PXM/bi1zOjB9d2hpbGUoLS1yKTthKz1zfWlmKDA9PT10LnN0cm0uYXZhaWxfaW4pYnJlYWs7aWYocj1pdCh0LnN0cm0sdC53aW5kb3csdC5zdHJzdGFydCt0Lmxvb2thaGVhZCxhKSx0Lmxvb2thaGVhZCs9cix0Lmxvb2thaGVhZCt0Lmluc2VydD49TSlmb3Iobz10LnN0cnN0YXJ0LXQuaW5zZXJ0LHQuaW5zX2g9dC53aW5kb3dbb10sdC5pbnNfaD0odC5pbnNfaDw8dC5oYXNoX3NoaWZ0XnQud2luZG93W28rMV0pJnQuaGFzaF9tYXNrO3QuaW5zZXJ0JiYodC5pbnNfaD0odC5pbnNfaDw8dC5oYXNoX3NoaWZ0XnQud2luZG93W28rTS0xXSkmdC5oYXNoX21hc2ssdC5wcmV2W28mdC53X21hc2tdPXQuaGVhZFt0Lmluc19oXSx0LmhlYWRbdC5pbnNfaF09byxvKyssdC5pbnNlcnQtLSwhKHQubG9va2FoZWFkK3QuaW5zZXJ0PE0pKTspO313aGlsZSh0Lmxvb2thaGVhZDxSJiYwIT09dC5zdHJtLmF2YWlsX2luKX1mdW5jdGlvbiBzdCh0LGUpe3ZhciByPTY1NTM1O2ZvcihyPnQucGVuZGluZ19idWZfc2l6ZS01JiYocj10LnBlbmRpbmdfYnVmX3NpemUtNSk7Oyl7aWYodC5sb29rYWhlYWQ8PTEpe2lmKG90KHQpLDA9PT10Lmxvb2thaGVhZCYmZT09PWMpcmV0dXJuIHE7aWYoMD09PXQubG9va2FoZWFkKWJyZWFrfXQuc3Ryc3RhcnQrPXQubG9va2FoZWFkLHQubG9va2FoZWFkPTA7dmFyIG49dC5ibG9ja19zdGFydCtyO2lmKCgwPT09dC5zdHJzdGFydHx8dC5zdHJzdGFydD49bikmJih0Lmxvb2thaGVhZD10LnN0cnN0YXJ0LW4sdC5zdHJzdGFydD1uLGV0KHQsITEpLDA9PT10LnN0cm0uYXZhaWxfb3V0KSlyZXR1cm4gcTtpZih0LnN0cnN0YXJ0LXQuYmxvY2tfc3RhcnQ+PXQud19zaXplLVImJihldCh0LCExKSwwPT09dC5zdHJtLmF2YWlsX291dCkpcmV0dXJuIHF9cmV0dXJuIHQuaW5zZXJ0PTAsZT09PWY/KGV0KHQsITApLDA9PT10LnN0cm0uYXZhaWxfb3V0P1Y6WSk6KHQuc3Ryc3RhcnQ+dC5ibG9ja19zdGFydCYmKGV0KHQsITEpLHQuc3RybS5hdmFpbF9vdXQpLHEpfWZ1bmN0aW9uIGh0KHQsZSl7Zm9yKHZhciByLG47Oyl7aWYodC5sb29rYWhlYWQ8Uil7aWYob3QodCksdC5sb29rYWhlYWQ8UiYmZT09PWMpcmV0dXJuIHE7aWYoMD09PXQubG9va2FoZWFkKWJyZWFrfWlmKHI9MCx0Lmxvb2thaGVhZD49TSYmKHQuaW5zX2g9KHQuaW5zX2g8PHQuaGFzaF9zaGlmdF50LndpbmRvd1t0LnN0cnN0YXJ0K00tMV0pJnQuaGFzaF9tYXNrLHI9dC5wcmV2W3Quc3Ryc3RhcnQmdC53X21hc2tdPXQuaGVhZFt0Lmluc19oXSx0LmhlYWRbdC5pbnNfaF09dC5zdHJzdGFydCksMCE9PXImJnQuc3Ryc3RhcnQtcjw9dC53X3NpemUtUiYmKHQubWF0Y2hfbGVuZ3RoPWF0KHQscikpLHQubWF0Y2hfbGVuZ3RoPj1NKWlmKG49YS5fdHJfdGFsbHkodCx0LnN0cnN0YXJ0LXQubWF0Y2hfc3RhcnQsdC5tYXRjaF9sZW5ndGgtTSksdC5sb29rYWhlYWQtPXQubWF0Y2hfbGVuZ3RoLHQubWF0Y2hfbGVuZ3RoPD10Lm1heF9sYXp5X21hdGNoJiZ0Lmxvb2thaGVhZD49TSl7dC5tYXRjaF9sZW5ndGgtLTtkb3t0LnN0cnN0YXJ0KyssdC5pbnNfaD0odC5pbnNfaDw8dC5oYXNoX3NoaWZ0XnQud2luZG93W3Quc3Ryc3RhcnQrTS0xXSkmdC5oYXNoX21hc2sscj10LnByZXZbdC5zdHJzdGFydCZ0LndfbWFza109dC5oZWFkW3QuaW5zX2hdLHQuaGVhZFt0Lmluc19oXT10LnN0cnN0YXJ0fXdoaWxlKDAhPS0tdC5tYXRjaF9sZW5ndGgpO3Quc3Ryc3RhcnQrK31lbHNlIHQuc3Ryc3RhcnQrPXQubWF0Y2hfbGVuZ3RoLHQubWF0Y2hfbGVuZ3RoPTAsdC5pbnNfaD10LndpbmRvd1t0LnN0cnN0YXJ0XSx0Lmluc19oPSh0Lmluc19oPDx0Lmhhc2hfc2hpZnRedC53aW5kb3dbdC5zdHJzdGFydCsxXSkmdC5oYXNoX21hc2s7ZWxzZSBuPWEuX3RyX3RhbGx5KHQsMCx0LndpbmRvd1t0LnN0cnN0YXJ0XSksdC5sb29rYWhlYWQtLSx0LnN0cnN0YXJ0Kys7aWYobiYmKGV0KHQsITEpLDA9PT10LnN0cm0uYXZhaWxfb3V0KSlyZXR1cm4gcX1yZXR1cm4gdC5pbnNlcnQ9dC5zdHJzdGFydDxNLTE/dC5zdHJzdGFydDpNLTEsZT09PWY/KGV0KHQsITApLDA9PT10LnN0cm0uYXZhaWxfb3V0P1Y6WSk6dC5sYXN0X2xpdCYmKGV0KHQsITEpLDA9PT10LnN0cm0uYXZhaWxfb3V0KT9xOkd9ZnVuY3Rpb24gY3QodCxlKXtmb3IodmFyIHIsbixpOzspe2lmKHQubG9va2FoZWFkPFIpe2lmKG90KHQpLHQubG9va2FoZWFkPFImJmU9PT1jKXJldHVybiBxO2lmKDA9PT10Lmxvb2thaGVhZClicmVha31pZihyPTAsdC5sb29rYWhlYWQ+PU0mJih0Lmluc19oPSh0Lmluc19oPDx0Lmhhc2hfc2hpZnRedC53aW5kb3dbdC5zdHJzdGFydCtNLTFdKSZ0Lmhhc2hfbWFzayxyPXQucHJldlt0LnN0cnN0YXJ0JnQud19tYXNrXT10LmhlYWRbdC5pbnNfaF0sdC5oZWFkW3QuaW5zX2hdPXQuc3Ryc3RhcnQpLHQucHJldl9sZW5ndGg9dC5tYXRjaF9sZW5ndGgsdC5wcmV2X21hdGNoPXQubWF0Y2hfc3RhcnQsdC5tYXRjaF9sZW5ndGg9TS0xLDAhPT1yJiZ0LnByZXZfbGVuZ3RoPHQubWF4X2xhenlfbWF0Y2gmJnQuc3Ryc3RhcnQtcjw9dC53X3NpemUtUiYmKHQubWF0Y2hfbGVuZ3RoPWF0KHQsciksdC5tYXRjaF9sZW5ndGg8PTUmJih0LnN0cmF0ZWd5PT09d3x8dC5tYXRjaF9sZW5ndGg9PT1NJiZ0LnN0cnN0YXJ0LXQubWF0Y2hfc3RhcnQ+NDA5NikmJih0Lm1hdGNoX2xlbmd0aD1NLTEpKSx0LnByZXZfbGVuZ3RoPj1NJiZ0Lm1hdGNoX2xlbmd0aDw9dC5wcmV2X2xlbmd0aCl7aT10LnN0cnN0YXJ0K3QubG9va2FoZWFkLU0sbj1hLl90cl90YWxseSh0LHQuc3Ryc3RhcnQtMS10LnByZXZfbWF0Y2gsdC5wcmV2X2xlbmd0aC1NKSx0Lmxvb2thaGVhZC09dC5wcmV2X2xlbmd0aC0xLHQucHJldl9sZW5ndGgtPTI7ZG97Kyt0LnN0cnN0YXJ0PD1pJiYodC5pbnNfaD0odC5pbnNfaDw8dC5oYXNoX3NoaWZ0XnQud2luZG93W3Quc3Ryc3RhcnQrTS0xXSkmdC5oYXNoX21hc2sscj10LnByZXZbdC5zdHJzdGFydCZ0LndfbWFza109dC5oZWFkW3QuaW5zX2hdLHQuaGVhZFt0Lmluc19oXT10LnN0cnN0YXJ0KX13aGlsZSgwIT0tLXQucHJldl9sZW5ndGgpO2lmKHQubWF0Y2hfYXZhaWxhYmxlPTAsdC5tYXRjaF9sZW5ndGg9TS0xLHQuc3Ryc3RhcnQrKyxuJiYoZXQodCwhMSksMD09PXQuc3RybS5hdmFpbF9vdXQpKXJldHVybiBxfWVsc2UgaWYodC5tYXRjaF9hdmFpbGFibGUpe2lmKChuPWEuX3RyX3RhbGx5KHQsMCx0LndpbmRvd1t0LnN0cnN0YXJ0LTFdKSkmJmV0KHQsITEpLHQuc3Ryc3RhcnQrKyx0Lmxvb2thaGVhZC0tLDA9PT10LnN0cm0uYXZhaWxfb3V0KXJldHVybiBxfWVsc2UgdC5tYXRjaF9hdmFpbGFibGU9MSx0LnN0cnN0YXJ0KyssdC5sb29rYWhlYWQtLX1yZXR1cm4gdC5tYXRjaF9hdmFpbGFibGUmJihuPWEuX3RyX3RhbGx5KHQsMCx0LndpbmRvd1t0LnN0cnN0YXJ0LTFdKSx0Lm1hdGNoX2F2YWlsYWJsZT0wKSx0Lmluc2VydD10LnN0cnN0YXJ0PE0tMT90LnN0cnN0YXJ0Ok0tMSxlPT09Zj8oZXQodCwhMCksMD09PXQuc3RybS5hdmFpbF9vdXQ/VjpZKTp0Lmxhc3RfbGl0JiYoZXQodCwhMSksMD09PXQuc3RybS5hdmFpbF9vdXQpP3E6R31mdW5jdGlvbiBsdCh0LGUpe2Zvcih2YXIgcixuLGksbyxzPXQud2luZG93Ozspe2lmKHQubG9va2FoZWFkPD1VKXtpZihvdCh0KSx0Lmxvb2thaGVhZDw9VSYmZT09PWMpcmV0dXJuIHE7aWYoMD09PXQubG9va2FoZWFkKWJyZWFrfWlmKHQubWF0Y2hfbGVuZ3RoPTAsdC5sb29rYWhlYWQ+PU0mJnQuc3Ryc3RhcnQ+MCYmKG49c1tpPXQuc3Ryc3RhcnQtMV0pPT09c1srK2ldJiZuPT09c1srK2ldJiZuPT09c1srK2ldKXtvPXQuc3Ryc3RhcnQrVTtkb3t9d2hpbGUobj09PXNbKytpXSYmbj09PXNbKytpXSYmbj09PXNbKytpXSYmbj09PXNbKytpXSYmbj09PXNbKytpXSYmbj09PXNbKytpXSYmbj09PXNbKytpXSYmbj09PXNbKytpXSYmaTxvKTt0Lm1hdGNoX2xlbmd0aD1VLShvLWkpLHQubWF0Y2hfbGVuZ3RoPnQubG9va2FoZWFkJiYodC5tYXRjaF9sZW5ndGg9dC5sb29rYWhlYWQpfWlmKHQubWF0Y2hfbGVuZ3RoPj1NPyhyPWEuX3RyX3RhbGx5KHQsMSx0Lm1hdGNoX2xlbmd0aC1NKSx0Lmxvb2thaGVhZC09dC5tYXRjaF9sZW5ndGgsdC5zdHJzdGFydCs9dC5tYXRjaF9sZW5ndGgsdC5tYXRjaF9sZW5ndGg9MCk6KHI9YS5fdHJfdGFsbHkodCwwLHQud2luZG93W3Quc3Ryc3RhcnRdKSx0Lmxvb2thaGVhZC0tLHQuc3Ryc3RhcnQrKyksciYmKGV0KHQsITEpLDA9PT10LnN0cm0uYXZhaWxfb3V0KSlyZXR1cm4gcX1yZXR1cm4gdC5pbnNlcnQ9MCxlPT09Zj8oZXQodCwhMCksMD09PXQuc3RybS5hdmFpbF9vdXQ/VjpZKTp0Lmxhc3RfbGl0JiYoZXQodCwhMSksMD09PXQuc3RybS5hdmFpbF9vdXQpP3E6R31mdW5jdGlvbiB1dCh0LGUpe2Zvcih2YXIgcjs7KXtpZigwPT09dC5sb29rYWhlYWQmJihvdCh0KSwwPT09dC5sb29rYWhlYWQpKXtpZihlPT09YylyZXR1cm4gcTticmVha31pZih0Lm1hdGNoX2xlbmd0aD0wLHI9YS5fdHJfdGFsbHkodCwwLHQud2luZG93W3Quc3Ryc3RhcnRdKSx0Lmxvb2thaGVhZC0tLHQuc3Ryc3RhcnQrKyxyJiYoZXQodCwhMSksMD09PXQuc3RybS5hdmFpbF9vdXQpKXJldHVybiBxfXJldHVybiB0Lmluc2VydD0wLGU9PT1mPyhldCh0LCEwKSwwPT09dC5zdHJtLmF2YWlsX291dD9WOlkpOnQubGFzdF9saXQmJihldCh0LCExKSwwPT09dC5zdHJtLmF2YWlsX291dCk/cTpHfWZ1bmN0aW9uIGZ0KHQsZSxyLG4saSl7dGhpcy5nb29kX2xlbmd0aD10LHRoaXMubWF4X2xhenk9ZSx0aGlzLm5pY2VfbGVuZ3RoPXIsdGhpcy5tYXhfY2hhaW49bix0aGlzLmZ1bmM9aX1mdW5jdGlvbiBkdCh0KXt0LndpbmRvd19zaXplPTIqdC53X3NpemUsWih0LmhlYWQpLHQubWF4X2xhenlfbWF0Y2g9blt0LmxldmVsXS5tYXhfbGF6eSx0Lmdvb2RfbWF0Y2g9blt0LmxldmVsXS5nb29kX2xlbmd0aCx0Lm5pY2VfbWF0Y2g9blt0LmxldmVsXS5uaWNlX2xlbmd0aCx0Lm1heF9jaGFpbl9sZW5ndGg9blt0LmxldmVsXS5tYXhfY2hhaW4sdC5zdHJzdGFydD0wLHQuYmxvY2tfc3RhcnQ9MCx0Lmxvb2thaGVhZD0wLHQuaW5zZXJ0PTAsdC5tYXRjaF9sZW5ndGg9dC5wcmV2X2xlbmd0aD1NLTEsdC5tYXRjaF9hdmFpbGFibGU9MCx0Lmluc19oPTB9ZnVuY3Rpb24gX3QoKXt0aGlzLnN0cm09bnVsbCx0aGlzLnN0YXR1cz0wLHRoaXMucGVuZGluZ19idWY9bnVsbCx0aGlzLnBlbmRpbmdfYnVmX3NpemU9MCx0aGlzLnBlbmRpbmdfb3V0PTAsdGhpcy5wZW5kaW5nPTAsdGhpcy53cmFwPTAsdGhpcy5nemhlYWQ9bnVsbCx0aGlzLmd6aW5kZXg9MCx0aGlzLm1ldGhvZD1BLHRoaXMubGFzdF9mbHVzaD0tMSx0aGlzLndfc2l6ZT0wLHRoaXMud19iaXRzPTAsdGhpcy53X21hc2s9MCx0aGlzLndpbmRvdz1udWxsLHRoaXMud2luZG93X3NpemU9MCx0aGlzLnByZXY9bnVsbCx0aGlzLmhlYWQ9bnVsbCx0aGlzLmluc19oPTAsdGhpcy5oYXNoX3NpemU9MCx0aGlzLmhhc2hfYml0cz0wLHRoaXMuaGFzaF9tYXNrPTAsdGhpcy5oYXNoX3NoaWZ0PTAsdGhpcy5ibG9ja19zdGFydD0wLHRoaXMubWF0Y2hfbGVuZ3RoPTAsdGhpcy5wcmV2X21hdGNoPTAsdGhpcy5tYXRjaF9hdmFpbGFibGU9MCx0aGlzLnN0cnN0YXJ0PTAsdGhpcy5tYXRjaF9zdGFydD0wLHRoaXMubG9va2FoZWFkPTAsdGhpcy5wcmV2X2xlbmd0aD0wLHRoaXMubWF4X2NoYWluX2xlbmd0aD0wLHRoaXMubWF4X2xhenlfbWF0Y2g9MCx0aGlzLmxldmVsPTAsdGhpcy5zdHJhdGVneT0wLHRoaXMuZ29vZF9tYXRjaD0wLHRoaXMubmljZV9tYXRjaD0wLHRoaXMuZHluX2x0cmVlPW5ldyBpLkJ1ZjE2KDIqaiksdGhpcy5keW5fZHRyZWU9bmV3IGkuQnVmMTYoMiooMipPKzEpKSx0aGlzLmJsX3RyZWU9bmV3IGkuQnVmMTYoMiooMipIKzEpKSxaKHRoaXMuZHluX2x0cmVlKSxaKHRoaXMuZHluX2R0cmVlKSxaKHRoaXMuYmxfdHJlZSksdGhpcy5sX2Rlc2M9bnVsbCx0aGlzLmRfZGVzYz1udWxsLHRoaXMuYmxfZGVzYz1udWxsLHRoaXMuYmxfY291bnQ9bmV3IGkuQnVmMTYoTCsxKSx0aGlzLmhlYXA9bmV3IGkuQnVmMTYoMipEKzEpLFoodGhpcy5oZWFwKSx0aGlzLmhlYXBfbGVuPTAsdGhpcy5oZWFwX21heD0wLHRoaXMuZGVwdGg9bmV3IGkuQnVmMTYoMipEKzEpLFoodGhpcy5kZXB0aCksdGhpcy5sX2J1Zj0wLHRoaXMubGl0X2J1ZnNpemU9MCx0aGlzLmxhc3RfbGl0PTAsdGhpcy5kX2J1Zj0wLHRoaXMub3B0X2xlbj0wLHRoaXMuc3RhdGljX2xlbj0wLHRoaXMubWF0Y2hlcz0wLHRoaXMuaW5zZXJ0PTAsdGhpcy5iaV9idWY9MCx0aGlzLmJpX3ZhbGlkPTB9ZnVuY3Rpb24gcHQodCl7dmFyIGU7cmV0dXJuIHQmJnQuc3RhdGU/KHQudG90YWxfaW49dC50b3RhbF9vdXQ9MCx0LmRhdGFfdHlwZT1CLChlPXQuc3RhdGUpLnBlbmRpbmc9MCxlLnBlbmRpbmdfb3V0PTAsZS53cmFwPDAmJihlLndyYXA9LWUud3JhcCksZS5zdGF0dXM9ZS53cmFwP0Y6WCx0LmFkbGVyPTI9PT1lLndyYXA/MDoxLGUubGFzdF9mbHVzaD1jLGEuX3RyX2luaXQoZSksXyk6Sih0LGcpfWZ1bmN0aW9uIGd0KHQpe3ZhciBlPXB0KHQpO3JldHVybiBlPT09XyYmZHQodC5zdGF0ZSksZX1mdW5jdGlvbiB2dCh0LGUpe3JldHVybiB0JiZ0LnN0YXRlPzIhPT10LnN0YXRlLndyYXA/ZzoodC5zdGF0ZS5nemhlYWQ9ZSxfKTpnfWZ1bmN0aW9uIHl0KHQsZSxyLG4sYSxvKXtpZighdClyZXR1cm4gZzt2YXIgcz0xO2lmKGU9PT1tJiYoZT02KSxuPDA/KHM9MCxuPS1uKTpuPjE1JiYocz0yLG4tPTE2KSxhPDF8fGE+U3x8ciE9PUF8fG48OHx8bj4xNXx8ZTwwfHxlPjl8fG88MHx8bz54KXJldHVybiBKKHQsZyk7OD09PW4mJihuPTkpO3ZhciBoPW5ldyBfdDtyZXR1cm4gdC5zdGF0ZT1oLGguc3RybT10LGgud3JhcD1zLGguZ3poZWFkPW51bGwsaC53X2JpdHM9bixoLndfc2l6ZT0xPDxoLndfYml0cyxoLndfbWFzaz1oLndfc2l6ZS0xLGguaGFzaF9iaXRzPWErNyxoLmhhc2hfc2l6ZT0xPDxoLmhhc2hfYml0cyxoLmhhc2hfbWFzaz1oLmhhc2hfc2l6ZS0xLGguaGFzaF9zaGlmdD1+figoaC5oYXNoX2JpdHMrTS0xKS9NKSxoLndpbmRvdz1uZXcgaS5CdWY4KDIqaC53X3NpemUpLGguaGVhZD1uZXcgaS5CdWYxNihoLmhhc2hfc2l6ZSksaC5wcmV2PW5ldyBpLkJ1ZjE2KGgud19zaXplKSxoLmxpdF9idWZzaXplPTE8PGErNixoLnBlbmRpbmdfYnVmX3NpemU9NCpoLmxpdF9idWZzaXplLGgucGVuZGluZ19idWY9bmV3IGkuQnVmOChoLnBlbmRpbmdfYnVmX3NpemUpLGguZF9idWY9MSpoLmxpdF9idWZzaXplLGgubF9idWY9MypoLmxpdF9idWZzaXplLGgubGV2ZWw9ZSxoLnN0cmF0ZWd5PW8saC5tZXRob2Q9cixndCh0KX1mdW5jdGlvbiBtdCh0LGUpe3JldHVybiB5dCh0LGUsQSxFLEMseil9ZnVuY3Rpb24gd3QodCxlKXt2YXIgcixpLG8saDtpZighdHx8IXQuc3RhdGV8fGU+ZHx8ZTwwKXJldHVybiB0P0oodCxnKTpnO2lmKGk9dC5zdGF0ZSwhdC5vdXRwdXR8fCF0LmlucHV0JiYwIT09dC5hdmFpbF9pbnx8aS5zdGF0dXM9PT1XJiZlIT09ZilyZXR1cm4gSih0LDA9PT10LmF2YWlsX291dD95OmcpO2lmKGkuc3RybT10LHI9aS5sYXN0X2ZsdXNoLGkubGFzdF9mbHVzaD1lLGkuc3RhdHVzPT09RilpZigyPT09aS53cmFwKXQuYWRsZXI9MCxydChpLDMxKSxydChpLDEzOSkscnQoaSw4KSxpLmd6aGVhZD8ocnQoaSwoaS5nemhlYWQudGV4dD8xOjApKyhpLmd6aGVhZC5oY3JjPzI6MCkrKGkuZ3poZWFkLmV4dHJhPzQ6MCkrKGkuZ3poZWFkLm5hbWU/ODowKSsoaS5nemhlYWQuY29tbWVudD8xNjowKSkscnQoaSwyNTUmaS5nemhlYWQudGltZSkscnQoaSxpLmd6aGVhZC50aW1lPj44JjI1NSkscnQoaSxpLmd6aGVhZC50aW1lPj4xNiYyNTUpLHJ0KGksaS5nemhlYWQudGltZT4+MjQmMjU1KSxydChpLDk9PT1pLmxldmVsPzI6aS5zdHJhdGVneT49Ynx8aS5sZXZlbDwyPzQ6MCkscnQoaSwyNTUmaS5nemhlYWQub3MpLGkuZ3poZWFkLmV4dHJhJiZpLmd6aGVhZC5leHRyYS5sZW5ndGgmJihydChpLDI1NSZpLmd6aGVhZC5leHRyYS5sZW5ndGgpLHJ0KGksaS5nemhlYWQuZXh0cmEubGVuZ3RoPj44JjI1NSkpLGkuZ3poZWFkLmhjcmMmJih0LmFkbGVyPXModC5hZGxlcixpLnBlbmRpbmdfYnVmLGkucGVuZGluZywwKSksaS5nemluZGV4PTAsaS5zdGF0dXM9UCk6KHJ0KGksMCkscnQoaSwwKSxydChpLDApLHJ0KGksMCkscnQoaSwwKSxydChpLDk9PT1pLmxldmVsPzI6aS5zdHJhdGVneT49Ynx8aS5sZXZlbDwyPzQ6MCkscnQoaSwkKSxpLnN0YXR1cz1YKTtlbHNle3ZhciB2PUErKGkud19iaXRzLTg8PDQpPDw4O3Z8PShpLnN0cmF0ZWd5Pj1ifHxpLmxldmVsPDI/MDppLmxldmVsPDY/MTo2PT09aS5sZXZlbD8yOjMpPDw2LDAhPT1pLnN0cnN0YXJ0JiYodnw9SSksdis9MzEtdiUzMSxpLnN0YXR1cz1YLG50KGksdiksMCE9PWkuc3Ryc3RhcnQmJihudChpLHQuYWRsZXI+Pj4xNiksbnQoaSw2NTUzNSZ0LmFkbGVyKSksdC5hZGxlcj0xfWlmKGkuc3RhdHVzPT09UClpZihpLmd6aGVhZC5leHRyYSl7Zm9yKG89aS5wZW5kaW5nO2kuZ3ppbmRleDwoNjU1MzUmaS5nemhlYWQuZXh0cmEubGVuZ3RoKSYmKGkucGVuZGluZyE9PWkucGVuZGluZ19idWZfc2l6ZXx8KGkuZ3poZWFkLmhjcmMmJmkucGVuZGluZz5vJiYodC5hZGxlcj1zKHQuYWRsZXIsaS5wZW5kaW5nX2J1ZixpLnBlbmRpbmctbyxvKSksdHQodCksbz1pLnBlbmRpbmcsaS5wZW5kaW5nIT09aS5wZW5kaW5nX2J1Zl9zaXplKSk7KXJ0KGksMjU1JmkuZ3poZWFkLmV4dHJhW2kuZ3ppbmRleF0pLGkuZ3ppbmRleCsrO2kuZ3poZWFkLmhjcmMmJmkucGVuZGluZz5vJiYodC5hZGxlcj1zKHQuYWRsZXIsaS5wZW5kaW5nX2J1ZixpLnBlbmRpbmctbyxvKSksaS5nemluZGV4PT09aS5nemhlYWQuZXh0cmEubGVuZ3RoJiYoaS5nemluZGV4PTAsaS5zdGF0dXM9VCl9ZWxzZSBpLnN0YXR1cz1UO2lmKGkuc3RhdHVzPT09VClpZihpLmd6aGVhZC5uYW1lKXtvPWkucGVuZGluZztkb3tpZihpLnBlbmRpbmc9PT1pLnBlbmRpbmdfYnVmX3NpemUmJihpLmd6aGVhZC5oY3JjJiZpLnBlbmRpbmc+byYmKHQuYWRsZXI9cyh0LmFkbGVyLGkucGVuZGluZ19idWYsaS5wZW5kaW5nLW8sbykpLHR0KHQpLG89aS5wZW5kaW5nLGkucGVuZGluZz09PWkucGVuZGluZ19idWZfc2l6ZSkpe2g9MTticmVha31oPWkuZ3ppbmRleDxpLmd6aGVhZC5uYW1lLmxlbmd0aD8yNTUmaS5nemhlYWQubmFtZS5jaGFyQ29kZUF0KGkuZ3ppbmRleCsrKTowLHJ0KGksaCl9d2hpbGUoMCE9PWgpO2kuZ3poZWFkLmhjcmMmJmkucGVuZGluZz5vJiYodC5hZGxlcj1zKHQuYWRsZXIsaS5wZW5kaW5nX2J1ZixpLnBlbmRpbmctbyxvKSksMD09PWgmJihpLmd6aW5kZXg9MCxpLnN0YXR1cz1OKX1lbHNlIGkuc3RhdHVzPU47aWYoaS5zdGF0dXM9PT1OKWlmKGkuZ3poZWFkLmNvbW1lbnQpe289aS5wZW5kaW5nO2Rve2lmKGkucGVuZGluZz09PWkucGVuZGluZ19idWZfc2l6ZSYmKGkuZ3poZWFkLmhjcmMmJmkucGVuZGluZz5vJiYodC5hZGxlcj1zKHQuYWRsZXIsaS5wZW5kaW5nX2J1ZixpLnBlbmRpbmctbyxvKSksdHQodCksbz1pLnBlbmRpbmcsaS5wZW5kaW5nPT09aS5wZW5kaW5nX2J1Zl9zaXplKSl7aD0xO2JyZWFrfWg9aS5nemluZGV4PGkuZ3poZWFkLmNvbW1lbnQubGVuZ3RoPzI1NSZpLmd6aGVhZC5jb21tZW50LmNoYXJDb2RlQXQoaS5nemluZGV4KyspOjAscnQoaSxoKX13aGlsZSgwIT09aCk7aS5nemhlYWQuaGNyYyYmaS5wZW5kaW5nPm8mJih0LmFkbGVyPXModC5hZGxlcixpLnBlbmRpbmdfYnVmLGkucGVuZGluZy1vLG8pKSwwPT09aCYmKGkuc3RhdHVzPUspfWVsc2UgaS5zdGF0dXM9SztpZihpLnN0YXR1cz09PUsmJihpLmd6aGVhZC5oY3JjPyhpLnBlbmRpbmcrMj5pLnBlbmRpbmdfYnVmX3NpemUmJnR0KHQpLGkucGVuZGluZysyPD1pLnBlbmRpbmdfYnVmX3NpemUmJihydChpLDI1NSZ0LmFkbGVyKSxydChpLHQuYWRsZXI+PjgmMjU1KSx0LmFkbGVyPTAsaS5zdGF0dXM9WCkpOmkuc3RhdHVzPVgpLDAhPT1pLnBlbmRpbmcpe2lmKHR0KHQpLDA9PT10LmF2YWlsX291dClyZXR1cm4gaS5sYXN0X2ZsdXNoPS0xLF99ZWxzZSBpZigwPT09dC5hdmFpbF9pbiYmUShlKTw9UShyKSYmZSE9PWYpcmV0dXJuIEoodCx5KTtpZihpLnN0YXR1cz09PVcmJjAhPT10LmF2YWlsX2luKXJldHVybiBKKHQseSk7aWYoMCE9PXQuYXZhaWxfaW58fDAhPT1pLmxvb2thaGVhZHx8ZSE9PWMmJmkuc3RhdHVzIT09Vyl7dmFyIG09aS5zdHJhdGVneT09PWI/dXQoaSxlKTppLnN0cmF0ZWd5PT09az9sdChpLGUpOm5baS5sZXZlbF0uZnVuYyhpLGUpO2lmKG0hPT1WJiZtIT09WXx8KGkuc3RhdHVzPVcpLG09PT1xfHxtPT09VilyZXR1cm4gMD09PXQuYXZhaWxfb3V0JiYoaS5sYXN0X2ZsdXNoPS0xKSxfO2lmKG09PT1HJiYoZT09PWw/YS5fdHJfYWxpZ24oaSk6ZSE9PWQmJihhLl90cl9zdG9yZWRfYmxvY2soaSwwLDAsITEpLGU9PT11JiYoWihpLmhlYWQpLDA9PT1pLmxvb2thaGVhZCYmKGkuc3Ryc3RhcnQ9MCxpLmJsb2NrX3N0YXJ0PTAsaS5pbnNlcnQ9MCkpKSx0dCh0KSwwPT09dC5hdmFpbF9vdXQpKXJldHVybiBpLmxhc3RfZmx1c2g9LTEsX31yZXR1cm4gZSE9PWY/XzppLndyYXA8PTA/cDooMj09PWkud3JhcD8ocnQoaSwyNTUmdC5hZGxlcikscnQoaSx0LmFkbGVyPj44JjI1NSkscnQoaSx0LmFkbGVyPj4xNiYyNTUpLHJ0KGksdC5hZGxlcj4+MjQmMjU1KSxydChpLDI1NSZ0LnRvdGFsX2luKSxydChpLHQudG90YWxfaW4+PjgmMjU1KSxydChpLHQudG90YWxfaW4+PjE2JjI1NSkscnQoaSx0LnRvdGFsX2luPj4yNCYyNTUpKToobnQoaSx0LmFkbGVyPj4+MTYpLG50KGksNjU1MzUmdC5hZGxlcikpLHR0KHQpLGkud3JhcD4wJiYoaS53cmFwPS1pLndyYXApLDAhPT1pLnBlbmRpbmc/XzpwKX1mdW5jdGlvbiBidCh0KXt2YXIgZTtyZXR1cm4gdCYmdC5zdGF0ZT8oZT10LnN0YXRlLnN0YXR1cykhPT1GJiZlIT09UCYmZSE9PVQmJmUhPT1OJiZlIT09SyYmZSE9PVgmJmUhPT1XP0oodCxnKToodC5zdGF0ZT1udWxsLGU9PT1YP0oodCx2KTpfKTpnfWZ1bmN0aW9uIGt0KHQsZSl7dmFyIHIsbixhLHMsaCxjLGwsdSxmPWUubGVuZ3RoO2lmKCF0fHwhdC5zdGF0ZSlyZXR1cm4gZztpZigyPT09KHM9KHI9dC5zdGF0ZSkud3JhcCl8fDE9PT1zJiZyLnN0YXR1cyE9PUZ8fHIubG9va2FoZWFkKXJldHVybiBnO2ZvcigxPT09cyYmKHQuYWRsZXI9byh0LmFkbGVyLGUsZiwwKSksci53cmFwPTAsZj49ci53X3NpemUmJigwPT09cyYmKFooci5oZWFkKSxyLnN0cnN0YXJ0PTAsci5ibG9ja19zdGFydD0wLHIuaW5zZXJ0PTApLHU9bmV3IGkuQnVmOChyLndfc2l6ZSksaS5hcnJheVNldCh1LGUsZi1yLndfc2l6ZSxyLndfc2l6ZSwwKSxlPXUsZj1yLndfc2l6ZSksaD10LmF2YWlsX2luLGM9dC5uZXh0X2luLGw9dC5pbnB1dCx0LmF2YWlsX2luPWYsdC5uZXh0X2luPTAsdC5pbnB1dD1lLG90KHIpO3IubG9va2FoZWFkPj1NOyl7bj1yLnN0cnN0YXJ0LGE9ci5sb29rYWhlYWQtKE0tMSk7ZG97ci5pbnNfaD0oci5pbnNfaDw8ci5oYXNoX3NoaWZ0XnIud2luZG93W24rTS0xXSkmci5oYXNoX21hc2ssci5wcmV2W24mci53X21hc2tdPXIuaGVhZFtyLmluc19oXSxyLmhlYWRbci5pbnNfaF09bixuKyt9d2hpbGUoLS1hKTtyLnN0cnN0YXJ0PW4sci5sb29rYWhlYWQ9TS0xLG90KHIpfXJldHVybiByLnN0cnN0YXJ0Kz1yLmxvb2thaGVhZCxyLmJsb2NrX3N0YXJ0PXIuc3Ryc3RhcnQsci5pbnNlcnQ9ci5sb29rYWhlYWQsci5sb29rYWhlYWQ9MCxyLm1hdGNoX2xlbmd0aD1yLnByZXZfbGVuZ3RoPU0tMSxyLm1hdGNoX2F2YWlsYWJsZT0wLHQubmV4dF9pbj1jLHQuaW5wdXQ9bCx0LmF2YWlsX2luPWgsci53cmFwPXMsX31uPVtuZXcgZnQoMCwwLDAsMCxzdCksbmV3IGZ0KDQsNCw4LDQsaHQpLG5ldyBmdCg0LDUsMTYsOCxodCksbmV3IGZ0KDQsNiwzMiwzMixodCksbmV3IGZ0KDQsNCwxNiwxNixjdCksbmV3IGZ0KDgsMTYsMzIsMzIsY3QpLG5ldyBmdCg4LDE2LDEyOCwxMjgsY3QpLG5ldyBmdCg4LDMyLDEyOCwyNTYsY3QpLG5ldyBmdCgzMiwxMjgsMjU4LDEwMjQsY3QpLG5ldyBmdCgzMiwyNTgsMjU4LDQwOTYsY3QpXSxyLmRlZmxhdGVJbml0PW10LHIuZGVmbGF0ZUluaXQyPXl0LHIuZGVmbGF0ZVJlc2V0PWd0LHIuZGVmbGF0ZVJlc2V0S2VlcD1wdCxyLmRlZmxhdGVTZXRIZWFkZXI9dnQsci5kZWZsYXRlPXd0LHIuZGVmbGF0ZUVuZD1idCxyLmRlZmxhdGVTZXREaWN0aW9uYXJ5PWt0LHIuZGVmbGF0ZUluZm89InBha28gZGVmbGF0ZSAoZnJvbSBOb2RlY2EgcHJvamVjdCkifSx7Ii4uL3V0aWxzL2NvbW1vbiI6MSwiLi9hZGxlcjMyIjozLCIuL2NyYzMyIjo0LCIuL21lc3NhZ2VzIjo2LCIuL3RyZWVzIjo3fV0sNjpbZnVuY3Rpb24odCxlLHIpe2UuZXhwb3J0cz17MjoibmVlZCBkaWN0aW9uYXJ5IiwxOiJzdHJlYW0gZW5kIiwwOiIiLCItMSI6ImZpbGUgZXJyb3IiLCItMiI6InN0cmVhbSBlcnJvciIsIi0zIjoiZGF0YSBlcnJvciIsIi00IjoiaW5zdWZmaWNpZW50IG1lbW9yeSIsIi01IjoiYnVmZmVyIGVycm9yIiwiLTYiOiJpbmNvbXBhdGlibGUgdmVyc2lvbiJ9fSx7fV0sNzpbZnVuY3Rpb24odCxlLHIpe3ZhciBuPXQoIi4uL3V0aWxzL2NvbW1vbiIpLGk9NCxhPTAsbz0xLHM9MjtmdW5jdGlvbiBoKHQpe2Zvcih2YXIgZT10Lmxlbmd0aDstLWU+PTA7KXRbZV09MH12YXIgYz0wLGw9MSx1PTIsZj0zLGQ9MjU4LF89MjkscD0yNTYsZz1wKzErXyx2PTMwLHk9MTksbT0yKmcrMSx3PTE1LGI9MTYsaz03LHg9MjU2LHo9MTYsQj0xNyxBPTE4LFM9WzAsMCwwLDAsMCwwLDAsMCwxLDEsMSwxLDIsMiwyLDIsMywzLDMsMyw0LDQsNCw0LDUsNSw1LDUsMF0sRT1bMCwwLDAsMCwxLDEsMiwyLDMsMyw0LDQsNSw1LDYsNiw3LDcsOCw4LDksOSwxMCwxMCwxMSwxMSwxMiwxMiwxMywxM10sQz1bMCwwLDAsMCwwLDAsMCwwLDAsMCwwLDAsMCwwLDAsMCwyLDMsN10sRD1bMTYsMTcsMTgsMCw4LDcsOSw2LDEwLDUsMTEsNCwxMiwzLDEzLDIsMTQsMSwxNV0sTz01MTIsSD1uZXcgQXJyYXkoMiooZysyKSk7aChIKTt2YXIgaj1uZXcgQXJyYXkoMip2KTtoKGopO3ZhciBMPW5ldyBBcnJheShPKTtoKEwpO3ZhciBNPW5ldyBBcnJheShkLWYrMSk7aChNKTt2YXIgVT1uZXcgQXJyYXkoXyk7aChVKTt2YXIgUixJLEYsUD1uZXcgQXJyYXkodik7ZnVuY3Rpb24gVCh0LGUscixuLGkpe3RoaXMuc3RhdGljX3RyZWU9dCx0aGlzLmV4dHJhX2JpdHM9ZSx0aGlzLmV4dHJhX2Jhc2U9cix0aGlzLmVsZW1zPW4sdGhpcy5tYXhfbGVuZ3RoPWksdGhpcy5oYXNfc3RyZWU9dCYmdC5sZW5ndGh9ZnVuY3Rpb24gTih0LGUpe3RoaXMuZHluX3RyZWU9dCx0aGlzLm1heF9jb2RlPTAsdGhpcy5zdGF0X2Rlc2M9ZX1mdW5jdGlvbiBLKHQpe3JldHVybiB0PDI1Nj9MW3RdOkxbMjU2Kyh0Pj4+NyldfWZ1bmN0aW9uIFgodCxlKXt0LnBlbmRpbmdfYnVmW3QucGVuZGluZysrXT0yNTUmZSx0LnBlbmRpbmdfYnVmW3QucGVuZGluZysrXT1lPj4+OCYyNTV9ZnVuY3Rpb24gVyh0LGUscil7dC5iaV92YWxpZD5iLXI/KHQuYmlfYnVmfD1lPDx0LmJpX3ZhbGlkJjY1NTM1LFgodCx0LmJpX2J1ZiksdC5iaV9idWY9ZT4+Yi10LmJpX3ZhbGlkLHQuYmlfdmFsaWQrPXItYik6KHQuYmlfYnVmfD1lPDx0LmJpX3ZhbGlkJjY1NTM1LHQuYmlfdmFsaWQrPXIpfWZ1bmN0aW9uIHEodCxlLHIpe1codCxyWzIqZV0sclsyKmUrMV0pfWZ1bmN0aW9uIEcodCxlKXt2YXIgcj0wO2Rve3J8PTEmdCx0Pj4+PTEscjw8PTF9d2hpbGUoLS1lPjApO3JldHVybiByPj4+MX1mdW5jdGlvbiBWKHQpezE2PT09dC5iaV92YWxpZD8oWCh0LHQuYmlfYnVmKSx0LmJpX2J1Zj0wLHQuYmlfdmFsaWQ9MCk6dC5iaV92YWxpZD49OCYmKHQucGVuZGluZ19idWZbdC5wZW5kaW5nKytdPTI1NSZ0LmJpX2J1Zix0LmJpX2J1Zj4+PTgsdC5iaV92YWxpZC09OCl9ZnVuY3Rpb24gWSh0LGUpe3ZhciByLG4saSxhLG8scyxoPWUuZHluX3RyZWUsYz1lLm1heF9jb2RlLGw9ZS5zdGF0X2Rlc2Muc3RhdGljX3RyZWUsdT1lLnN0YXRfZGVzYy5oYXNfc3RyZWUsZj1lLnN0YXRfZGVzYy5leHRyYV9iaXRzLGQ9ZS5zdGF0X2Rlc2MuZXh0cmFfYmFzZSxfPWUuc3RhdF9kZXNjLm1heF9sZW5ndGgscD0wO2ZvcihhPTA7YTw9dzthKyspdC5ibF9jb3VudFthXT0wO2ZvcihoWzIqdC5oZWFwW3QuaGVhcF9tYXhdKzFdPTAscj10LmhlYXBfbWF4KzE7cjxtO3IrKykoYT1oWzIqaFsyKihuPXQuaGVhcFtyXSkrMV0rMV0rMSk+XyYmKGE9XyxwKyspLGhbMipuKzFdPWEsbj5jfHwodC5ibF9jb3VudFthXSsrLG89MCxuPj1kJiYobz1mW24tZF0pLHM9aFsyKm5dLHQub3B0X2xlbis9cyooYStvKSx1JiYodC5zdGF0aWNfbGVuKz1zKihsWzIqbisxXStvKSkpO2lmKDAhPT1wKXtkb3tmb3IoYT1fLTE7MD09PXQuYmxfY291bnRbYV07KWEtLTt0LmJsX2NvdW50W2FdLS0sdC5ibF9jb3VudFthKzFdKz0yLHQuYmxfY291bnRbX10tLSxwLT0yfXdoaWxlKHA+MCk7Zm9yKGE9XzswIT09YTthLS0pZm9yKG49dC5ibF9jb3VudFthXTswIT09bjspKGk9dC5oZWFwWy0tcl0pPmN8fChoWzIqaSsxXSE9PWEmJih0Lm9wdF9sZW4rPShhLWhbMippKzFdKSpoWzIqaV0saFsyKmkrMV09YSksbi0tKX19ZnVuY3Rpb24gJCh0LGUscil7dmFyIG4saSxhPW5ldyBBcnJheSh3KzEpLG89MDtmb3Iobj0xO248PXc7bisrKWFbbl09bz1vK3Jbbi0xXTw8MTtmb3IoaT0wO2k8PWU7aSsrKXt2YXIgcz10WzIqaSsxXTswIT09cyYmKHRbMippXT1HKGFbc10rKyxzKSl9fWZ1bmN0aW9uIEooKXt2YXIgdCxlLHIsbixpLGE9bmV3IEFycmF5KHcrMSk7Zm9yKHI9MCxuPTA7bjxfLTE7bisrKWZvcihVW25dPXIsdD0wO3Q8MTw8U1tuXTt0KyspTVtyKytdPW47Zm9yKE1bci0xXT1uLGk9MCxuPTA7bjwxNjtuKyspZm9yKFBbbl09aSx0PTA7dDwxPDxFW25dO3QrKylMW2krK109bjtmb3IoaT4+PTc7bjx2O24rKylmb3IoUFtuXT1pPDw3LHQ9MDt0PDE8PEVbbl0tNzt0KyspTFsyNTYraSsrXT1uO2ZvcihlPTA7ZTw9dztlKyspYVtlXT0wO2Zvcih0PTA7dDw9MTQzOylIWzIqdCsxXT04LHQrKyxhWzhdKys7Zm9yKDt0PD0yNTU7KUhbMip0KzFdPTksdCsrLGFbOV0rKztmb3IoO3Q8PTI3OTspSFsyKnQrMV09Nyx0KyssYVs3XSsrO2Zvcig7dDw9Mjg3OylIWzIqdCsxXT04LHQrKyxhWzhdKys7Zm9yKCQoSCxnKzEsYSksdD0wO3Q8djt0KyspalsyKnQrMV09NSxqWzIqdF09Ryh0LDUpO1I9bmV3IFQoSCxTLHArMSxnLHcpLEk9bmV3IFQoaixFLDAsdix3KSxGPW5ldyBUKG5ldyBBcnJheSgwKSxDLDAseSxrKX1mdW5jdGlvbiBRKHQpe3ZhciBlO2ZvcihlPTA7ZTxnO2UrKyl0LmR5bl9sdHJlZVsyKmVdPTA7Zm9yKGU9MDtlPHY7ZSsrKXQuZHluX2R0cmVlWzIqZV09MDtmb3IoZT0wO2U8eTtlKyspdC5ibF90cmVlWzIqZV09MDt0LmR5bl9sdHJlZVsyKnhdPTEsdC5vcHRfbGVuPXQuc3RhdGljX2xlbj0wLHQubGFzdF9saXQ9dC5tYXRjaGVzPTB9ZnVuY3Rpb24gWih0KXt0LmJpX3ZhbGlkPjg/WCh0LHQuYmlfYnVmKTp0LmJpX3ZhbGlkPjAmJih0LnBlbmRpbmdfYnVmW3QucGVuZGluZysrXT10LmJpX2J1ZiksdC5iaV9idWY9MCx0LmJpX3ZhbGlkPTB9ZnVuY3Rpb24gdHQodCxlLHIsaSl7Wih0KSxpJiYoWCh0LHIpLFgodCx+cikpLG4uYXJyYXlTZXQodC5wZW5kaW5nX2J1Zix0LndpbmRvdyxlLHIsdC5wZW5kaW5nKSx0LnBlbmRpbmcrPXJ9ZnVuY3Rpb24gZXQodCxlLHIsbil7dmFyIGk9MiplLGE9MipyO3JldHVybiB0W2ldPHRbYV18fHRbaV09PT10W2FdJiZuW2VdPD1uW3JdfWZ1bmN0aW9uIHJ0KHQsZSxyKXtmb3IodmFyIG49dC5oZWFwW3JdLGk9cjw8MTtpPD10LmhlYXBfbGVuJiYoaTx0LmhlYXBfbGVuJiZldChlLHQuaGVhcFtpKzFdLHQuaGVhcFtpXSx0LmRlcHRoKSYmaSsrLCFldChlLG4sdC5oZWFwW2ldLHQuZGVwdGgpKTspdC5oZWFwW3JdPXQuaGVhcFtpXSxyPWksaTw8PTE7dC5oZWFwW3JdPW59ZnVuY3Rpb24gbnQodCxlLHIpe3ZhciBuLGksYSxvLHM9MDtpZigwIT09dC5sYXN0X2xpdClkb3tuPXQucGVuZGluZ19idWZbdC5kX2J1ZisyKnNdPDw4fHQucGVuZGluZ19idWZbdC5kX2J1ZisyKnMrMV0saT10LnBlbmRpbmdfYnVmW3QubF9idWYrc10scysrLDA9PT1uP3EodCxpLGUpOihxKHQsKGE9TVtpXSkrcCsxLGUpLDAhPT0obz1TW2FdKSYmVyh0LGktPVVbYV0sbykscSh0LGE9SygtLW4pLHIpLDAhPT0obz1FW2FdKSYmVyh0LG4tPVBbYV0sbykpfXdoaWxlKHM8dC5sYXN0X2xpdCk7cSh0LHgsZSl9ZnVuY3Rpb24gaXQodCxlKXt2YXIgcixuLGksYT1lLmR5bl90cmVlLG89ZS5zdGF0X2Rlc2Muc3RhdGljX3RyZWUscz1lLnN0YXRfZGVzYy5oYXNfc3RyZWUsaD1lLnN0YXRfZGVzYy5lbGVtcyxjPS0xO2Zvcih0LmhlYXBfbGVuPTAsdC5oZWFwX21heD1tLHI9MDtyPGg7cisrKTAhPT1hWzIqcl0/KHQuaGVhcFsrK3QuaGVhcF9sZW5dPWM9cix0LmRlcHRoW3JdPTApOmFbMipyKzFdPTA7Zm9yKDt0LmhlYXBfbGVuPDI7KWFbMiooaT10LmhlYXBbKyt0LmhlYXBfbGVuXT1jPDI/KytjOjApXT0xLHQuZGVwdGhbaV09MCx0Lm9wdF9sZW4tLSxzJiYodC5zdGF0aWNfbGVuLT1vWzIqaSsxXSk7Zm9yKGUubWF4X2NvZGU9YyxyPXQuaGVhcF9sZW4+PjE7cj49MTtyLS0pcnQodCxhLHIpO2k9aDtkb3tyPXQuaGVhcFsxXSx0LmhlYXBbMV09dC5oZWFwW3QuaGVhcF9sZW4tLV0scnQodCxhLDEpLG49dC5oZWFwWzFdLHQuaGVhcFstLXQuaGVhcF9tYXhdPXIsdC5oZWFwWy0tdC5oZWFwX21heF09bixhWzIqaV09YVsyKnJdK2FbMipuXSx0LmRlcHRoW2ldPSh0LmRlcHRoW3JdPj10LmRlcHRoW25dP3QuZGVwdGhbcl06dC5kZXB0aFtuXSkrMSxhWzIqcisxXT1hWzIqbisxXT1pLHQuaGVhcFsxXT1pKysscnQodCxhLDEpfXdoaWxlKHQuaGVhcF9sZW4+PTIpO3QuaGVhcFstLXQuaGVhcF9tYXhdPXQuaGVhcFsxXSxZKHQsZSksJChhLGMsdC5ibF9jb3VudCl9ZnVuY3Rpb24gYXQodCxlLHIpe3ZhciBuLGksYT0tMSxvPWVbMV0scz0wLGg9NyxjPTQ7Zm9yKDA9PT1vJiYoaD0xMzgsYz0zKSxlWzIqKHIrMSkrMV09NjU1MzUsbj0wO248PXI7bisrKWk9byxvPWVbMioobisxKSsxXSwrK3M8aCYmaT09PW98fChzPGM/dC5ibF90cmVlWzIqaV0rPXM6MCE9PWk/KGkhPT1hJiZ0LmJsX3RyZWVbMippXSsrLHQuYmxfdHJlZVsyKnpdKyspOnM8PTEwP3QuYmxfdHJlZVsyKkJdKys6dC5ibF90cmVlWzIqQV0rKyxzPTAsYT1pLDA9PT1vPyhoPTEzOCxjPTMpOmk9PT1vPyhoPTYsYz0zKTooaD03LGM9NCkpfWZ1bmN0aW9uIG90KHQsZSxyKXt2YXIgbixpLGE9LTEsbz1lWzFdLHM9MCxoPTcsYz00O2ZvcigwPT09byYmKGg9MTM4LGM9Myksbj0wO248PXI7bisrKWlmKGk9byxvPWVbMioobisxKSsxXSwhKCsrczxoJiZpPT09bykpe2lmKHM8Yylkb3txKHQsaSx0LmJsX3RyZWUpfXdoaWxlKDAhPS0tcyk7ZWxzZSAwIT09aT8oaSE9PWEmJihxKHQsaSx0LmJsX3RyZWUpLHMtLSkscSh0LHosdC5ibF90cmVlKSxXKHQscy0zLDIpKTpzPD0xMD8ocSh0LEIsdC5ibF90cmVlKSxXKHQscy0zLDMpKToocSh0LEEsdC5ibF90cmVlKSxXKHQscy0xMSw3KSk7cz0wLGE9aSwwPT09bz8oaD0xMzgsYz0zKTppPT09bz8oaD02LGM9Myk6KGg9NyxjPTQpfX1mdW5jdGlvbiBzdCh0KXt2YXIgZTtmb3IoYXQodCx0LmR5bl9sdHJlZSx0LmxfZGVzYy5tYXhfY29kZSksYXQodCx0LmR5bl9kdHJlZSx0LmRfZGVzYy5tYXhfY29kZSksaXQodCx0LmJsX2Rlc2MpLGU9eS0xO2U+PTMmJjA9PT10LmJsX3RyZWVbMipEW2VdKzFdO2UtLSk7cmV0dXJuIHQub3B0X2xlbis9MyooZSsxKSs1KzUrNCxlfWZ1bmN0aW9uIGh0KHQsZSxyLG4pe3ZhciBpO2ZvcihXKHQsZS0yNTcsNSksVyh0LHItMSw1KSxXKHQsbi00LDQpLGk9MDtpPG47aSsrKVcodCx0LmJsX3RyZWVbMipEW2ldKzFdLDMpO290KHQsdC5keW5fbHRyZWUsZS0xKSxvdCh0LHQuZHluX2R0cmVlLHItMSl9ZnVuY3Rpb24gY3QodCl7dmFyIGUscj00MDkzNjI0NDQ3O2ZvcihlPTA7ZTw9MzE7ZSsrLHI+Pj49MSlpZigxJnImJjAhPT10LmR5bl9sdHJlZVsyKmVdKXJldHVybiBhO2lmKDAhPT10LmR5bl9sdHJlZVsxOF18fDAhPT10LmR5bl9sdHJlZVsyMF18fDAhPT10LmR5bl9sdHJlZVsyNl0pcmV0dXJuIG87Zm9yKGU9MzI7ZTxwO2UrKylpZigwIT09dC5keW5fbHRyZWVbMiplXSlyZXR1cm4gbztyZXR1cm4gYX1oKFApO3ZhciBsdD0hMTtmdW5jdGlvbiB1dCh0KXtsdHx8KEooKSxsdD0hMCksdC5sX2Rlc2M9bmV3IE4odC5keW5fbHRyZWUsUiksdC5kX2Rlc2M9bmV3IE4odC5keW5fZHRyZWUsSSksdC5ibF9kZXNjPW5ldyBOKHQuYmxfdHJlZSxGKSx0LmJpX2J1Zj0wLHQuYmlfdmFsaWQ9MCxRKHQpfWZ1bmN0aW9uIGZ0KHQsZSxyLG4pe1codCwoYzw8MSkrKG4/MTowKSwzKSx0dCh0LGUsciwhMCl9ZnVuY3Rpb24gZHQodCl7Vyh0LGw8PDEsMykscSh0LHgsSCksVih0KX1mdW5jdGlvbiBfdCh0LGUscixuKXt2YXIgYSxvLGg9MDt0LmxldmVsPjA/KHQuc3RybS5kYXRhX3R5cGU9PT1zJiYodC5zdHJtLmRhdGFfdHlwZT1jdCh0KSksaXQodCx0LmxfZGVzYyksaXQodCx0LmRfZGVzYyksaD1zdCh0KSxhPXQub3B0X2xlbiszKzc+Pj4zLChvPXQuc3RhdGljX2xlbiszKzc+Pj4zKTw9YSYmKGE9bykpOmE9bz1yKzUscis0PD1hJiYtMSE9PWU/ZnQodCxlLHIsbik6dC5zdHJhdGVneT09PWl8fG89PT1hPyhXKHQsKGw8PDEpKyhuPzE6MCksMyksbnQodCxILGopKTooVyh0LCh1PDwxKSsobj8xOjApLDMpLGh0KHQsdC5sX2Rlc2MubWF4X2NvZGUrMSx0LmRfZGVzYy5tYXhfY29kZSsxLGgrMSksbnQodCx0LmR5bl9sdHJlZSx0LmR5bl9kdHJlZSkpLFEodCksbiYmWih0KX1mdW5jdGlvbiBwdCh0LGUscil7cmV0dXJuIHQucGVuZGluZ19idWZbdC5kX2J1ZisyKnQubGFzdF9saXRdPWU+Pj44JjI1NSx0LnBlbmRpbmdfYnVmW3QuZF9idWYrMip0Lmxhc3RfbGl0KzFdPTI1NSZlLHQucGVuZGluZ19idWZbdC5sX2J1Zit0Lmxhc3RfbGl0XT0yNTUmcix0Lmxhc3RfbGl0KyssMD09PWU/dC5keW5fbHRyZWVbMipyXSsrOih0Lm1hdGNoZXMrKyxlLS0sdC5keW5fbHRyZWVbMiooTVtyXStwKzEpXSsrLHQuZHluX2R0cmVlWzIqSyhlKV0rKyksdC5sYXN0X2xpdD09PXQubGl0X2J1ZnNpemUtMX1yLl90cl9pbml0PXV0LHIuX3RyX3N0b3JlZF9ibG9jaz1mdCxyLl90cl9mbHVzaF9ibG9jaz1fdCxyLl90cl90YWxseT1wdCxyLl90cl9hbGlnbj1kdH0seyIuLi91dGlscy9jb21tb24iOjF9XSw4OltmdW5jdGlvbih0LGUscil7ZnVuY3Rpb24gbigpe3RoaXMuaW5wdXQ9bnVsbCx0aGlzLm5leHRfaW49MCx0aGlzLmF2YWlsX2luPTAsdGhpcy50b3RhbF9pbj0wLHRoaXMub3V0cHV0PW51bGwsdGhpcy5uZXh0X291dD0wLHRoaXMuYXZhaWxfb3V0PTAsdGhpcy50b3RhbF9vdXQ9MCx0aGlzLm1zZz0iIix0aGlzLnN0YXRlPW51bGwsdGhpcy5kYXRhX3R5cGU9Mix0aGlzLmFkbGVyPTB9ZS5leHBvcnRzPW59LHt9XSwiL2xpYi9kZWZsYXRlLmpzIjpbZnVuY3Rpb24odCxlLHIpe3ZhciBuPXQoIi4vemxpYi9kZWZsYXRlIiksaT10KCIuL3V0aWxzL2NvbW1vbiIpLGE9dCgiLi91dGlscy9zdHJpbmdzIiksbz10KCIuL3psaWIvbWVzc2FnZXMiKSxzPXQoIi4vemxpYi96c3RyZWFtIiksaD1PYmplY3QucHJvdG90eXBlLnRvU3RyaW5nLGM9MCxsPTQsdT0wLGY9MSxkPTIsXz0tMSxwPTAsZz04O2Z1bmN0aW9uIHYodCl7aWYoISh0aGlzIGluc3RhbmNlb2YgdikpcmV0dXJuIG5ldyB2KHQpO3RoaXMub3B0aW9ucz1pLmFzc2lnbih7bGV2ZWw6XyxtZXRob2Q6ZyxjaHVua1NpemU6MTYzODQsd2luZG93Qml0czoxNSxtZW1MZXZlbDo4LHN0cmF0ZWd5OnAsdG86IiJ9LHR8fHt9KTt2YXIgZT10aGlzLm9wdGlvbnM7ZS5yYXcmJmUud2luZG93Qml0cz4wP2Uud2luZG93Qml0cz0tZS53aW5kb3dCaXRzOmUuZ3ppcCYmZS53aW5kb3dCaXRzPjAmJmUud2luZG93Qml0czwxNiYmKGUud2luZG93Qml0cys9MTYpLHRoaXMuZXJyPTAsdGhpcy5tc2c9IiIsdGhpcy5lbmRlZD0hMSx0aGlzLmNodW5rcz1bXSx0aGlzLnN0cm09bmV3IHMsdGhpcy5zdHJtLmF2YWlsX291dD0wO3ZhciByPW4uZGVmbGF0ZUluaXQyKHRoaXMuc3RybSxlLmxldmVsLGUubWV0aG9kLGUud2luZG93Qml0cyxlLm1lbUxldmVsLGUuc3RyYXRlZ3kpO2lmKHIhPT11KXRocm93IG5ldyBFcnJvcihvW3JdKTtpZihlLmhlYWRlciYmbi5kZWZsYXRlU2V0SGVhZGVyKHRoaXMuc3RybSxlLmhlYWRlciksZS5kaWN0aW9uYXJ5KXt2YXIgYztpZihjPSJzdHJpbmciPT10eXBlb2YgZS5kaWN0aW9uYXJ5P2Euc3RyaW5nMmJ1ZihlLmRpY3Rpb25hcnkpOiJbb2JqZWN0IEFycmF5QnVmZmVyXSI9PT1oLmNhbGwoZS5kaWN0aW9uYXJ5KT9uZXcgVWludDhBcnJheShlLmRpY3Rpb25hcnkpOmUuZGljdGlvbmFyeSwocj1uLmRlZmxhdGVTZXREaWN0aW9uYXJ5KHRoaXMuc3RybSxjKSkhPT11KXRocm93IG5ldyBFcnJvcihvW3JdKTt0aGlzLl9kaWN0X3NldD0hMH19ZnVuY3Rpb24geSh0LGUpe3ZhciByPW5ldyB2KGUpO2lmKHIucHVzaCh0LCEwKSxyLmVycil0aHJvdyByLm1zZ3x8b1tyLmVycl07cmV0dXJuIHIucmVzdWx0fWZ1bmN0aW9uIG0odCxlKXtyZXR1cm4oZT1lfHx7fSkucmF3PSEwLHkodCxlKX1mdW5jdGlvbiB3KHQsZSl7cmV0dXJuKGU9ZXx8e30pLmd6aXA9ITAseSh0LGUpfXYucHJvdG90eXBlLnB1c2g9ZnVuY3Rpb24odCxlKXt2YXIgcixvLHM9dGhpcy5zdHJtLF89dGhpcy5vcHRpb25zLmNodW5rU2l6ZTtpZih0aGlzLmVuZGVkKXJldHVybiExO289ZT09PX5+ZT9lOiEwPT09ZT9sOmMsInN0cmluZyI9PXR5cGVvZiB0P3MuaW5wdXQ9YS5zdHJpbmcyYnVmKHQpOiJbb2JqZWN0IEFycmF5QnVmZmVyXSI9PT1oLmNhbGwodCk/cy5pbnB1dD1uZXcgVWludDhBcnJheSh0KTpzLmlucHV0PXQscy5uZXh0X2luPTAscy5hdmFpbF9pbj1zLmlucHV0Lmxlbmd0aDtkb3tpZigwPT09cy5hdmFpbF9vdXQmJihzLm91dHB1dD1uZXcgaS5CdWY4KF8pLHMubmV4dF9vdXQ9MCxzLmF2YWlsX291dD1fKSwocj1uLmRlZmxhdGUocyxvKSkhPT1mJiZyIT09dSlyZXR1cm4gdGhpcy5vbkVuZChyKSx0aGlzLmVuZGVkPSEwLCExOzAhPT1zLmF2YWlsX291dCYmKDAhPT1zLmF2YWlsX2lufHxvIT09bCYmbyE9PWQpfHwoInN0cmluZyI9PT10aGlzLm9wdGlvbnMudG8/dGhpcy5vbkRhdGEoYS5idWYyYmluc3RyaW5nKGkuc2hyaW5rQnVmKHMub3V0cHV0LHMubmV4dF9vdXQpKSk6dGhpcy5vbkRhdGEoaS5zaHJpbmtCdWYocy5vdXRwdXQscy5uZXh0X291dCkpKX13aGlsZSgocy5hdmFpbF9pbj4wfHwwPT09cy5hdmFpbF9vdXQpJiZyIT09Zik7cmV0dXJuIG89PT1sPyhyPW4uZGVmbGF0ZUVuZCh0aGlzLnN0cm0pLHRoaXMub25FbmQociksdGhpcy5lbmRlZD0hMCxyPT09dSk6byE9PWR8fCh0aGlzLm9uRW5kKHUpLHMuYXZhaWxfb3V0PTAsITApfSx2LnByb3RvdHlwZS5vbkRhdGE9ZnVuY3Rpb24odCl7dGhpcy5jaHVua3MucHVzaCh0KX0sdi5wcm90b3R5cGUub25FbmQ9ZnVuY3Rpb24odCl7dD09PXUmJigic3RyaW5nIj09PXRoaXMub3B0aW9ucy50bz90aGlzLnJlc3VsdD10aGlzLmNodW5rcy5qb2luKCIiKTp0aGlzLnJlc3VsdD1pLmZsYXR0ZW5DaHVua3ModGhpcy5jaHVua3MpKSx0aGlzLmNodW5rcz1bXSx0aGlzLmVycj10LHRoaXMubXNnPXRoaXMuc3RybS5tc2d9LHIuRGVmbGF0ZT12LHIuZGVmbGF0ZT15LHIuZGVmbGF0ZVJhdz1tLHIuZ3ppcD13fSx7Ii4vdXRpbHMvY29tbW9uIjoxLCIuL3V0aWxzL3N0cmluZ3MiOjIsIi4vemxpYi9kZWZsYXRlIjo1LCIuL3psaWIvbWVzc2FnZXMiOjYsIi4vemxpYi96c3RyZWFtIjo4fV19LHt9LFtdKSgiL2xpYi9kZWZsYXRlLmpzIil9KSksbD1zKE9iamVjdC5mcmVlemUoe19fcHJvdG9fXzpudWxsfSkpLHU9bygoZnVuY3Rpb24odCxlKXt2YXIgcjt0LmV4cG9ydHM9KHI9cnx8ZnVuY3Rpb24odCxlKXt2YXIgcjtpZigidW5kZWZpbmVkIiE9dHlwZW9mIHdpbmRvdyYmd2luZG93LmNyeXB0byYmKHI9d2luZG93LmNyeXB0byksIXImJiJ1bmRlZmluZWQiIT10eXBlb2Ygd2luZG93JiZ3aW5kb3cubXNDcnlwdG8mJihyPXdpbmRvdy5tc0NyeXB0byksIXImJnZvaWQgMCE9PWEmJmEuY3J5cHRvJiYocj1hLmNyeXB0byksIXIpdHJ5e3I9bH1jYXRjaCh0KXt9dmFyIG49ZnVuY3Rpb24oKXtpZihyKXtpZigiZnVuY3Rpb24iPT10eXBlb2Ygci5nZXRSYW5kb21WYWx1ZXMpdHJ5e3JldHVybiByLmdldFJhbmRvbVZhbHVlcyhuZXcgVWludDMyQXJyYXkoMSkpWzBdfWNhdGNoKHQpe31pZigiZnVuY3Rpb24iPT10eXBlb2Ygci5yYW5kb21CeXRlcyl0cnl7cmV0dXJuIHIucmFuZG9tQnl0ZXMoNCkucmVhZEludDMyTEUoKX1jYXRjaCh0KXt9fXRocm93IG5ldyBFcnJvcigiTmF0aXZlIGNyeXB0byBtb2R1bGUgY291bGQgbm90IGJlIHVzZWQgdG8gZ2V0IHNlY3VyZSByYW5kb20gbnVtYmVyLiIpfSxpPU9iamVjdC5jcmVhdGV8fGZ1bmN0aW9uKCl7ZnVuY3Rpb24gdCgpe31yZXR1cm4gZnVuY3Rpb24oZSl7dmFyIHI7cmV0dXJuIHQucHJvdG90eXBlPWUscj1uZXcgdCx0LnByb3RvdHlwZT1udWxsLHJ9fSgpLG89e30scz1vLmxpYj17fSxoPXMuQmFzZT17ZXh0ZW5kOmZ1bmN0aW9uKHQpe3ZhciBlPWkodGhpcyk7cmV0dXJuIHQmJmUubWl4SW4odCksZS5oYXNPd25Qcm9wZXJ0eSgiaW5pdCIpJiZ0aGlzLmluaXQhPT1lLmluaXR8fChlLmluaXQ9ZnVuY3Rpb24oKXtlLiRzdXBlci5pbml0LmFwcGx5KHRoaXMsYXJndW1lbnRzKX0pLGUuaW5pdC5wcm90b3R5cGU9ZSxlLiRzdXBlcj10aGlzLGV9LGNyZWF0ZTpmdW5jdGlvbigpe3ZhciB0PXRoaXMuZXh0ZW5kKCk7cmV0dXJuIHQuaW5pdC5hcHBseSh0LGFyZ3VtZW50cyksdH0saW5pdDpmdW5jdGlvbigpe30sbWl4SW46ZnVuY3Rpb24odCl7Zm9yKHZhciBlIGluIHQpdC5oYXNPd25Qcm9wZXJ0eShlKSYmKHRoaXNbZV09dFtlXSk7dC5oYXNPd25Qcm9wZXJ0eSgidG9TdHJpbmciKSYmKHRoaXMudG9TdHJpbmc9dC50b1N0cmluZyl9LGNsb25lOmZ1bmN0aW9uKCl7cmV0dXJuIHRoaXMuaW5pdC5wcm90b3R5cGUuZXh0ZW5kKHRoaXMpfX0sYz1zLldvcmRBcnJheT1oLmV4dGVuZCh7aW5pdDpmdW5jdGlvbih0LHIpe3Q9dGhpcy53b3Jkcz10fHxbXSx0aGlzLnNpZ0J5dGVzPXIhPWU/cjo0KnQubGVuZ3RofSx0b1N0cmluZzpmdW5jdGlvbih0KXtyZXR1cm4odHx8Zikuc3RyaW5naWZ5KHRoaXMpfSxjb25jYXQ6ZnVuY3Rpb24odCl7dmFyIGU9dGhpcy53b3JkcyxyPXQud29yZHMsbj10aGlzLnNpZ0J5dGVzLGk9dC5zaWdCeXRlcztpZih0aGlzLmNsYW1wKCksbiU0KWZvcih2YXIgYT0wO2E8aTthKyspe3ZhciBvPXJbYT4+PjJdPj4+MjQtYSU0KjgmMjU1O2VbbithPj4+Ml18PW88PDI0LShuK2EpJTQqOH1lbHNlIGZvcihhPTA7YTxpO2ErPTQpZVtuK2E+Pj4yXT1yW2E+Pj4yXTtyZXR1cm4gdGhpcy5zaWdCeXRlcys9aSx0aGlzfSxjbGFtcDpmdW5jdGlvbigpe3ZhciBlPXRoaXMud29yZHMscj10aGlzLnNpZ0J5dGVzO2Vbcj4+PjJdJj00Mjk0OTY3Mjk1PDwzMi1yJTQqOCxlLmxlbmd0aD10LmNlaWwoci80KX0sY2xvbmU6ZnVuY3Rpb24oKXt2YXIgdD1oLmNsb25lLmNhbGwodGhpcyk7cmV0dXJuIHQud29yZHM9dGhpcy53b3Jkcy5zbGljZSgwKSx0fSxyYW5kb206ZnVuY3Rpb24odCl7Zm9yKHZhciBlPVtdLHI9MDtyPHQ7cis9NCllLnB1c2gobigpKTtyZXR1cm4gbmV3IGMuaW5pdChlLHQpfX0pLHU9by5lbmM9e30sZj11LkhleD17c3RyaW5naWZ5OmZ1bmN0aW9uKHQpe2Zvcih2YXIgZT10LndvcmRzLHI9dC5zaWdCeXRlcyxuPVtdLGk9MDtpPHI7aSsrKXt2YXIgYT1lW2k+Pj4yXT4+PjI0LWklNCo4JjI1NTtuLnB1c2goKGE+Pj40KS50b1N0cmluZygxNikpLG4ucHVzaCgoMTUmYSkudG9TdHJpbmcoMTYpKX1yZXR1cm4gbi5qb2luKCIiKX0scGFyc2U6ZnVuY3Rpb24odCl7Zm9yKHZhciBlPXQubGVuZ3RoLHI9W10sbj0wO248ZTtuKz0yKXJbbj4+PjNdfD1wYXJzZUludCh0LnN1YnN0cihuLDIpLDE2KTw8MjQtbiU4KjQ7cmV0dXJuIG5ldyBjLmluaXQocixlLzIpfX0sZD11LkxhdGluMT17c3RyaW5naWZ5OmZ1bmN0aW9uKHQpe2Zvcih2YXIgZT10LndvcmRzLHI9dC5zaWdCeXRlcyxuPVtdLGk9MDtpPHI7aSsrKXt2YXIgYT1lW2k+Pj4yXT4+PjI0LWklNCo4JjI1NTtuLnB1c2goU3RyaW5nLmZyb21DaGFyQ29kZShhKSl9cmV0dXJuIG4uam9pbigiIil9LHBhcnNlOmZ1bmN0aW9uKHQpe2Zvcih2YXIgZT10Lmxlbmd0aCxyPVtdLG49MDtuPGU7bisrKXJbbj4+PjJdfD0oMjU1JnQuY2hhckNvZGVBdChuKSk8PDI0LW4lNCo4O3JldHVybiBuZXcgYy5pbml0KHIsZSl9fSxfPXUuVXRmOD17c3RyaW5naWZ5OmZ1bmN0aW9uKHQpe3RyeXtyZXR1cm4gZGVjb2RlVVJJQ29tcG9uZW50KGVzY2FwZShkLnN0cmluZ2lmeSh0KSkpfWNhdGNoKHQpe3Rocm93IG5ldyBFcnJvcigiTWFsZm9ybWVkIFVURi04IGRhdGEiKX19LHBhcnNlOmZ1bmN0aW9uKHQpe3JldHVybiBkLnBhcnNlKHVuZXNjYXBlKGVuY29kZVVSSUNvbXBvbmVudCh0KSkpfX0scD1zLkJ1ZmZlcmVkQmxvY2tBbGdvcml0aG09aC5leHRlbmQoe3Jlc2V0OmZ1bmN0aW9uKCl7dGhpcy5fZGF0YT1uZXcgYy5pbml0LHRoaXMuX25EYXRhQnl0ZXM9MH0sX2FwcGVuZDpmdW5jdGlvbih0KXsic3RyaW5nIj09dHlwZW9mIHQmJih0PV8ucGFyc2UodCkpLHRoaXMuX2RhdGEuY29uY2F0KHQpLHRoaXMuX25EYXRhQnl0ZXMrPXQuc2lnQnl0ZXN9LF9wcm9jZXNzOmZ1bmN0aW9uKGUpe3ZhciByLG49dGhpcy5fZGF0YSxpPW4ud29yZHMsYT1uLnNpZ0J5dGVzLG89dGhpcy5ibG9ja1NpemUscz1hLyg0Km8pLGg9KHM9ZT90LmNlaWwocyk6dC5tYXgoKDB8cyktdGhpcy5fbWluQnVmZmVyU2l6ZSwwKSkqbyxsPXQubWluKDQqaCxhKTtpZihoKXtmb3IodmFyIHU9MDt1PGg7dSs9byl0aGlzLl9kb1Byb2Nlc3NCbG9jayhpLHUpO3I9aS5zcGxpY2UoMCxoKSxuLnNpZ0J5dGVzLT1sfXJldHVybiBuZXcgYy5pbml0KHIsbCl9LGNsb25lOmZ1bmN0aW9uKCl7dmFyIHQ9aC5jbG9uZS5jYWxsKHRoaXMpO3JldHVybiB0Ll9kYXRhPXRoaXMuX2RhdGEuY2xvbmUoKSx0fSxfbWluQnVmZmVyU2l6ZTowfSksZz0ocy5IYXNoZXI9cC5leHRlbmQoe2NmZzpoLmV4dGVuZCgpLGluaXQ6ZnVuY3Rpb24odCl7dGhpcy5jZmc9dGhpcy5jZmcuZXh0ZW5kKHQpLHRoaXMucmVzZXQoKX0scmVzZXQ6ZnVuY3Rpb24oKXtwLnJlc2V0LmNhbGwodGhpcyksdGhpcy5fZG9SZXNldCgpfSx1cGRhdGU6ZnVuY3Rpb24odCl7cmV0dXJuIHRoaXMuX2FwcGVuZCh0KSx0aGlzLl9wcm9jZXNzKCksdGhpc30sZmluYWxpemU6ZnVuY3Rpb24odCl7cmV0dXJuIHQmJnRoaXMuX2FwcGVuZCh0KSx0aGlzLl9kb0ZpbmFsaXplKCl9LGJsb2NrU2l6ZToxNixfY3JlYXRlSGVscGVyOmZ1bmN0aW9uKHQpe3JldHVybiBmdW5jdGlvbihlLHIpe3JldHVybiBuZXcgdC5pbml0KHIpLmZpbmFsaXplKGUpfX0sX2NyZWF0ZUhtYWNIZWxwZXI6ZnVuY3Rpb24odCl7cmV0dXJuIGZ1bmN0aW9uKGUscil7cmV0dXJuIG5ldyBnLkhNQUMuaW5pdCh0LHIpLmZpbmFsaXplKGUpfX19KSxvLmFsZ289e30pO3JldHVybiBvfShNYXRoKSxyKX0pKSxmPW8oKGZ1bmN0aW9uKHQsZSl7dmFyIHI7dC5leHBvcnRzPShyPXUsZnVuY3Rpb24oKXt2YXIgdD1yLGU9dC5saWIuV29yZEFycmF5O2Z1bmN0aW9uIG4odCxyLG4pe2Zvcih2YXIgaT1bXSxhPTAsbz0wO288cjtvKyspaWYobyU0KXt2YXIgcz1uW3QuY2hhckNvZGVBdChvLTEpXTw8byU0KjJ8blt0LmNoYXJDb2RlQXQobyldPj4+Ni1vJTQqMjtpW2E+Pj4yXXw9czw8MjQtYSU0KjgsYSsrfXJldHVybiBlLmNyZWF0ZShpLGEpfXQuZW5jLkJhc2U2ND17c3RyaW5naWZ5OmZ1bmN0aW9uKHQpe3ZhciBlPXQud29yZHMscj10LnNpZ0J5dGVzLG49dGhpcy5fbWFwO3QuY2xhbXAoKTtmb3IodmFyIGk9W10sYT0wO2E8cjthKz0zKWZvcih2YXIgbz0oZVthPj4+Ml0+Pj4yNC1hJTQqOCYyNTUpPDwxNnwoZVthKzE+Pj4yXT4+PjI0LShhKzEpJTQqOCYyNTUpPDw4fGVbYSsyPj4+Ml0+Pj4yNC0oYSsyKSU0KjgmMjU1LHM9MDtzPDQmJmErLjc1KnM8cjtzKyspaS5wdXNoKG4uY2hhckF0KG8+Pj42KigzLXMpJjYzKSk7dmFyIGg9bi5jaGFyQXQoNjQpO2lmKGgpZm9yKDtpLmxlbmd0aCU0OylpLnB1c2goaCk7cmV0dXJuIGkuam9pbigiIil9LHBhcnNlOmZ1bmN0aW9uKHQpe3ZhciBlPXQubGVuZ3RoLHI9dGhpcy5fbWFwLGk9dGhpcy5fcmV2ZXJzZU1hcDtpZighaSl7aT10aGlzLl9yZXZlcnNlTWFwPVtdO2Zvcih2YXIgYT0wO2E8ci5sZW5ndGg7YSsrKWlbci5jaGFyQ29kZUF0KGEpXT1hfXZhciBvPXIuY2hhckF0KDY0KTtpZihvKXt2YXIgcz10LmluZGV4T2Yobyk7LTEhPT1zJiYoZT1zKX1yZXR1cm4gbih0LGUsaSl9LF9tYXA6IkFCQ0RFRkdISUpLTE1OT1BRUlNUVVZXWFlaYWJjZGVmZ2hpamtsbW5vcHFyc3R1dnd4eXowMTIzNDU2Nzg5Ky89In19KCksci5lbmMuQmFzZTY0KX0pKSxkPShvKChmdW5jdGlvbih0LGUpe3ZhciByO3QuZXhwb3J0cz0ocj11LGZ1bmN0aW9uKHQpe3ZhciBlPXIsbj1lLmxpYixpPW4uV29yZEFycmF5LGE9bi5IYXNoZXIsbz1lLmFsZ28scz1bXTshZnVuY3Rpb24oKXtmb3IodmFyIGU9MDtlPDY0O2UrKylzW2VdPTQyOTQ5NjcyOTYqdC5hYnModC5zaW4oZSsxKSl8MH0oKTt2YXIgaD1vLk1ENT1hLmV4dGVuZCh7X2RvUmVzZXQ6ZnVuY3Rpb24oKXt0aGlzLl9oYXNoPW5ldyBpLmluaXQoWzE3MzI1ODQxOTMsNDAyMzIzMzQxNywyNTYyMzgzMTAyLDI3MTczMzg3OF0pfSxfZG9Qcm9jZXNzQmxvY2s6ZnVuY3Rpb24odCxlKXtmb3IodmFyIHI9MDtyPDE2O3IrKyl7dmFyIG49ZStyLGk9dFtuXTt0W25dPTE2NzExOTM1JihpPDw4fGk+Pj4yNCl8NDI3ODI1NTM2MCYoaTw8MjR8aT4+PjgpfXZhciBhPXRoaXMuX2hhc2gud29yZHMsbz10W2UrMF0saD10W2UrMV0sZD10W2UrMl0sXz10W2UrM10scD10W2UrNF0sZz10W2UrNV0sdj10W2UrNl0seT10W2UrN10sbT10W2UrOF0sdz10W2UrOV0sYj10W2UrMTBdLGs9dFtlKzExXSx4PXRbZSsxMl0sej10W2UrMTNdLEI9dFtlKzE0XSxBPXRbZSsxNV0sUz1hWzBdLEU9YVsxXSxDPWFbMl0sRD1hWzNdO1M9YyhTLEUsQyxELG8sNyxzWzBdKSxEPWMoRCxTLEUsQyxoLDEyLHNbMV0pLEM9YyhDLEQsUyxFLGQsMTcsc1syXSksRT1jKEUsQyxELFMsXywyMixzWzNdKSxTPWMoUyxFLEMsRCxwLDcsc1s0XSksRD1jKEQsUyxFLEMsZywxMixzWzVdKSxDPWMoQyxELFMsRSx2LDE3LHNbNl0pLEU9YyhFLEMsRCxTLHksMjIsc1s3XSksUz1jKFMsRSxDLEQsbSw3LHNbOF0pLEQ9YyhELFMsRSxDLHcsMTIsc1s5XSksQz1jKEMsRCxTLEUsYiwxNyxzWzEwXSksRT1jKEUsQyxELFMsaywyMixzWzExXSksUz1jKFMsRSxDLEQseCw3LHNbMTJdKSxEPWMoRCxTLEUsQyx6LDEyLHNbMTNdKSxDPWMoQyxELFMsRSxCLDE3LHNbMTRdKSxTPWwoUyxFPWMoRSxDLEQsUyxBLDIyLHNbMTVdKSxDLEQsaCw1LHNbMTZdKSxEPWwoRCxTLEUsQyx2LDksc1sxN10pLEM9bChDLEQsUyxFLGssMTQsc1sxOF0pLEU9bChFLEMsRCxTLG8sMjAsc1sxOV0pLFM9bChTLEUsQyxELGcsNSxzWzIwXSksRD1sKEQsUyxFLEMsYiw5LHNbMjFdKSxDPWwoQyxELFMsRSxBLDE0LHNbMjJdKSxFPWwoRSxDLEQsUyxwLDIwLHNbMjNdKSxTPWwoUyxFLEMsRCx3LDUsc1syNF0pLEQ9bChELFMsRSxDLEIsOSxzWzI1XSksQz1sKEMsRCxTLEUsXywxNCxzWzI2XSksRT1sKEUsQyxELFMsbSwyMCxzWzI3XSksUz1sKFMsRSxDLEQseiw1LHNbMjhdKSxEPWwoRCxTLEUsQyxkLDksc1syOV0pLEM9bChDLEQsUyxFLHksMTQsc1szMF0pLFM9dShTLEU9bChFLEMsRCxTLHgsMjAsc1szMV0pLEMsRCxnLDQsc1szMl0pLEQ9dShELFMsRSxDLG0sMTEsc1szM10pLEM9dShDLEQsUyxFLGssMTYsc1szNF0pLEU9dShFLEMsRCxTLEIsMjMsc1szNV0pLFM9dShTLEUsQyxELGgsNCxzWzM2XSksRD11KEQsUyxFLEMscCwxMSxzWzM3XSksQz11KEMsRCxTLEUseSwxNixzWzM4XSksRT11KEUsQyxELFMsYiwyMyxzWzM5XSksUz11KFMsRSxDLEQseiw0LHNbNDBdKSxEPXUoRCxTLEUsQyxvLDExLHNbNDFdKSxDPXUoQyxELFMsRSxfLDE2LHNbNDJdKSxFPXUoRSxDLEQsUyx2LDIzLHNbNDNdKSxTPXUoUyxFLEMsRCx3LDQsc1s0NF0pLEQ9dShELFMsRSxDLHgsMTEsc1s0NV0pLEM9dShDLEQsUyxFLEEsMTYsc1s0Nl0pLFM9ZihTLEU9dShFLEMsRCxTLGQsMjMsc1s0N10pLEMsRCxvLDYsc1s0OF0pLEQ9ZihELFMsRSxDLHksMTAsc1s0OV0pLEM9ZihDLEQsUyxFLEIsMTUsc1s1MF0pLEU9ZihFLEMsRCxTLGcsMjEsc1s1MV0pLFM9ZihTLEUsQyxELHgsNixzWzUyXSksRD1mKEQsUyxFLEMsXywxMCxzWzUzXSksQz1mKEMsRCxTLEUsYiwxNSxzWzU0XSksRT1mKEUsQyxELFMsaCwyMSxzWzU1XSksUz1mKFMsRSxDLEQsbSw2LHNbNTZdKSxEPWYoRCxTLEUsQyxBLDEwLHNbNTddKSxDPWYoQyxELFMsRSx2LDE1LHNbNThdKSxFPWYoRSxDLEQsUyx6LDIxLHNbNTldKSxTPWYoUyxFLEMsRCxwLDYsc1s2MF0pLEQ9ZihELFMsRSxDLGssMTAsc1s2MV0pLEM9ZihDLEQsUyxFLGQsMTUsc1s2Ml0pLEU9ZihFLEMsRCxTLHcsMjEsc1s2M10pLGFbMF09YVswXStTfDAsYVsxXT1hWzFdK0V8MCxhWzJdPWFbMl0rQ3wwLGFbM109YVszXStEfDB9LF9kb0ZpbmFsaXplOmZ1bmN0aW9uKCl7dmFyIGU9dGhpcy5fZGF0YSxyPWUud29yZHMsbj04KnRoaXMuX25EYXRhQnl0ZXMsaT04KmUuc2lnQnl0ZXM7cltpPj4+NV18PTEyODw8MjQtaSUzMjt2YXIgYT10LmZsb29yKG4vNDI5NDk2NzI5Niksbz1uO3JbMTUrKGkrNjQ+Pj45PDw0KV09MTY3MTE5MzUmKGE8PDh8YT4+PjI0KXw0Mjc4MjU1MzYwJihhPDwyNHxhPj4+OCksclsxNCsoaSs2ND4+Pjk8PDQpXT0xNjcxMTkzNSYobzw8OHxvPj4+MjQpfDQyNzgyNTUzNjAmKG88PDI0fG8+Pj44KSxlLnNpZ0J5dGVzPTQqKHIubGVuZ3RoKzEpLHRoaXMuX3Byb2Nlc3MoKTtmb3IodmFyIHM9dGhpcy5faGFzaCxoPXMud29yZHMsYz0wO2M8NDtjKyspe3ZhciBsPWhbY107aFtjXT0xNjcxMTkzNSYobDw8OHxsPj4+MjQpfDQyNzgyNTUzNjAmKGw8PDI0fGw+Pj44KX1yZXR1cm4gc30sY2xvbmU6ZnVuY3Rpb24oKXt2YXIgdD1hLmNsb25lLmNhbGwodGhpcyk7cmV0dXJuIHQuX2hhc2g9dGhpcy5faGFzaC5jbG9uZSgpLHR9fSk7ZnVuY3Rpb24gYyh0LGUscixuLGksYSxvKXt2YXIgcz10KyhlJnJ8fmUmbikraStvO3JldHVybihzPDxhfHM+Pj4zMi1hKStlfWZ1bmN0aW9uIGwodCxlLHIsbixpLGEsbyl7dmFyIHM9dCsoZSZufHImfm4pK2krbztyZXR1cm4oczw8YXxzPj4+MzItYSkrZX1mdW5jdGlvbiB1KHQsZSxyLG4saSxhLG8pe3ZhciBzPXQrKGVecl5uKStpK287cmV0dXJuKHM8PGF8cz4+PjMyLWEpK2V9ZnVuY3Rpb24gZih0LGUscixuLGksYSxvKXt2YXIgcz10KyhyXihlfH5uKSkraStvO3JldHVybihzPDxhfHM+Pj4zMi1hKStlfWUuTUQ1PWEuX2NyZWF0ZUhlbHBlcihoKSxlLkhtYWNNRDU9YS5fY3JlYXRlSG1hY0hlbHBlcihoKX0oTWF0aCksci5NRDUpfSkpLG8oKGZ1bmN0aW9uKHQsZSl7dmFyIHIsbixpLGEsbyxzLGgsYzt0LmV4cG9ydHM9KG49KHI9Yz11KS5saWIsaT1uLldvcmRBcnJheSxhPW4uSGFzaGVyLG89ci5hbGdvLHM9W10saD1vLlNIQTE9YS5leHRlbmQoe19kb1Jlc2V0OmZ1bmN0aW9uKCl7dGhpcy5faGFzaD1uZXcgaS5pbml0KFsxNzMyNTg0MTkzLDQwMjMyMzM0MTcsMjU2MjM4MzEwMiwyNzE3MzM4NzgsMzI4NTM3NzUyMF0pfSxfZG9Qcm9jZXNzQmxvY2s6ZnVuY3Rpb24odCxlKXtmb3IodmFyIHI9dGhpcy5faGFzaC53b3JkcyxuPXJbMF0saT1yWzFdLGE9clsyXSxvPXJbM10saD1yWzRdLGM9MDtjPDgwO2MrKyl7aWYoYzwxNilzW2NdPTB8dFtlK2NdO2Vsc2V7dmFyIGw9c1tjLTNdXnNbYy04XV5zW2MtMTRdXnNbYy0xNl07c1tjXT1sPDwxfGw+Pj4zMX12YXIgdT0objw8NXxuPj4+MjcpK2grc1tjXTt1Kz1jPDIwPzE1MTg1MDAyNDkrKGkmYXx+aSZvKTpjPDQwPzE4NTk3NzUzOTMrKGleYV5vKTpjPDYwPyhpJmF8aSZvfGEmbyktMTg5NDAwNzU4ODooaV5hXm8pLTg5OTQ5NzUxNCxoPW8sbz1hLGE9aTw8MzB8aT4+PjIsaT1uLG49dX1yWzBdPXJbMF0rbnwwLHJbMV09clsxXStpfDAsclsyXT1yWzJdK2F8MCxyWzNdPXJbM10rb3wwLHJbNF09cls0XStofDB9LF9kb0ZpbmFsaXplOmZ1bmN0aW9uKCl7dmFyIHQ9dGhpcy5fZGF0YSxlPXQud29yZHMscj04KnRoaXMuX25EYXRhQnl0ZXMsbj04KnQuc2lnQnl0ZXM7cmV0dXJuIGVbbj4+PjVdfD0xMjg8PDI0LW4lMzIsZVsxNCsobis2ND4+Pjk8PDQpXT1NYXRoLmZsb29yKHIvNDI5NDk2NzI5NiksZVsxNSsobis2ND4+Pjk8PDQpXT1yLHQuc2lnQnl0ZXM9NCplLmxlbmd0aCx0aGlzLl9wcm9jZXNzKCksdGhpcy5faGFzaH0sY2xvbmU6ZnVuY3Rpb24oKXt2YXIgdD1hLmNsb25lLmNhbGwodGhpcyk7cmV0dXJuIHQuX2hhc2g9dGhpcy5faGFzaC5jbG9uZSgpLHR9fSksci5TSEExPWEuX2NyZWF0ZUhlbHBlcihoKSxyLkhtYWNTSEExPWEuX2NyZWF0ZUhtYWNIZWxwZXIoaCksYy5TSEExKX0pKSxvKChmdW5jdGlvbih0LGUpe3ZhciByLG4saTt0LmV4cG9ydHM9KG49KHI9dSkubGliLkJhc2UsaT1yLmVuYy5VdGY4LHZvaWQoci5hbGdvLkhNQUM9bi5leHRlbmQoe2luaXQ6ZnVuY3Rpb24odCxlKXt0PXRoaXMuX2hhc2hlcj1uZXcgdC5pbml0LCJzdHJpbmciPT10eXBlb2YgZSYmKGU9aS5wYXJzZShlKSk7dmFyIHI9dC5ibG9ja1NpemUsbj00KnI7ZS5zaWdCeXRlcz5uJiYoZT10LmZpbmFsaXplKGUpKSxlLmNsYW1wKCk7Zm9yKHZhciBhPXRoaXMuX29LZXk9ZS5jbG9uZSgpLG89dGhpcy5faUtleT1lLmNsb25lKCkscz1hLndvcmRzLGg9by53b3JkcyxjPTA7YzxyO2MrKylzW2NdXj0xNTQ5NTU2ODI4LGhbY11ePTkwOTUyMjQ4NjthLnNpZ0J5dGVzPW8uc2lnQnl0ZXM9bix0aGlzLnJlc2V0KCl9LHJlc2V0OmZ1bmN0aW9uKCl7dmFyIHQ9dGhpcy5faGFzaGVyO3QucmVzZXQoKSx0LnVwZGF0ZSh0aGlzLl9pS2V5KX0sdXBkYXRlOmZ1bmN0aW9uKHQpe3JldHVybiB0aGlzLl9oYXNoZXIudXBkYXRlKHQpLHRoaXN9LGZpbmFsaXplOmZ1bmN0aW9uKHQpe3ZhciBlPXRoaXMuX2hhc2hlcixyPWUuZmluYWxpemUodCk7cmV0dXJuIGUucmVzZXQoKSxlLmZpbmFsaXplKHRoaXMuX29LZXkuY2xvbmUoKS5jb25jYXQocikpfX0pKSl9KSksbygoZnVuY3Rpb24odCxlKXt2YXIgcixuLGksYSxvLHMsaCxjO3QuZXhwb3J0cz0obj0ocj1jPXUpLmxpYixpPW4uQmFzZSxhPW4uV29yZEFycmF5LG89ci5hbGdvLHM9by5NRDUsaD1vLkV2cEtERj1pLmV4dGVuZCh7Y2ZnOmkuZXh0ZW5kKHtrZXlTaXplOjQsaGFzaGVyOnMsaXRlcmF0aW9uczoxfSksaW5pdDpmdW5jdGlvbih0KXt0aGlzLmNmZz10aGlzLmNmZy5leHRlbmQodCl9LGNvbXB1dGU6ZnVuY3Rpb24odCxlKXtmb3IodmFyIHIsbj10aGlzLmNmZyxpPW4uaGFzaGVyLmNyZWF0ZSgpLG89YS5jcmVhdGUoKSxzPW8ud29yZHMsaD1uLmtleVNpemUsYz1uLml0ZXJhdGlvbnM7cy5sZW5ndGg8aDspe3ImJmkudXBkYXRlKHIpLHI9aS51cGRhdGUodCkuZmluYWxpemUoZSksaS5yZXNldCgpO2Zvcih2YXIgbD0xO2w8YztsKyspcj1pLmZpbmFsaXplKHIpLGkucmVzZXQoKTtvLmNvbmNhdChyKX1yZXR1cm4gby5zaWdCeXRlcz00Kmgsb319KSxyLkV2cEtERj1mdW5jdGlvbih0LGUscil7cmV0dXJuIGguY3JlYXRlKHIpLmNvbXB1dGUodCxlKX0sYy5FdnBLREYpfSkpLG8oKGZ1bmN0aW9uKHQsZSl7dmFyIHIsbixpLGEsbyxzLGgsYyxsLGYsZCxfLHAsZyx2LHksbSx3LGIsazt0LmV4cG9ydHM9dm9pZCgocj11KS5saWIuQ2lwaGVyfHwoaT1yLGE9aS5saWIsbz1hLkJhc2Uscz1hLldvcmRBcnJheSxoPWEuQnVmZmVyZWRCbG9ja0FsZ29yaXRobSxjPWkuZW5jLGMuVXRmOCxsPWMuQmFzZTY0LGY9aS5hbGdvLkV2cEtERixkPWEuQ2lwaGVyPWguZXh0ZW5kKHtjZmc6by5leHRlbmQoKSxjcmVhdGVFbmNyeXB0b3I6ZnVuY3Rpb24odCxlKXtyZXR1cm4gdGhpcy5jcmVhdGUodGhpcy5fRU5DX1hGT1JNX01PREUsdCxlKX0sY3JlYXRlRGVjcnlwdG9yOmZ1bmN0aW9uKHQsZSl7cmV0dXJuIHRoaXMuY3JlYXRlKHRoaXMuX0RFQ19YRk9STV9NT0RFLHQsZSl9LGluaXQ6ZnVuY3Rpb24odCxlLHIpe3RoaXMuY2ZnPXRoaXMuY2ZnLmV4dGVuZChyKSx0aGlzLl94Zm9ybU1vZGU9dCx0aGlzLl9rZXk9ZSx0aGlzLnJlc2V0KCl9LHJlc2V0OmZ1bmN0aW9uKCl7aC5yZXNldC5jYWxsKHRoaXMpLHRoaXMuX2RvUmVzZXQoKX0scHJvY2VzczpmdW5jdGlvbih0KXtyZXR1cm4gdGhpcy5fYXBwZW5kKHQpLHRoaXMuX3Byb2Nlc3MoKX0sZmluYWxpemU6ZnVuY3Rpb24odCl7cmV0dXJuIHQmJnRoaXMuX2FwcGVuZCh0KSx0aGlzLl9kb0ZpbmFsaXplKCl9LGtleVNpemU6NCxpdlNpemU6NCxfRU5DX1hGT1JNX01PREU6MSxfREVDX1hGT1JNX01PREU6MixfY3JlYXRlSGVscGVyOmZ1bmN0aW9uKCl7ZnVuY3Rpb24gdCh0KXtyZXR1cm4ic3RyaW5nIj09dHlwZW9mIHQ/azp3fXJldHVybiBmdW5jdGlvbihlKXtyZXR1cm57ZW5jcnlwdDpmdW5jdGlvbihyLG4saSl7cmV0dXJuIHQobikuZW5jcnlwdChlLHIsbixpKX0sZGVjcnlwdDpmdW5jdGlvbihyLG4saSl7cmV0dXJuIHQobikuZGVjcnlwdChlLHIsbixpKX19fX0oKX0pLGEuU3RyZWFtQ2lwaGVyPWQuZXh0ZW5kKHtfZG9GaW5hbGl6ZTpmdW5jdGlvbigpe3JldHVybiB0aGlzLl9wcm9jZXNzKCEwKX0sYmxvY2tTaXplOjF9KSxfPWkubW9kZT17fSxwPWEuQmxvY2tDaXBoZXJNb2RlPW8uZXh0ZW5kKHtjcmVhdGVFbmNyeXB0b3I6ZnVuY3Rpb24odCxlKXtyZXR1cm4gdGhpcy5FbmNyeXB0b3IuY3JlYXRlKHQsZSl9LGNyZWF0ZURlY3J5cHRvcjpmdW5jdGlvbih0LGUpe3JldHVybiB0aGlzLkRlY3J5cHRvci5jcmVhdGUodCxlKX0saW5pdDpmdW5jdGlvbih0LGUpe3RoaXMuX2NpcGhlcj10LHRoaXMuX2l2PWV9fSksZz1fLkNCQz1mdW5jdGlvbigpe3ZhciB0PXAuZXh0ZW5kKCk7ZnVuY3Rpb24gZSh0LGUscil7dmFyIGksYT10aGlzLl9pdjthPyhpPWEsdGhpcy5faXY9bik6aT10aGlzLl9wcmV2QmxvY2s7Zm9yKHZhciBvPTA7bzxyO28rKyl0W2Urb11ePWlbb119cmV0dXJuIHQuRW5jcnlwdG9yPXQuZXh0ZW5kKHtwcm9jZXNzQmxvY2s6ZnVuY3Rpb24odCxyKXt2YXIgbj10aGlzLl9jaXBoZXIsaT1uLmJsb2NrU2l6ZTtlLmNhbGwodGhpcyx0LHIsaSksbi5lbmNyeXB0QmxvY2sodCxyKSx0aGlzLl9wcmV2QmxvY2s9dC5zbGljZShyLHIraSl9fSksdC5EZWNyeXB0b3I9dC5leHRlbmQoe3Byb2Nlc3NCbG9jazpmdW5jdGlvbih0LHIpe3ZhciBuPXRoaXMuX2NpcGhlcixpPW4uYmxvY2tTaXplLGE9dC5zbGljZShyLHIraSk7bi5kZWNyeXB0QmxvY2sodCxyKSxlLmNhbGwodGhpcyx0LHIsaSksdGhpcy5fcHJldkJsb2NrPWF9fSksdH0oKSx2PShpLnBhZD17fSkuUGtjczc9e3BhZDpmdW5jdGlvbih0LGUpe2Zvcih2YXIgcj00KmUsbj1yLXQuc2lnQnl0ZXMlcixpPW48PDI0fG48PDE2fG48PDh8bixhPVtdLG89MDtvPG47bys9NClhLnB1c2goaSk7dmFyIGg9cy5jcmVhdGUoYSxuKTt0LmNvbmNhdChoKX0sdW5wYWQ6ZnVuY3Rpb24odCl7dmFyIGU9MjU1JnQud29yZHNbdC5zaWdCeXRlcy0xPj4+Ml07dC5zaWdCeXRlcy09ZX19LGEuQmxvY2tDaXBoZXI9ZC5leHRlbmQoe2NmZzpkLmNmZy5leHRlbmQoe21vZGU6ZyxwYWRkaW5nOnZ9KSxyZXNldDpmdW5jdGlvbigpe3ZhciB0O2QucmVzZXQuY2FsbCh0aGlzKTt2YXIgZT10aGlzLmNmZyxyPWUuaXYsbj1lLm1vZGU7dGhpcy5feGZvcm1Nb2RlPT10aGlzLl9FTkNfWEZPUk1fTU9ERT90PW4uY3JlYXRlRW5jcnlwdG9yOih0PW4uY3JlYXRlRGVjcnlwdG9yLHRoaXMuX21pbkJ1ZmZlclNpemU9MSksdGhpcy5fbW9kZSYmdGhpcy5fbW9kZS5fX2NyZWF0b3I9PXQ/dGhpcy5fbW9kZS5pbml0KHRoaXMsciYmci53b3Jkcyk6KHRoaXMuX21vZGU9dC5jYWxsKG4sdGhpcyxyJiZyLndvcmRzKSx0aGlzLl9tb2RlLl9fY3JlYXRvcj10KX0sX2RvUHJvY2Vzc0Jsb2NrOmZ1bmN0aW9uKHQsZSl7dGhpcy5fbW9kZS5wcm9jZXNzQmxvY2sodCxlKX0sX2RvRmluYWxpemU6ZnVuY3Rpb24oKXt2YXIgdCxlPXRoaXMuY2ZnLnBhZGRpbmc7cmV0dXJuIHRoaXMuX3hmb3JtTW9kZT09dGhpcy5fRU5DX1hGT1JNX01PREU/KGUucGFkKHRoaXMuX2RhdGEsdGhpcy5ibG9ja1NpemUpLHQ9dGhpcy5fcHJvY2VzcyghMCkpOih0PXRoaXMuX3Byb2Nlc3MoITApLGUudW5wYWQodCkpLHR9LGJsb2NrU2l6ZTo0fSkseT1hLkNpcGhlclBhcmFtcz1vLmV4dGVuZCh7aW5pdDpmdW5jdGlvbih0KXt0aGlzLm1peEluKHQpfSx0b1N0cmluZzpmdW5jdGlvbih0KXtyZXR1cm4odHx8dGhpcy5mb3JtYXR0ZXIpLnN0cmluZ2lmeSh0aGlzKX19KSxtPShpLmZvcm1hdD17fSkuT3BlblNTTD17c3RyaW5naWZ5OmZ1bmN0aW9uKHQpe3ZhciBlPXQuY2lwaGVydGV4dCxyPXQuc2FsdDtyZXR1cm4ocj9zLmNyZWF0ZShbMTM5ODg5MzY4NCwxNzAxMDc2ODMxXSkuY29uY2F0KHIpLmNvbmNhdChlKTplKS50b1N0cmluZyhsKX0scGFyc2U6ZnVuY3Rpb24odCl7dmFyIGUscj1sLnBhcnNlKHQpLG49ci53b3JkcztyZXR1cm4gMTM5ODg5MzY4ND09blswXSYmMTcwMTA3NjgzMT09blsxXSYmKGU9cy5jcmVhdGUobi5zbGljZSgyLDQpKSxuLnNwbGljZSgwLDQpLHIuc2lnQnl0ZXMtPTE2KSx5LmNyZWF0ZSh7Y2lwaGVydGV4dDpyLHNhbHQ6ZX0pfX0sdz1hLlNlcmlhbGl6YWJsZUNpcGhlcj1vLmV4dGVuZCh7Y2ZnOm8uZXh0ZW5kKHtmb3JtYXQ6bX0pLGVuY3J5cHQ6ZnVuY3Rpb24odCxlLHIsbil7bj10aGlzLmNmZy5leHRlbmQobik7dmFyIGk9dC5jcmVhdGVFbmNyeXB0b3IocixuKSxhPWkuZmluYWxpemUoZSksbz1pLmNmZztyZXR1cm4geS5jcmVhdGUoe2NpcGhlcnRleHQ6YSxrZXk6cixpdjpvLml2LGFsZ29yaXRobTp0LG1vZGU6by5tb2RlLHBhZGRpbmc6by5wYWRkaW5nLGJsb2NrU2l6ZTp0LmJsb2NrU2l6ZSxmb3JtYXR0ZXI6bi5mb3JtYXR9KX0sZGVjcnlwdDpmdW5jdGlvbih0LGUscixuKXtyZXR1cm4gbj10aGlzLmNmZy5leHRlbmQobiksZT10aGlzLl9wYXJzZShlLG4uZm9ybWF0KSx0LmNyZWF0ZURlY3J5cHRvcihyLG4pLmZpbmFsaXplKGUuY2lwaGVydGV4dCl9LF9wYXJzZTpmdW5jdGlvbih0LGUpe3JldHVybiJzdHJpbmciPT10eXBlb2YgdD9lLnBhcnNlKHQsdGhpcyk6dH19KSxiPShpLmtkZj17fSkuT3BlblNTTD17ZXhlY3V0ZTpmdW5jdGlvbih0LGUscixuKXtufHwobj1zLnJhbmRvbSg4KSk7dmFyIGk9Zi5jcmVhdGUoe2tleVNpemU6ZStyfSkuY29tcHV0ZSh0LG4pLGE9cy5jcmVhdGUoaS53b3Jkcy5zbGljZShlKSw0KnIpO3JldHVybiBpLnNpZ0J5dGVzPTQqZSx5LmNyZWF0ZSh7a2V5OmksaXY6YSxzYWx0Om59KX19LGs9YS5QYXNzd29yZEJhc2VkQ2lwaGVyPXcuZXh0ZW5kKHtjZmc6dy5jZmcuZXh0ZW5kKHtrZGY6Yn0pLGVuY3J5cHQ6ZnVuY3Rpb24odCxlLHIsbil7dmFyIGk9KG49dGhpcy5jZmcuZXh0ZW5kKG4pKS5rZGYuZXhlY3V0ZShyLHQua2V5U2l6ZSx0Lml2U2l6ZSk7bi5pdj1pLml2O3ZhciBhPXcuZW5jcnlwdC5jYWxsKHRoaXMsdCxlLGkua2V5LG4pO3JldHVybiBhLm1peEluKGkpLGF9LGRlY3J5cHQ6ZnVuY3Rpb24odCxlLHIsbil7bj10aGlzLmNmZy5leHRlbmQobiksZT10aGlzLl9wYXJzZShlLG4uZm9ybWF0KTt2YXIgaT1uLmtkZi5leGVjdXRlKHIsdC5rZXlTaXplLHQuaXZTaXplLGUuc2FsdCk7cmV0dXJuIG4uaXY9aS5pdix3LmRlY3J5cHQuY2FsbCh0aGlzLHQsZSxpLmtleSxuKX19KSkpfSkpLG8oKGZ1bmN0aW9uKHQsZSl7dmFyIHI7dC5leHBvcnRzPShyPXUsZnVuY3Rpb24oKXt2YXIgdD1yLGU9dC5saWIuQmxvY2tDaXBoZXIsbj10LmFsZ28saT1bXSxhPVtdLG89W10scz1bXSxoPVtdLGM9W10sbD1bXSx1PVtdLGY9W10sZD1bXTshZnVuY3Rpb24oKXtmb3IodmFyIHQ9W10sZT0wO2U8MjU2O2UrKyl0W2VdPWU8MTI4P2U8PDE6ZTw8MV4yODM7dmFyIHI9MCxuPTA7Zm9yKGU9MDtlPDI1NjtlKyspe3ZhciBfPW5ebjw8MV5uPDwyXm48PDNebjw8NDtfPV8+Pj44XjI1NSZfXjk5LGlbcl09XyxhW19dPXI7dmFyIHA9dFtyXSxnPXRbcF0sdj10W2ddLHk9MjU3KnRbX11eMTY4NDMwMDgqXztvW3JdPXk8PDI0fHk+Pj44LHNbcl09eTw8MTZ8eT4+PjE2LGhbcl09eTw8OHx5Pj4+MjQsY1tyXT15LHk9MTY4NDMwMDkqdl42NTUzNypnXjI1NypwXjE2ODQzMDA4KnIsbFtfXT15PDwyNHx5Pj4+OCx1W19dPXk8PDE2fHk+Pj4xNixmW19dPXk8PDh8eT4+PjI0LGRbX109eSxyPyhyPXBedFt0W3Rbdl5wXV1dLG5ePXRbdFtuXV0pOnI9bj0xfX0oKTt2YXIgXz1bMCwxLDIsNCw4LDE2LDMyLDY0LDEyOCwyNyw1NF0scD1uLkFFUz1lLmV4dGVuZCh7X2RvUmVzZXQ6ZnVuY3Rpb24oKXtpZighdGhpcy5fblJvdW5kc3x8dGhpcy5fa2V5UHJpb3JSZXNldCE9PXRoaXMuX2tleSl7Zm9yKHZhciB0PXRoaXMuX2tleVByaW9yUmVzZXQ9dGhpcy5fa2V5LGU9dC53b3JkcyxyPXQuc2lnQnl0ZXMvNCxuPTQqKCh0aGlzLl9uUm91bmRzPXIrNikrMSksYT10aGlzLl9rZXlTY2hlZHVsZT1bXSxvPTA7bzxuO28rKylvPHI/YVtvXT1lW29dOihjPWFbby0xXSxvJXI/cj42JiZvJXI9PTQmJihjPWlbYz4+PjI0XTw8MjR8aVtjPj4+MTYmMjU1XTw8MTZ8aVtjPj4+OCYyNTVdPDw4fGlbMjU1JmNdKTooYz1pWyhjPWM8PDh8Yz4+PjI0KT4+PjI0XTw8MjR8aVtjPj4+MTYmMjU1XTw8MTZ8aVtjPj4+OCYyNTVdPDw4fGlbMjU1JmNdLGNePV9bby9yfDBdPDwyNCksYVtvXT1hW28tcl1eYyk7Zm9yKHZhciBzPXRoaXMuX2ludktleVNjaGVkdWxlPVtdLGg9MDtoPG47aCsrKXtpZihvPW4taCxoJTQpdmFyIGM9YVtvXTtlbHNlIGM9YVtvLTRdO3NbaF09aDw0fHxvPD00P2M6bFtpW2M+Pj4yNF1dXnVbaVtjPj4+MTYmMjU1XV1eZltpW2M+Pj44JjI1NV1dXmRbaVsyNTUmY11dfX19LGVuY3J5cHRCbG9jazpmdW5jdGlvbih0LGUpe3RoaXMuX2RvQ3J5cHRCbG9jayh0LGUsdGhpcy5fa2V5U2NoZWR1bGUsbyxzLGgsYyxpKX0sZGVjcnlwdEJsb2NrOmZ1bmN0aW9uKHQsZSl7dmFyIHI9dFtlKzFdO3RbZSsxXT10W2UrM10sdFtlKzNdPXIsdGhpcy5fZG9DcnlwdEJsb2NrKHQsZSx0aGlzLl9pbnZLZXlTY2hlZHVsZSxsLHUsZixkLGEpLHI9dFtlKzFdLHRbZSsxXT10W2UrM10sdFtlKzNdPXJ9LF9kb0NyeXB0QmxvY2s6ZnVuY3Rpb24odCxlLHIsbixpLGEsbyxzKXtmb3IodmFyIGg9dGhpcy5fblJvdW5kcyxjPXRbZV1eclswXSxsPXRbZSsxXV5yWzFdLHU9dFtlKzJdXnJbMl0sZj10W2UrM11eclszXSxkPTQsXz0xO188aDtfKyspe3ZhciBwPW5bYz4+PjI0XV5pW2w+Pj4xNiYyNTVdXmFbdT4+PjgmMjU1XV5vWzI1NSZmXV5yW2QrK10sZz1uW2w+Pj4yNF1eaVt1Pj4+MTYmMjU1XV5hW2Y+Pj44JjI1NV1eb1syNTUmY11ecltkKytdLHY9blt1Pj4+MjRdXmlbZj4+PjE2JjI1NV1eYVtjPj4+OCYyNTVdXm9bMjU1JmxdXnJbZCsrXSx5PW5bZj4+PjI0XV5pW2M+Pj4xNiYyNTVdXmFbbD4+PjgmMjU1XV5vWzI1NSZ1XV5yW2QrK107Yz1wLGw9Zyx1PXYsZj15fXA9KHNbYz4+PjI0XTw8MjR8c1tsPj4+MTYmMjU1XTw8MTZ8c1t1Pj4+OCYyNTVdPDw4fHNbMjU1JmZdKV5yW2QrK10sZz0oc1tsPj4+MjRdPDwyNHxzW3U+Pj4xNiYyNTVdPDwxNnxzW2Y+Pj44JjI1NV08PDh8c1syNTUmY10pXnJbZCsrXSx2PShzW3U+Pj4yNF08PDI0fHNbZj4+PjE2JjI1NV08PDE2fHNbYz4+PjgmMjU1XTw8OHxzWzI1NSZsXSlecltkKytdLHk9KHNbZj4+PjI0XTw8MjR8c1tjPj4+MTYmMjU1XTw8MTZ8c1tsPj4+OCYyNTVdPDw4fHNbMjU1JnVdKV5yW2QrK10sdFtlXT1wLHRbZSsxXT1nLHRbZSsyXT12LHRbZSszXT15fSxrZXlTaXplOjh9KTt0LkFFUz1lLl9jcmVhdGVIZWxwZXIocCl9KCksci5BRVMpfSkpKSxfPW8oKGZ1bmN0aW9uKHQsZSl7dmFyIHI7dC5leHBvcnRzPShyPXUsZnVuY3Rpb24odCl7dmFyIGU9cixuPWUubGliLGk9bi5Xb3JkQXJyYXksYT1uLkhhc2hlcixvPWUuYWxnbyxzPVtdLGg9W107IWZ1bmN0aW9uKCl7ZnVuY3Rpb24gZShlKXtmb3IodmFyIHI9dC5zcXJ0KGUpLG49MjtuPD1yO24rKylpZighKGUlbikpcmV0dXJuITE7cmV0dXJuITB9ZnVuY3Rpb24gcih0KXtyZXR1cm4gNDI5NDk2NzI5NioodC0oMHx0KSl8MH1mb3IodmFyIG49MixpPTA7aTw2NDspZShuKSYmKGk8OCYmKHNbaV09cih0LnBvdyhuLC41KSkpLGhbaV09cih0LnBvdyhuLDEvMykpLGkrKyksbisrfSgpO3ZhciBjPVtdLGw9by5TSEEyNTY9YS5leHRlbmQoe19kb1Jlc2V0OmZ1bmN0aW9uKCl7dGhpcy5faGFzaD1uZXcgaS5pbml0KHMuc2xpY2UoMCkpfSxfZG9Qcm9jZXNzQmxvY2s6ZnVuY3Rpb24odCxlKXtmb3IodmFyIHI9dGhpcy5faGFzaC53b3JkcyxuPXJbMF0saT1yWzFdLGE9clsyXSxvPXJbM10scz1yWzRdLGw9cls1XSx1PXJbNl0sZj1yWzddLGQ9MDtkPDY0O2QrKyl7aWYoZDwxNiljW2RdPTB8dFtlK2RdO2Vsc2V7dmFyIF89Y1tkLTE1XSxwPShfPDwyNXxfPj4+NyleKF88PDE0fF8+Pj4xOCleXz4+PjMsZz1jW2QtMl0sdj0oZzw8MTV8Zz4+PjE3KV4oZzw8MTN8Zz4+PjE5KV5nPj4+MTA7Y1tkXT1wK2NbZC03XSt2K2NbZC0xNl19dmFyIHk9biZpXm4mYV5pJmEsbT0objw8MzB8bj4+PjIpXihuPDwxOXxuPj4+MTMpXihuPDwxMHxuPj4+MjIpLHc9ZisoKHM8PDI2fHM+Pj42KV4oczw8MjF8cz4+PjExKV4oczw8N3xzPj4+MjUpKSsocyZsXn5zJnUpK2hbZF0rY1tkXTtmPXUsdT1sLGw9cyxzPW8rd3wwLG89YSxhPWksaT1uLG49dysobSt5KXwwfXJbMF09clswXStufDAsclsxXT1yWzFdK2l8MCxyWzJdPXJbMl0rYXwwLHJbM109clszXStvfDAscls0XT1yWzRdK3N8MCxyWzVdPXJbNV0rbHwwLHJbNl09cls2XSt1fDAscls3XT1yWzddK2Z8MH0sX2RvRmluYWxpemU6ZnVuY3Rpb24oKXt2YXIgZT10aGlzLl9kYXRhLHI9ZS53b3JkcyxuPTgqdGhpcy5fbkRhdGFCeXRlcyxpPTgqZS5zaWdCeXRlcztyZXR1cm4gcltpPj4+NV18PTEyODw8MjQtaSUzMixyWzE0KyhpKzY0Pj4+OTw8NCldPXQuZmxvb3Iobi80Mjk0OTY3Mjk2KSxyWzE1KyhpKzY0Pj4+OTw8NCldPW4sZS5zaWdCeXRlcz00KnIubGVuZ3RoLHRoaXMuX3Byb2Nlc3MoKSx0aGlzLl9oYXNofSxjbG9uZTpmdW5jdGlvbigpe3ZhciB0PWEuY2xvbmUuY2FsbCh0aGlzKTtyZXR1cm4gdC5faGFzaD10aGlzLl9oYXNoLmNsb25lKCksdH19KTtlLlNIQTI1Nj1hLl9jcmVhdGVIZWxwZXIobCksZS5IbWFjU0hBMjU2PWEuX2NyZWF0ZUhtYWNIZWxwZXIobCl9KE1hdGgpLHIuU0hBMjU2KX0pKSxwPW8oKGZ1bmN0aW9uKHQsZSl7dmFyIHI7dC5leHBvcnRzPShyPXUsZnVuY3Rpb24oKXtpZigiZnVuY3Rpb24iPT10eXBlb2YgQXJyYXlCdWZmZXIpe3ZhciB0PXIubGliLldvcmRBcnJheSxlPXQuaW5pdDsodC5pbml0PWZ1bmN0aW9uKHQpe2lmKHQgaW5zdGFuY2VvZiBBcnJheUJ1ZmZlciYmKHQ9bmV3IFVpbnQ4QXJyYXkodCkpLCh0IGluc3RhbmNlb2YgSW50OEFycmF5fHwidW5kZWZpbmVkIiE9dHlwZW9mIFVpbnQ4Q2xhbXBlZEFycmF5JiZ0IGluc3RhbmNlb2YgVWludDhDbGFtcGVkQXJyYXl8fHQgaW5zdGFuY2VvZiBJbnQxNkFycmF5fHx0IGluc3RhbmNlb2YgVWludDE2QXJyYXl8fHQgaW5zdGFuY2VvZiBJbnQzMkFycmF5fHx0IGluc3RhbmNlb2YgVWludDMyQXJyYXl8fHQgaW5zdGFuY2VvZiBGbG9hdDMyQXJyYXl8fHQgaW5zdGFuY2VvZiBGbG9hdDY0QXJyYXkpJiYodD1uZXcgVWludDhBcnJheSh0LmJ1ZmZlcix0LmJ5dGVPZmZzZXQsdC5ieXRlTGVuZ3RoKSksdCBpbnN0YW5jZW9mIFVpbnQ4QXJyYXkpe2Zvcih2YXIgcj10LmJ5dGVMZW5ndGgsbj1bXSxpPTA7aTxyO2krKyluW2k+Pj4yXXw9dFtpXTw8MjQtaSU0Kjg7ZS5jYWxsKHRoaXMsbixyKX1lbHNlIGUuYXBwbHkodGhpcyxhcmd1bWVudHMpfSkucHJvdG90eXBlPXR9fSgpLHIubGliLldvcmRBcnJheSl9KSksZz1vKChmdW5jdGlvbih0LGUpe3QuZXhwb3J0cz11LkhtYWNTSEEyNTZ9KSk7b25tZXNzYWdlPWZ1bmN0aW9uKHQpe3ZhciBlPXQuZGF0YSxuPWUuam9iLGE9ZS5jbWQsbz1lLnNlcnZlcixzPWUucGF0aCxoPWUuYXBpS2V5LGw9ZS5idWZmZXIsdT1lLmtleUJhc2U2NCx2PWUuZ3ppcCx5PWUucmVmZXJyZXIsbT1lLmlkLHc9ZS5hcHBJZCxiPWUucGVyc2lzdGVudElkLGs9ZS5kZWJ1Zyx4PWUud2hhdDtzd2l0Y2goYSl7Y2FzZSJ1cGxvYWRFbmNyeXB0ZWQiOiFmdW5jdGlvbih0KXtDLmFwcGx5KHRoaXMsYXJndW1lbnRzKX0ocyk7YnJlYWs7ZGVmYXVsdDpjb25zb2xlLmVycm9yKCJVbmtub3duIHdvcmtlciBjb21tYW5kIixhKX1mdW5jdGlvbiB6KHQpe3ZhciBlPURhdGUubm93KCkscj1wLmNyZWF0ZSh0KSxuPWYucGFyc2UodSksYT1nKHIsbiksbz1wLnJhbmRvbSgxNikscz1kLmVuY3J5cHQocixuLHtpdjpvfSkuY2lwaGVydGV4dCxoPW5ldyBBcnJheUJ1ZmZlcig0K28uc2lnQnl0ZXMrYS5zaWdCeXRlcytzLnNpZ0J5dGVzKSxjPW5ldyBEYXRhVmlldyhoKSxsPTA7Yy5zZXRVaW50MzIobCwxMTI5NDY4MjA5LCExKSxsKz00O2Zvcih2YXIgXz0wLHY9W28sYSxzXTtfPHYubGVuZ3RoO18rKyl7dmFyIHksdz1pKHZbX10ud29yZHMpO3RyeXtmb3Iody5zKCk7ISh5PXcubigpKS5kb25lOyl7dmFyIGI9eS52YWx1ZTtjLnNldEludDMyKGwsYiwhMSksbCs9NH19Y2F0Y2godCl7dy5lKHQpfWZpbmFsbHl7dy5mKCl9fXJldHVybiBrJiZjb25zb2xlLmxvZygiIi5jb25jYXQobSwiICIpLmNvbmNhdCh4LCIgZW5jcnlwdGVkICgiKS5jb25jYXQoaC5ieXRlTGVuZ3RoLCIgYnl0ZXMpIGluICIpLmNvbmNhdChEYXRlLm5vdygpLWUsIm1zIikpLGh9ZnVuY3Rpb24gQih0KXt2YXIgZT1EYXRlLm5vdygpLHI9Yy5kZWZsYXRlKHQse2d6aXA6ITAsbGV2ZWw6MX0pO3JldHVybiBrJiZjb25zb2xlLmxvZygiIi5jb25jYXQobSwiICIpLmNvbmNhdCh4LCIgY29tcHJlc3NlZCAoIikuY29uY2F0KHIubGVuZ3RoLCIgYnl0ZXMpIGluICIpLmNvbmNhdChEYXRlLm5vdygpLWUsIm1zIikpLHJ9ZnVuY3Rpb24gQSh0KXt2YXIgZT1EYXRlLm5vdygpLHI9XyhwLmNyZWF0ZSh0KSksbj1mLnN0cmluZ2lmeShyKS5yZXBsYWNlKC89L2csIiIpLnJlcGxhY2UoL1wrL2csIi0iKS5yZXBsYWNlKC9cLy9nLCJfIik7cmV0dXJuIGsmJmNvbnNvbGUubG9nKCIiLmNvbmNhdChtLCIgIikuY29uY2F0KHgsIiBoYXNoZWQgKCIpLmNvbmNhdCh0Lmxlbmd0aCwiIGJ5dGVzKSBpbiAiKS5jb25jYXQoRGF0ZS5ub3coKS1lLCJtcyIpKSxufWZ1bmN0aW9uIFModCl7cmV0dXJuIEUuYXBwbHkodGhpcyxhcmd1bWVudHMpfWZ1bmN0aW9uIEUoKXtyZXR1cm4oRT1yKHJlZ2VuZXJhdG9yUnVudGltZS5tYXJrKChmdW5jdGlvbiB0KGUpe3ZhciByLG4saSxhLHMsYyxsO3JldHVybiByZWdlbmVyYXRvclJ1bnRpbWUud3JhcCgoZnVuY3Rpb24odCl7Zm9yKDs7KXN3aXRjaCh0LnByZXY9dC5uZXh0KXtjYXNlIDA6aWYocj1EYXRlLm5vdygpLG49IiIuY29uY2F0KG8sIi8iKS5jb25jYXQoZSksaCl7dC5uZXh0PTQ7YnJlYWt9cmV0dXJuIHQuYWJydXB0KCJyZXR1cm4iLHt1cmw6bix1cGxvYWRVcmw6bn0pO2Nhc2UgNDpyZXR1cm4gdC5uZXh0PTYsZmV0Y2gobix7aGVhZGVyczp7IlgtQ3JvcXVldC1BdXRoIjpoLCJYLUNyb3F1ZXQtQXBwIjp3LCJYLUNyb3F1ZXQtSWQiOmJ9LHJlZmVycmVyOnl9KTtjYXNlIDY6cmV0dXJuIGk9dC5zZW50LHQubmV4dD05LGkuanNvbigpO2Nhc2UgOTppZihhPXQuc2VudCxzPWEuZmF1bHQsYz1hLnJlYWQsbD1hLndyaXRlLCFzKXt0Lm5leHQ9MTU7YnJlYWt9dGhyb3cgRXJyb3Iocy5mYXVsdHN0cmluZyk7Y2FzZSAxNTpyZXR1cm4gayYmY29uc29sZS5sb2coIiIuY29uY2F0KG0sIiAiKS5jb25jYXQoeCwiIGF1dGhvcml6ZWQgaW4gIikuY29uY2F0KERhdGUubm93KCktciwibXMiKSksdC5hYnJ1cHQoInJldHVybiIse3VybDpjLHVwbG9hZFVybDpsfSk7Y2FzZSAxNzpjYXNlImVuZCI6cmV0dXJuIHQuc3RvcCgpfX0pLHQpfSkpKSkuYXBwbHkodGhpcyxhcmd1bWVudHMpfWZ1bmN0aW9uIEMoKXtyZXR1cm4oQz1yKHJlZ2VuZXJhdG9yUnVudGltZS5tYXJrKChmdW5jdGlvbiB0KGUpe3ZhciByLGksYSxvLHMsaCxjLHUsZjtyZXR1cm4gcmVnZW5lcmF0b3JSdW50aW1lLndyYXAoKGZ1bmN0aW9uKHQpe2Zvcig7Oylzd2l0Y2godC5wcmV2PXQubmV4dCl7Y2FzZSAwOnJldHVybiB0LnByZXY9MCxyPXoodj9CKGwpOmwpLGUuaW5jbHVkZXMoIiVIQVNIJSIpJiYoZT1lLnJlcGxhY2UoIiVIQVNIJSIsQShyKSkpLHQubmV4dD01LFMoZSk7Y2FzZSA1OnJldHVybiBpPXQuc2VudCxhPWkudXBsb2FkVXJsLG89aS51cmwscz1EYXRlLm5vdygpLHQubmV4dD0xMSxmZXRjaChhLHttZXRob2Q6IlBVVCIsbW9kZToiY29ycyIsaGVhZGVyczp7IkNvbnRlbnQtVHlwZSI6ImFwcGxpY2F0aW9uL29jdGV0LXN0cmVhbSIsIlgtQ3JvcXVldC1BcHAiOncsIlgtQ3JvcXVldC1JZCI6Yn0scmVmZXJyZXI6eSxib2R5OnJ9KTtjYXNlIDExOmlmKGg9dC5zZW50LGM9aC5vayx1PWguc3RhdHVzLGY9aC5zdGF0dXNUZXh0LGMpe3QubmV4dD0xNzticmVha310aHJvdyBFcnJvcigic2VydmVyIHJldHVybmVkICIuY29uY2F0KHUsIiAiKS5jb25jYXQoZiwiIGZvciBQVVQgIikuY29uY2F0KGEpKTtjYXNlIDE3OmsmJmNvbnNvbGUubG9nKCIiLmNvbmNhdChtLCIgIikuY29uY2F0KHgsIiB1cGxvYWRlZCAoIikuY29uY2F0KHUsIikgaW4gIikuY29uY2F0KERhdGUubm93KCktcywibXMgIikuY29uY2F0KG8pKSxwb3N0TWVzc2FnZSh7am9iOm4sdXJsOm8sb2s6YyxzdGF0dXM6dSxzdGF0dXNUZXh0OmZ9KSx0Lm5leHQ9MjU7YnJlYWs7Y2FzZSAyMTp0LnByZXY9MjEsdC50MD10LmNhdGNoKDApLGsmJmNvbnNvbGUubG9nKCIiLmNvbmNhdChtLCIgdXBsb2FkIGVycm9yICIpLmNvbmNhdCh0LnQwLm1lc3NhZ2UpKSxwb3N0TWVzc2FnZSh7am9iOm4sb2s6ITEsc3RhdHVzOi0xLHN0YXR1c1RleHQ6dC50MC5tZXNzYWdlfSk7Y2FzZSAyNTpjYXNlImVuZCI6cmV0dXJuIHQuc3RvcCgpfX0pLHQsbnVsbCxbWzAsMjFdXSl9KSkpKS5hcHBseSh0aGlzLGFyZ3VtZW50cyl9fX0oKTsKCg==",Ls=null,xs=!1,function(t){return ks=ks||ws(Xs,Ls,xs),new Worker(ks,t)}),Ss="1.0.4";window.location.hostname.match(/co?de?pe?n\.io/)?console.log("Croquet "+Ss):console.log("%cCroquet%c %c"+Ss,"color:#F0493E","color:inherit","color:".concat(Ss.includes("+")?"#909":"inherit"));var Ws=!!window.location.hostname.match(/^(.*\.)?croquet\.io$/i),Ys=Ws&&window.location.pathname.startsWith("/dev/"),Cs=Ws?window.location.host:"croquet.io",Is="wss://".concat(Cs,"/reflector/v").concat(1),Ts=null;var Rs,Ks=V.nocheat,Ps=[0];var Vs=new Gs;Vs.onerror=function(t){return console.error("UploadWorker error: ".concat(t.message))};var Ms=0,Hs=new Set;function Ns(e){var n,i=S(Hs);try{var r=function(){var t=n.value;if(t.id===e){var i=t.sessionSpec;return{v:{appId:i.appId,persistentId:i.persistentId,uploadEncrypted:function(e){return t.uploadEncrypted(e)},downloadEncrypted:function(e){return t.downloadEncrypted(e)}}}}};for(i.s();!(n=i.n()).done;){var o=r();if("object"===t(o))return o.v}}catch(t){i.e(t)}finally{i.f()}return{}}function zs(t){var e,n=S(Hs);try{for(n.s();!(e=n.n()).done;){var i=e.value;if(i.id===t)return i}}catch(t){n.e(t)}finally{n.f()}return null}var js=function(){function e(){var t,n;i(this,e),t=V.dev||!1!==V.dev&&"localhost",n=V.dev||!1!==V.dev&&Ys,Ts={messages:V.has("debug","messages",!1),sends:V.has("debug","sends",!1),ticks:V.has("debug","ticks",!1),pong:V.has("debug","pong",!1),snapshot:V.has("debug","snapshot",!1),session:V.has("debug","session",!1),initsnapshot:V.has("debug","initsnapshot",t),reflector:V.has("debug","reflector",n)},this.reset()}var r,s,a,l,u,d,h,f,m,p,y,b,v,Z,X,L;return o(e,[{key:"reset",value:function(){window.ISLAND===this.island&&delete window.ISLAND,this.island=null,this.session=null,this.connection=this.connection||new Fs(this),this.networkQueue=[],this.reflectorTime=0,this.msPerTick=this.msPerTick||0,this.tickMultiplier=this.tickMultiplier||1,this.extrapolatedTimeBase=Date.now(),this.key=this.key||null,this.tove=this.tove||null,this.viewId=this.viewId||Math.floor(Math.random()*Math.pow(36,10)).toString(36),this.timeline="",this.rejoinTimeout&&clearTimeout(this.rejoinTimeout),this.rejoinTimeout=0,this.rebootSignal=null,this.sendBuffer=[],this.users=0,this.usersTotal=0,this.cpuTime=0,this.triggeringCpuTime=null,this.synced=null,this.latency=0,this.latencyHistory&&(this.latencyHistory=[]),this.localTicker&&(window.clearInterval(this.localTicker),delete this.localTicker),this.syncTimer&&(window.clearTimeout(this.syncTimer),delete this.syncTimer),this.tuttiHistory=[],this.lastAnimationEnd=0,this.animationGapCheck=[],this.rateLimitedSendTimes=[],this.rateLimitBuffer=[],this.rateLimitSoftWarned=!1,this.rateLimitBufferWarned=!1,this.rateLimitLastLogged=0,this.payloadSizeWarned=!1,oe.removeAllSubscriptionsFor(this.viewId),oe.addSubscription(this.viewId,"__views__",this.viewId,(function(t){return jt("users now ".concat(t.count))}),"oncePerFrameWhileSynced"),this.leaving||ee.showSyncWait(!0)}},{key:"checkForConnection",value:function(t){this.connection.checkForConnection(t)}},{key:"dormantDisconnect",value:function(){this.connected&&this.connection.dormantDisconnect()}},{key:"initFromSessionSpec",value:(L=n(regeneratorRuntime.mark((function t(e){var n,i,r,o,s,a,l,u,d,h,f,m,p,y,b,v,g,Z,w,X,L,x;return regeneratorRuntime.wrap((function(t){for(;;)switch(t.prev=t.next){case 0:if(n=e.name,i=e.optionsFromUrl,r=e.password,o=e.appId,s=e.viewIdDebugSuffix,a=o?"".concat(o,"/").concat(n):n,s&&(this.viewId=this.viewId.replace(/_.*$/,"")+"_"+encodeURIComponent((""+s).slice(0,16)).replace(/[^a-z0-9]/gi,(function(t){return"_".concat("%"===t?"":t.charCodeAt(0).toString(16).toUpperCase())}))),l=c({},e.options),i){u=S(i);try{for(u.s();!(d=u.n()).done;)(h=d.value)in V&&(l[h]=V[h])}catch(t){u.e(t)}finally{u.f()}}for(f={},m=0,p=["tps","hashOverride"];m<p.length;m++)(y=p[m])in V?f[y]=V[y]:y in e&&(f[y]=e[y]);return this.key=Wr(r,"",{keySize:8}),t.next=10,q(a,l,f,Ss);case 10:return b=t.sent,v=b.id,g=b.persistentId,Z=b.codeHash,w=b.computedCodeHash,t.next=17,this.encrypt(v);case 17:this.tove=t.sent,Ts.session&&console.log('Croquet session "'.concat(a,'":\n        sessionId=').concat(v).concat(o?"\n        persistentId=".concat(g):"","\n        versionId=").concat(Z===w?Z:"".concat(Z," (specified in hashOverride)\n        versionId=").concat(w," (computed)"),"\n        viewId=").concat(this.viewId)),this.eventRateLimit=e.eventRateLimit,this.eventHistoryLimit=this.eventRateLimit,this.eventMaxBundles=this.eventRateLimit,this.sessionSpec=c(c({},e),{},{options:l,name:a,id:v,persistentId:g,codeHash:Z,computedCodeHash:w}),X=this.getTickAndMultiplier(),L=X.msPerTick,x=X.multiplier,this.msPerTick=L,this.tickMultiplier=x,this.setUpActivityChecks();case 27:case"end":return t.stop()}}),t,this)}))),function(t){return L.apply(this,arguments)})},{key:"establishSession",value:(X=n(regeneratorRuntime.mark((function t(){var e,n,i,r,o,s=this;return regeneratorRuntime.wrap((function(t){for(;;)switch(t.prev=t.next){case 0:return e=this.sessionSpec,n=e.id,i=e.persistentId,r=e.codeHash,this.sessionSpec.snapshot={id:n,time:0,meta:{id:n,persistentId:i,codeHash:r,created:(new Date).toISOString()}},o=new Promise((function(t){return s.sessionSpec.sessionJoined=t})),this.checkForConnection(!1),Ts.session&&console.log(n,"waiting for SYNC"),t.next=7,o;case 7:case"end":return t.stop()}}),t,this)}))),function(){return X.apply(this,arguments)})},{key:"lastKnownTime",value:function(t){return Math.max(t.time,t.externalTime)}},{key:"syncCheck",value:(Z=n(regeneratorRuntime.mark((function t(e,n){var i,r;return regeneratorRuntime.wrap((function(t){for(;;)switch(t.prev=t.next){case 0:if(!0===this.synced){t.next=2;break}return t.abrupt("return");case 2:return t.next=4,this.sendTutti(e,"syncCheck",n);case 4:i=t.sent,(r=Object.keys(i)).length>1?console.warn("sync check failed:",r):console.log("sync check ok");case 7:case"end":return t.stop()}}),t,this)}))),function(t,e){return Z.apply(this,arguments)})},{key:"takeSnapshot",value:function(){var t=this.island.snapshot(),e=this.lastKnownTime(t),n=t.externalSeq;return t.meta=c(c({},this.sessionSpec.snapshot.meta),{},{options:this.sessionSpec.options,time:e,seq:n,date:(new Date).toISOString(),host:window.location.hostname,sdk:Ss}),delete t.meta.hash,t}},{key:"scheduleSnapshot",value:function(){if(this.connected&&this.island){var t=this.island.time,e=t-this.island.lastSnapshotPoll;if(e<5e3)Ts.snapshot&&console.log("not requesting snapshot poll (".concat(e,"ms since poll scheduled)"));else{var n=new fa(t,0,this.island.id,"handlePollForSnapshot",[]);this.sendTagged(n,{debounce:5e3,msgID:"pollForSnapshot"}),Ts.snapshot&&console.log(this.id,"requesting snapshot poll via reflector")}}}},{key:"handlePollForSnapshot",value:function(t){var e=this;if(!0===this.synced){var n,i,r,o=this.triggeringCpuTime||this.cpuTime;this.triggeringCpuTime=null,this.cpuTime=0;try{n=Wt.begin("snapshot"),i={cpuTime:o,hash:this.island.getSummaryHash(),viewId:this.viewId}}catch(t){return void Ft("snapshot",t)}finally{r=Wt.end("snapshot")-n,this.cpuTime-=r}Ts.snapshot&&console.log(this.id,"Summary hashing took ".concat(Math.ceil(r),"ms")),Promise.resolve().then((function(){return e.pollForSnapshot(t,i)}))}else this.triggeringCpuTime=null}},{key:"pollForSnapshot",value:(v=n(regeneratorRuntime.mark((function t(e,n){var i,r,o,s,a;return regeneratorRuntime.wrap((function(t){for(;;)switch(t.prev=t.next){case 0:return n.cpuTime+=Math.random(),Ts.snapshot&&console.log(this.id,"sending snapshot vote",n),t.next=4,this.sendTutti(e,"snapshot",n);case 4:if(i=t.sent,!0===this.synced){t.next=8;break}return Ts.snapshot&&console.log(this.id,"Ignoring snapshot vote during sync"),t.abrupt("return");case 8:Ts.snapshot&&console.log(this.id,"received snapshot votes",i),r=this.analyzeTally(i,"cpuTime"),o=r.numberOfGroups,s=r.shouldUpload,a=r.dissidentFlag,o>1&&console.error(this.id,"Session diverged! Snapshots fall into ".concat(o," groups")),s&&this.serveSnapshot(a);case 12:case"end":return t.stop()}}),t,this)}))),function(t,e){return v.apply(this,arguments)})},{key:"analyzeTally",value:function(t,e){var n=this,i=!1,r=null,o=[],s={},a=null;Object.keys(t).forEach((function(t,e){var i=JSON.parse(t);o.push(i);var r=i.hash;i.viewId===n.viewId&&(a=e),s[r]||(s[r]=[]),s[r].push(e)}));var c=Object.keys(s),l=c.length,u=c[0];if(l>1&&(c.sort((function(t,e){return s[e].length-s[t].length})),s[c[0]].length===s[c[1]].length&&(Ts.snapshot&&console.log(this.id,"Deciding consensus by tie-break"),u=c[0]<c[1]?c[0]:c[1])),null!==a){var d=o[a].hash,h=s[d];h.length>1&&h.sort((function(t,n){return o[t][e]-o[n][e]})),h[0]===a&&(i=!0,d!==u&&(r={groupVotes:h.length,allVotes:o.length}))}return{numberOfGroups:l,shouldUpload:i,dissidentFlag:r}}},{key:"serveSnapshot",value:function(t){var e,n,i;try{e=Wt.begin("snapshot"),i=this.takeSnapshot()}catch(t){return void Ft("snapshot",t)}finally{n=Wt.end("snapshot")-e}Ts.snapshot&&console.log(this.id,"snapshot taken in ".concat(Math.ceil(n)," ms")),this.uploadSnapshot(i,t)}},{key:"snapshotPath",value:function(t,e,n){var i=Math.ceil(t).toString().padStart(10,"0"),r=this.sessionSpec,o=r.appId,s=r.persistentId,a=r.codeHash;return r.apiKey?"apps/".concat(o,"/snap/").concat(a,"/").concat(s,".").concat(this.id,"/").concat(i,"_").concat(e,".").concat(n):"snapshots/".concat(this.id,"/").concat(i,"_").concat(e,"-").concat(n,".snap")}},{key:"hashSnapshot",value:function(t){return t.meta.hash?t.meta.hash:(t.meta.hashPromise||(t.meta.hashPromise=new Promise((function(e){var n=c({},t);delete n.meta,E(JSON.stringify(n)).then((function(n){t.meta.hash=n,delete t.meta.hashPromise,e(n)}))}))),t.meta.hashPromise)}},{key:"uploadServer",value:function(){return this.sessionSpec.apiKey?"https://api.croquet.io/sign":this.overrideServer("https://croquet.io/files/v1")}},{key:"downloadServer",value:function(){return this.overrideServer("https://files.croquet.io")}},{key:"overrideServer",value:function(t){return"string"==typeof V.files&&(t=V.files).endsWith("/")&&(t=t.slice(0,-1)),t}},{key:"uploadSnapshot",value:(b=n(regeneratorRuntime.mark((function t(e){var n,i,r,o,s,a,c,l,u,d,h=arguments;return regeneratorRuntime.wrap((function(t){for(;;)switch(t.prev=t.next){case 0:return n=h.length>1&&void 0!==h[1]?h[1]:null,t.next=3,this.hashSnapshot(e);case 3:return i=Wt.begin("snapshot"),r=JSON.stringify(e),o=Wt.end("snapshot")-i,Ts.snapshot&&console.log(this.id,"snapshot stringified (".concat(r.length," bytes) in ").concat(Math.ceil(o),"ms")),s=e.meta,a=s.time,c=s.seq,l=s.hash,u=this.connection.socket,t.prev=9,t.next=12,this.uploadEncrypted({content:r,path:this.snapshotPath(a,c,l),key:this.key,gzip:!0,debug:Ts.snapshot,what:"snapshot"});case 12:if(d=t.sent,this.connection.socket===u){t.next=16;break}return console.warn(this.id,"Controller was reset while trying to upload snapshot"),t.abrupt("return",!1);case 16:return this.announceSnapshotUrl(a,c,l,d,n),t.abrupt("return",!0);case 20:return t.prev=20,t.t0=t.catch(9),console.error(this.id,"Failed to upload snapshot"),t.abrupt("return",!1);case 24:case"end":return t.stop()}}),t,this,[[9,20]])}))),function(t){return b.apply(this,arguments)})},{key:"announceSnapshotUrl",value:function(t,e,n,i,r){if(Ts.snapshot){var o="time: ".concat(t,", seq: ").concat(e,", hash: ").concat(n);r&&(o+=", as dissident; "+JSON.stringify(r)),console.log(this.id,"sending snapshot url to reflector (".concat(o,"): ").concat(i))}try{this.connection.send(JSON.stringify({id:this.id,action:"SNAP",args:{time:t,seq:e,hash:n,url:i,dissident:r}}))}catch(t){console.error("ERROR while sending",t)}}},{key:"downloadEncrypted",value:(y=n(regeneratorRuntime.mark((function t(e){var n,i,r,o,s,a,c,l,u,d,h,f;return regeneratorRuntime.wrap((function(t){for(;;)switch(t.prev=t.next){case 0:return n=e.url,i=e.path,r=e.gzip,o=e.key,s=e.debug,a=e.json,c=e.what,n?n.startsWith("https://croquet.io/files/v1")&&(n=n.replace("https://croquet.io/files/v1","https://files.croquet.io")):n="".concat(this.downloadServer(),"/").concat(i),l=Date.now(),t.next=5,fetch(n,{method:"GET",mode:"cors",headers:{"X-Croquet-App":this.sessionSpec.appId,"X-Croquet-Id":this.sessionSpec.persistentId},referrer:ee.referrerURL()});case 5:return u=t.sent,t.next=8,u.arrayBuffer();case 8:return d=t.sent,s&&console.log(this.id,"".concat(c," fetched (").concat(d.byteLength," bytes) in ").concat(-l+(l=Date.now()),"ms")),h=this.decryptBinary(d,o),s&&console.log(this.id,"".concat(c," decrypted (").concat(h.length," bytes) in ").concat(-l+(l=Date.now()),"ms")),f=r?Zs.inflate(h):h,s&&r&&console.log(this.id,"".concat(c," inflated (").concat(f.length," bytes) in ").concat(-l+(l=Date.now()),"ms")),t.abrupt("return",a?JSON.parse((new TextDecoder).decode(f)):f);case 15:case"end":return t.stop()}}),t,this)}))),function(t){return y.apply(this,arguments)})},{key:"uploadEncrypted",value:(p=n(regeneratorRuntime.mark((function t(e){var n,i,r,o,s,a,c,l,u,d,h,f,m,p,y,b=this;return regeneratorRuntime.wrap((function(t){for(;;)switch(t.prev=t.next){case 0:return n=e.content,i=e.path,r=e.key,o=e.gzip,s=e.keep,a=e.debug,c=e.what,l="string"==typeof n?(new TextEncoder).encode(n).buffer:n,u=s?void 0:[l],d="string"==typeof r?r:kr.stringify(r),h=this.sessionSpec,f=h.apiKey,m=h.appId,p=h.persistentId,y=++Ms,t.abrupt("return",new Promise((function(t,e){Vs.postMessage({job:y,cmd:"uploadEncrypted",server:b.uploadServer(),path:i,apiKey:f,buffer:l,keyBase64:d,gzip:o,referrer:ee.referrerURL(),id:b.id,appId:m,persistentId:p,debug:a,what:c},u),Vs.addEventListener("message",(function n(i){if(y===i.data.job){var r=i.data,o=r.url,s=r.ok,a=r.status,c=r.statusText;Vs.removeEventListener("message",n),s?t(o):e(Error("".concat(a,": ").concat(c)))}}))})));case 7:case"end":return t.stop()}}),t,this)}))),function(t){return p.apply(this,arguments)})},{key:"persistentPath",value:function(t){var e=this.sessionSpec,n=e.appId,i=e.persistentId;return"apps/".concat(n,"/").concat(i,"/save/").concat(t)}},{key:"pollForPersist",value:(m=n(regeneratorRuntime.mark((function t(e,n,i,r,o){var s,a,c,l,u;return regeneratorRuntime.wrap((function(t){for(;;)switch(t.prev=t.next){case 0:if(this.synced){t.next=2;break}return t.abrupt("return");case 2:if(this.sessionSpec.appId){t.next=4;break}throw Error("Persistence API requires appId");case 4:return t.next=6,this.persistenceVoting(e,n,r,o);case 6:if(s=t.sent,a=s.shouldUpload,c=s.dissidentFlag,a){t.next=11;break}return t.abrupt("return");case 11:return t.next=13,this.uploadEncrypted({path:this.persistentPath(r),content:i,key:this.key,gzip:!0,debug:Ts.snapshot,what:"persistent data"});case 13:l=t.sent,Ts.snapshot&&(u=c?" (as dissident; ".concat(JSON.stringify(c),")"):"",console.log(this.id,"sending persistent data url to reflector".concat(u,": ").concat(l)));try{this.connection.send(JSON.stringify({id:this.id,action:"SAVE",args:{persistTime:n,url:l,dissident:c}}))}catch(t){console.error("ERROR while sending",t)}case 16:case"end":return t.stop()}}),t,this)}))),function(t,e,n,i,r){return m.apply(this,arguments)})},{key:"persistenceVoting",value:(f=n(regeneratorRuntime.mark((function t(e,n,i,r){var o,s,a,c,l,u;return regeneratorRuntime.wrap((function(t){for(;;)switch(t.prev=t.next){case 0:if(!0===this.synced){t.next=2;break}return t.abrupt("return",!1);case 2:return o={viewId:this.viewId,hash:i,ms:r+.001*Math.random()},Ts.snapshot&&console.log(this.id,"sending persistence vote for time @".concat(n),o),t.next=6,this.sendTutti(e,"persist",o);case 6:return s=t.sent,Ts.snapshot&&console.log(this.id,"received persistence votes for time @".concat(n),s),a=this.analyzeTally(s,"ms"),c=a.numberOfGroups,l=a.shouldUpload,u=a.dissidentFlag,c>1&&console.warn(this.id,"Persistence records fall into ".concat(c," groups")),t.abrupt("return",{shouldUpload:l,dissidentFlag:u});case 11:case"end":return t.stop()}}),t,this)}))),function(t,e,n,i){return f.apply(this,arguments)})},{key:"convertReflectorMessage",value:function(t){var e=this.id,n="noop",i=[];switch(t[2].what){case"users":var r=t[2],o=r.joined,s=r.left,a=r.active,c=r.total;this.users=a,this.usersTotal=c;var l=this.id,u="__views__",d={entered:o||[],exited:s||[],count:a};e=this.id,n="publishFromModelOnly",i=[l,u,d],oe.handleEvent(this.viewId+":"+u,d);break;case"tally":var h=t[2],f=h.tuttiSeq,m=h.tuttiKey,p=h.tally,y=h.tallyTarget,b=h.missingClients;(Ts.messages||Ts.snapshot)&&b&&console.log("".concat(b," ").concat(1===b?"client":"clients"," failed to participate in tally ").concat(m||f));var v=m?function(t){return t.tuttiKey===m}:function(t){return t.dummyTuttiSeq===f},Z=this.tuttiHistory.findIndex(v),w=-1!==Z&&this.tuttiHistory.splice(Z,1)[0];if(w&&w.resolve(p),y){var X={tally:p};w&&(X._local=w.payload);var L=g(y,3);e=L[0],n=L[1],i=[L[2],X]}}var x=new fa(0,0,e,n,i);t[2]=x.asState()[2]}},{key:"receive",value:(h=n(regeneratorRuntime.mark((function t(e,n){var i,r,o,s,a,c,l,u,d,h,f,m,p,y,b,v,Z,X,L,x,k,G,W,Y,C,I,T,R,K,P,V,M,H,N,z,j,F,_=this;return regeneratorRuntime.wrap((function(t){for(;;)switch(t.prev=t.next){case 0:i=this.lastReceived,this.lastReceived=this.connection.lastReceived,t.t0=e,t.next="SYNC"===t.t0?5:"RECV"===t.t0?86:"TICK"===t.t0?108:"INFO"===t.t0?116:"REQU"===t.t0?119:122;break;case 5:if(this.syncReceived=!0,this.clearSyncReceiptTimeout(),Hs.add(this),o=n.messages,s=n.url,a=n.persisted,c=n.time,l=n.seq,u=n.snapshotSeq,d=n.tove,h=n.reflector,!d||d===this.tove){t.next=19;break}if(t.prev=10,this.decrypt(d)===this.id){t.next=13;break}throw Error("wrong sessionId in tove?!");case 13:t.next=19;break;case 15:return t.prev=15,t.t1=t.catch(10),this.connection.closeConnectionWithError("SYNC",Error("failed to decrypt session secret: ".concat(t.t1.message)),4200),t.abrupt("return");case 19:if(f=n.timeline||n.reflectorSession,m=a?"persisted session":"snapshot",Ts.session&&console.log(this.id,"received SYNC from ".concat(h," reflector: time ").concat(c,", ").concat(o.length," messages, ").concat(m," ").concat(s||"<none>")),p=!!this.island)if(this.networkQueue.length=0,y=!!f&&f===this.timeline,b=o[0],v=l,Z=void 0!==u?u:b?b[1]:v,Ts.messages&&console.log(this.id,"rejoin: we have #".concat(this.island.seq," SYNC has #").concat(Z,"-#").concat(v)),y&&ha(Z,this.island.seq)&&ha(this.island.seq,v)&&c>=this.reflectorTime){if(b&&ha(b[1],this.island.seq)&&(X=this.island.seq-b[1]+1>>>0,Ts.messages&&console.log(this.id,"rejoin: discarding ".concat(X," messages #").concat(b[1],"-#").concat(this.island.seq)),o.splice(0,X)),this.sendBuffer.length>0){L=this.sendBuffer,this.sendBuffer=[],Ts.session&&console.log(this.id,"rejoin: sending ".concat(L.length," messages buffered while disconnected")),x=S(L);try{for(x.s();!(k=x.n()).done;)(0,k.value)()}catch(t){x.e(t)}finally{x.f()}}}else Ts.session&&console.log(this.id,"cannot rejoin seamlessly, rebooting model/view"),this.leave(!0),p=!1;G=this.networkQueue,this.networkQueue=[],W=S(o),t.prev=27,W.s();case 29:if((Y=W.n()).done){t.next=47;break}if("string"==typeof(C=Y.value)[2]){t.next=35;break}this.convertReflectorMessage(C),t.next=43;break;case 35:t.prev=35,C[2]=this.decryptPayload(C[2])[0],t.next=43;break;case 39:return t.prev=39,t.t2=t.catch(35),this.connection.closeConnectionWithError("SYNC",Error("failed to decrypt message: ".concat(t.t2.message)),4200),t.abrupt("return");case 43:Ts.messages&&console.log(this.id,"received in SYNC "+JSON.stringify(C)),this.networkQueue.push(C);case 45:t.next=29;break;case 47:t.next=52;break;case 49:t.prev=49,t.t3=t.catch(27),W.e(t.t3);case 52:return t.prev=52,W.f(),t.finish(52);case 55:if((r=this.networkQueue).push.apply(r,w(G)),c>this.reflectorTime&&this.timeFromReflector(c),!p){t.next=61;break}return Ts.session&&console.log(this.id,"seamless rejoin successful"),this.sessionSpec.sessionJoined(),t.abrupt("return");case 61:if(this.timeline=f||"",Ts.session&&s&&console.log("".concat(this.id," fetching ").concat(m," ").concat(s)),!s){t.next=74;break}return t.prev=64,t.next=67,this.downloadEncrypted({url:s,gzip:!0,key:this.key,debug:Ts.snapshot,json:!0,what:m});case 67:I=t.sent,t.next=74;break;case 70:return t.prev=70,t.t4=t.catch(64),this.connection.closeConnectionWithError("SYNC",Error("failed to fetch ".concat(m,": ").concat(t.t4.message)),4200),t.abrupt("return");case 74:if(this.connected){t.next=77;break}return console.log(this.id,"disconnected during SYNC"),t.abrupt("return");case 77:return a?this.install(I):(I&&(this.sessionSpec.snapshot=I),this.install()),Ts.session&&console.log("".concat(this.id," fast-forwarding from ").concat(Math.round(this.island.time))),t.next=81,new Promise((function(t){_.fastForwardHandler=function(e){_.connected&&_.island?"error"===e?t(!1):e&&_.viewId in _.island.views&&t(!0):(console.log(_.id,"disconnected during SYNC fast-forwarding"),t(!1))},Promise.resolve().then((function(){return _.stepSession("fastForward",{budget:200})}))}));case 81:return T=t.sent,delete this.fastForwardHandler,T&&Ts.session&&console.log("".concat(this.id," fast-forwarded to ").concat(Math.round(this.island.time))),T&&this.sessionSpec.sessionJoined(),t.abrupt("return");case 86:if((R=n)[1]>>>=0,"string"==typeof R[2]){t.next=94;break}Ts.messages&&console.log(this.id,"received META "+JSON.stringify(R)),this.convertReflectorMessage(R),Ts.messages&&console.log(this.id,"converted to "+JSON.stringify(R)),t.next=105;break;case 94:t.prev=94,K=this.decryptPayload(R[2]),P=g(K,3),V=P[0],M=P[1],H=P[2],R[2]=V,M===this.viewId&&this.addToStatistics(H,this.lastReceived),Ts.messages&&console.log(this.id,"received "+JSON.stringify(R)),t.next=105;break;case 101:return t.prev=101,t.t5=t.catch(94),this.connection.closeConnectionWithError("RECV",Error("failed to decrypt message: ".concat(t.t5.message)),4200),t.abrupt("return");case 105:return this.networkQueue.push(R),this.rebootSignal||(this.timeFromReflector(R[0]),this.simulateIfNeeded&&Promise.resolve().then((function(){return _.simulateIfNeeded()}))),t.abrupt("return");case 108:if(this.island){t.next=110;break}return t.abrupt("return");case 110:return N="number"==typeof n?n:n.time,Ts.ticks&&(z=i&&this.lastReceived-i-this.msPerTick*this.tickMultiplier|0,console.log(this.id,"Controller received TICK ".concat(N," ").concat(Math.abs(z)<5?"on time":z<0?"early":"late"," (").concat(z," ms)"))),this.timeFromReflector(N),this.tickMultiplier>1&&this.multiplyTick(N),this.simulateIfNeeded&&Promise.resolve().then((function(){return _.simulateIfNeeded()})),t.abrupt("return");case 116:return j=n.msg,F=n.options,ee.showMessage(j,F),t.abrupt("return");case 119:return Ts.snapshot&&console.log("received REQU (snapshot request) from reflector"),this.cpuTime=12345,t.abrupt("return");case 122:console.warn("Unknown action:",e,n);case 123:case"end":return t.stop()}}),t,this,[[10,15],[27,49,52,55],[35,39],[64,70],[94,101]])}))),function(t,e){return h.apply(this,arguments)})},{key:"install",value:function(t){var e=Date.now(),n=this.sessionSpec,i=n.snapshot,r=n.initFn,o=n.options,s=g(i.modelsById?["deserializ","snapshot"]:["initializ","root model"],2),a=s[0],c=s[1];Ts.session&&console.log("".concat(this.id," ").concat(a,"ing ").concat(c));var l=new la(i,(function(){try{return r(o,t)}catch(t){throw Ft("initFn",t),t}}));if((Ts.session||Ts.snapshot&&i.modelsById)&&console.log("".concat(this.id," ").concat(c," ").concat(a,"ed in ").concat(Date.now()-e,"ms")),Ts.initsnapshot&&!i.modelsById){Ts.snapshot&&console.log("".concat(this.id," exercising snapshot and restore after init()"));var u=JSON.stringify(l.snapshot());l=new la(JSON.parse(u),(function(){return r(o)}))}var d=this.lastKnownTime(l);this.reflectorTime=Math.max(this.reflectorTime,d),this.setIsland(l)}},{key:"setIsland",value:function(t){this.island=t,this.island.controller=this}},{key:"sendJoin",value:function(){var t=this;this.syncReceived=!1,delete this.fastForwardHandler,this.rejoinTimeout&&(clearTimeout(this.rejoinTimeout),this.rejoinTimeout=0),Ts.session&&console.log(this.id,"Controller sending JOIN");var e=this.getTickAndMultiplier(),n=e.tick,i=e.delay,r=this.sessionSpec,o=r.name,s=r.codeHash,a=r.appId,c=r.apiKey,l=r.persistentId,u=r.heraldUrl,d=r.rejoinLimit,h=r.autoSleep,f=r.computedCodeHash,m={name:o,apiKey:c,version:1,user:this.viewId,ticks:{tick:n,delay:i},dormantDelay:h,tove:this.tove,url:ee.referrerURL(),codeHash:s,sdk:Ss};a&&Object.assign(m,{appId:a,persistentId:l}),u&&Object.assign(m,{heraldUrl:u}),d&&Object.assign(m,{leaveDelay:d+250}),f!==s&&Object.assign(m,{computedCodeHash:f}),this.connection.send(JSON.stringify({id:this.id,action:"JOIN",args:m})),this.syncReceiptTimeout=setTimeout((function(){delete t.syncReceiptTimeout,t.syncReceived||t.connection.closeConnectionWithError("join",Error("SYNC not received in time"))}),5e3)}},{key:"clearSyncReceiptTimeout",value:function(){this.syncReceiptTimeout&&(clearTimeout(this.syncReceiptTimeout),delete this.syncReceiptTimeout)}},{key:"connectionInterrupted",value:function(){var t=this;this.syncReceived&&(this.shouldLeaveWhenDisconnected?this.leave():this.rejoinTimeout||(this.rejoinTimeout=setTimeout((function(){Ts.session&&console.log(t.id,"rejoin timed out"),t.rejoinTimeout=0,t.leave()}),this.sessionSpec.rejoinLimit)))}},{key:"leave",value:function(){var t=arguments.length>0&&void 0!==arguments[0]&&arguments[0],e=this.sessionSpec.rebootModelView;if(this.reset(),Ts.session&&console.log(this.id,"resetting ".concat(t?"(but keeping)":"and discarding"," controller")),t||Hs.delete(this),!this.sessionSpec)throw Error("do not discard sessionSpec!");e()}},{key:"encrypt",value:(d=n(regeneratorRuntime.mark((function t(e){var n,i,r,o;return regeneratorRuntime.wrap((function(t){for(;;)switch(t.prev=t.next){case 0:return n=xr.random(16),i=Yr.encrypt(e,this.key,{iv:n}),r=Cr(e,this.key),o="".concat(kr.stringify(n)).concat(kr.stringify(r)).concat(i),t.abrupt("return",o);case 5:case"end":return t.stop()}}),t,this)}))),function(t){return d.apply(this,arguments)})},{key:"decrypt",value:function(t){var e=arguments.length>1&&void 0!==arguments[1]?arguments[1]:this.key,n=kr.parse(t.slice(0,24)),i=kr.parse(t.slice(24,68)),r=t.slice(68),o=Yr.decrypt(r,e,{iv:n}),s="";try{s=Sr.stringify(o)}catch(t){}var a=Cr(s,this.key);if(this.compareHmacs(i.words,a.words))return s;if(e!==this.deprecatedDefaultKey)return this.decrypt(t,this.deprecatedDefaultKey);throw Error("Decryption error")}},{key:"decryptBinary",value:function(t,e){var n,i,r,o,s,a=(new TextDecoder).decode(new Uint8Array(t,0,4));switch("string"==typeof e&&(e=kr.parse(e)),a){case"CRQ0":n=(new TextDecoder).decode(t),i=kr.parse(n.slice(4,28)),r=kr.parse(n.slice(28,72)),o=n.slice(72),s=Yr.decrypt(o,e,{iv:i});break;case"CRQ1":n=new Uint8Array(t),i=xr.create(n.subarray(4,20)),r=xr.create(n.subarray(20,52)),o=xr.create(n.subarray(52)),s=Yr.decrypt({ciphertext:o},e,{iv:i});break;default:throw Error("".concat(this.id," unknown encryption version ").concat(a))}s.clamp();var c=Cr(s,e);if(this.compareHmacs(r.words,c.words))return this.cryptoJsWordArrayToUint8Array(s);if(e!==this.deprecatedDefaultKey)return this.decryptBinary(t,this.deprecatedDefaultKey);throw Error("Decryption error")}},{key:"cryptoJsWordArrayToUint8Array",value:function(t){for(var e=t.sigBytes,n=t.words,i=new Uint8Array(e),r=0,o=0;r<e;){var s=n[o++];if(i[r++]=(4278190080&s)>>>24,r===e)break;if(i[r++]=(16711680&s)>>>16,r===e)break;if(i[r++]=(65280&s)>>>8,r===e)break;i[r++]=255&s}return i}},{key:"encryptMessage",value:(u=n(regeneratorRuntime.mark((function t(e,n,i){var r,o,s,a,c,l;return regeneratorRuntime.wrap((function(t){for(;;)switch(t.prev=t.next){case 0:return r=e.asState(),o=g(r,3),s=o[0],a=o[1],c=o[2],t.next=3,this.encryptPayload([c,n,i]);case 3:return l=t.sent,t.abrupt("return",[s,a,l]);case 5:case"end":return t.stop()}}),t,this)}))),function(t,e,n){return u.apply(this,arguments)})},{key:"encryptPayload",value:(l=n(regeneratorRuntime.mark((function t(e){return regeneratorRuntime.wrap((function(t){for(;;)switch(t.prev=t.next){case 0:return t.abrupt("return",this.encrypt(JSON.stringify(e)));case 1:case"end":return t.stop()}}),t,this)}))),function(t){return l.apply(this,arguments)})},{key:"decryptPayload",value:function(t){return JSON.parse(this.decrypt(t))}},{key:"compareHmacs",value:function(t,e){for(var n=t.length===e.length,i=0;i<t.length;i++)t[i]!==e[i]&&(n=!1);return n}},{key:"sendMessage",value:function(t){var e=this;if(!this.viewOnly){var n=t.asState()[2].length;if(n>16384)console.warn("".concat(this.id," Message with payload of ").concat(n," bytes exceeds maximum ").concat(16384," and will not be sent to reflector."));else{!this.payloadSizeWarned&&n>4096&&(console.log("".concat(this.id," Message with payload of ").concat(n," bytes being sent to reflector. Maximum recommended is ").concat(4096,".")),this.payloadSizeWarned=!0);var i=Date.now(),r=this.rateLimitedSendTimes,o=this.rateLimitBuffer;if(Wt.perSecondTally({requestedMessages:1}),o.length)this.addToRateLimitBuffer(t);else{var s=0;if(r.length&&this.synced){var a=r[r.length-1],c=1e3/this.eventRateLimit-(i-a);c>1&&(s=Math.ceil(c))}s?(this.addToRateLimitBuffer(t),setTimeout((function(){return e.serviceRateLimitBuffer()}),s)):(this.recordRateLimitedSend(i),this.socketSendMessage(t),Wt.perSecondTally({sentSingleMessages:1,sentMessagesTotal:1,sentPayloadTotal:n}))}}}}},{key:"recordRateLimitedSend",value:function(t){var e=this.rateLimitedSendTimes;!this.synced&&e.length&&e[e.length-1]===t||(e.push(t),e.length>this.eventHistoryLimit&&e.shift()),!this.rateLimitSoftWarned&&e.length===this.eventHistoryLimit&&t-e[0]<1010&&(console.log("".concat(this.id," Sends to reflector are at or above recommended limit of ").concat(this.eventHistoryLimit," within one second. Events will be bundled as necessary to keep to the limit.")),this.rateLimitSoftWarned=!0)}},{key:"addToRateLimitBuffer",value:function(t){Wt.perSecondTally({bundledMessages:1});var e=Date.now(),n=t.asState(),i=n[2].length,r=this.rateLimitBuffer;if(r.length){var o=r[r.length-1],s=o.msgStates;if(o.totalPayload<4096)return s.push({msgState:n,bufferTime:e}),void(o.totalPayload+=i)}Wt.perSecondTally({newBundles:1}),r.push({msgStates:[{msgState:n,bufferTime:e}],totalPayload:i});var a=r.length;Ts.session&&a%5==0&&a!==this.rateLimitLastLogged&&(console.log("".concat(this.id," SEND rate-limit buffer grew to ").concat(a," event bundles (max ").concat(this.eventMaxBundles,")")),this.rateLimitLastLogged=a),a>this.eventMaxBundles?(console.error("".concat(this.id," Disconnecting after overflow of SEND rate-limit buffer.")),this.connection.closeConnectionWithError("SEND",Error("Send rate exceeded"),4200)):!this.rateLimitBufferWarned&&a>this.eventMaxBundles/2&&(console.warn("".concat(this.id," SEND rate-limit buffer is 50% full. If send rate does not drop, the app will be disconnected.")),this.rateLimitBufferWarned=!0)}},{key:"serviceRateLimitBuffer",value:function(){var t=this;if(this.connected){var e=this.rateLimitBuffer;if(e.length){var n=Date.now(),i=1e3/this.eventRateLimit,r=this.rateLimitedSendTimes;if(r.length){var o=r[r.length-1];if(i-(n-o)>0)return}var s=e.shift(),a=s.msgStates,c=s.totalPayload,l=[],u=0;a.forEach((function(t){l.push(t.msgState),u+=n-t.bufferTime}));var d=new fa(this.island.time,0,this.island.id,"handleBundledEvents",["dummy",{events:l}]);if(this.socketSendMessage(d),this.recordRateLimitedSend(n),Wt.perSecondTally({sentBundles:1,sentMessagesTotal:a.length,sendDelay:u,sentBundlePayload:c,sentPayloadTotal:c}),Ts.session&&this.connected){var h=e.length;h&&h%5==0&&h!==this.rateLimitLastLogged&&(console.log("".concat(this.id," SEND rate-limit buffer dropped to ").concat(h," event bundles")),this.rateLimitLastLogged=h)}e.length&&setTimeout((function(){return t.serviceRateLimitBuffer()}),i)}}}},{key:"socketSendMessage",value:(a=n(regeneratorRuntime.mark((function t(e){var n,i,r,o,s=this,a=arguments;return regeneratorRuntime.wrap((function(t){for(;;)switch(t.prev=t.next){case 0:return n=a.length>1&&void 0!==a[1]?a[1]:null,t.next=3,this.encryptMessage(e,this.viewId,Date.now());case 3:if(i=t.sent,r=n?"tagged SEND ".concat(e.asState()," with tags ").concat(JSON.stringify(n)):"SEND ".concat(e.asState()),this.connected){t.next=8;break}return this.island&&(Ts.sends&&console.log(this.id,"buffering ".concat(r)),this.sendBuffer.push((function(){return s.socketSendMessage(e,n)}))),t.abrupt("return");case 8:Ts.sends&&console.log(this.id,"sending ".concat(r)),o={id:this.id,action:"SEND",args:[].concat(w(i),[this.latency])},n&&(o.tags=n),this.lastSent=Date.now(),this.connection.send(JSON.stringify(o));case 13:case"end":return t.stop()}}),t,this)}))),function(t){return a.apply(this,arguments)})},{key:"sendTagged",value:(s=n(regeneratorRuntime.mark((function t(e,n){return regeneratorRuntime.wrap((function(t){for(;;)switch(t.prev=t.next){case 0:if(!this.viewOnly){t.next=2;break}return t.abrupt("return");case 2:this.socketSendMessage(e,n);case 3:case"end":return t.stop()}}),t,this)}))),function(t,e){return s.apply(this,arguments)})},{key:"sendTutti",value:(r=n(regeneratorRuntime.mark((function t(e,n,i){var r,o,s,a,c,l,u,d=this,h=arguments;return regeneratorRuntime.wrap((function(t){for(;;)switch(t.prev=t.next){case 0:if(r=h.length>3&&void 0!==h[3]?h[3]:null,o=!(h.length>4&&void 0!==h[4])||h[4],s=h.length>5&&void 0!==h[5]?h[5]:null,!this.viewOnly){t.next=5;break}return t.abrupt("return",null);case 5:if(t.t0=r,!t.t0){t.next=10;break}return t.next=9,this.encryptMessage(r,this.viewId,Date.now());case 9:t.t0=t.sent;case 10:if(a=t.t0,c=fe(i),this.connected){t.next=15;break}return this.island&&(Ts.sends&&console.log(this.id,"buffering TUTTI ".concat(c," ").concat(r&&r.asState()," ").concat(s)),this.sendBuffer.push((function(){return d.sendTutti(e,n,i,r,o,s)}))),t.abrupt("return",!1);case 15:return Ts.sends&&console.log(this.id,"sending TUTTI ".concat(c," ").concat(r&&r.asState()," ").concat(s)),this.lastSent=Date.now(),l=1e6+Math.floor(e/100),u="".concat(n,"@").concat(e),this.connection.send(JSON.stringify({id:this.id,action:"TUTTI",args:[e,l,c,a,o,s,u]})),t.abrupt("return",new Promise((function(t){d.tuttiHistory.length>100&&d.tuttiHistory.shift(),d.tuttiHistory.push({time:e,tuttiKey:u,dummyTuttiSeq:l,payload:c,resolve:t})})));case 21:case"end":return t.stop()}}),t,this)}))),function(t,e,n){return r.apply(this,arguments)})},{key:"sendLog",value:function(){for(var t=this,e=arguments.length,n=new Array(e),i=0;i<e;i++)n[i]=arguments[i];this.connected?(Ts.sends&&console.log(this.id,"sending LOG"),n.length<2&&(n=n[0]),this.connection.send(JSON.stringify({action:"LOG",args:n}))):this.island&&(Ts.sends&&console.log(this.id,"buffering LOG"),this.sendBuffer.push((function(){return t.sendLog.apply(t,w(n))})))}},{key:"addToStatistics",value:function(t,e){this.latency=e-t,this.latencyHistory&&(this.latencyHistory.length>=100&&this.latencyHistory.shift(),this.latencyHistory.push({time:e,ms:this.latency}))}},{key:"getTickAndMultiplier",value:function(){var e=this.sessionSpec.options,n=g(((["number","string"].includes(t(e.tps))?e.tps:["number","string"].includes(t(this.sessionSpec.tps))?this.sessionSpec.tps:20)+"x").split("x").map((function(t){return Number.parseFloat("0"+t)})),2),i=n[0],r=n[1],o=1e3/Math.max(1/30,Math.min(60,i)),s=Math.max(1,r),a=o,c=0;return s>1&&!Ks&&(a=o/s,c=Math.ceil(a*(s-1))),{msPerTick:a,multiplier:s,tick:o,delay:c}}},{key:"simulate",value:function(t){var e=this;if(!this.island)return!0;try{var n=!0;if(this.networkQueue.length+this.island.messages.size===0)n=this.island.advanceTo(this.reflectorTime,t);else{for(var i=Wt.begin("simulate");n;){var r=this.networkQueue[0];if(!r)break;if(!(n=this.island.advanceTo(r[0],t)))break;this.networkQueue.shift();var o=this.island.scheduleExternalMessage(r);n=this.island.advanceTo(o.time,t),this.cpuTime+=5}n&&(n=this.island.advanceTo(this.reflectorTime,t)),this.cpuTime+=Math.max(.01,Wt.end("simulate")-i)}Wt.backlog(this.backlog);var s=this.lag,a=Math.max(200,.1*this.msPerTick),c=Math.max(2e3,.2*this.msPerTick);if("boolean"==typeof this.synced&&this.viewed&&(this.synced&&s>c||!this.synced&&s<a))!this.synced?this.syncTimer||(this.syncTimer=setTimeout((function(){delete e.syncTimer,e.lag<a&&e.applySyncChange(!0)}),200)):this.applySyncChange(!1);return this.synced&&n&&this.cpuTime>5e3&&(this.triggeringCpuTime=this.cpuTime,this.cpuTime=0,this.isBeingAnimated()?setTimeout((function(){return e.scheduleSnapshot()}),Math.floor(2e3*Math.random())):this.scheduleSnapshot()),n}catch(t){return Ft("simulate",t),this.connection.closeConnectionWithError("simulate",t),"error"}}},{key:"stepSession",value:function(t){var e=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{};if(window.logMessageStats){var n=Wt.stepSession(e.frameTime,!0);n&&console.log(n)}var i=this.backlog,r=this.latency,o=this.starvation,s=this.activity;if("animation"===t){Wt.animationFrame(e.frameTime,{backlog:i,starvation:o,latency:r,activity:s,users:this.users});var a=Date.now();if(this.lastAnimationEnd){var c=a-this.lastAnimationEnd;if(!0===this.animationGapCheck&&c>200&&(this.animationGapCheck=[],Ts.session&&console.log("".concat(this.id," animation has stopped (too long between steps)"))),!0!==this.animationGapCheck){var l=this.animationGapCheck;l.push(c),l.length>4&&l.shift(),4===l.length&&l.reduce((function(t,e){return t+e}),0)<=400&&(this.animationGapCheck=!0,Ts.session&&console.log("".concat(this.id," animation has started")))}}this.lastAnimationEnd=a}if(this.connected){if(this.island){var u;switch(t){case"animation":var d=e.expectedSimFPS,h=Date.now(),f=Ps.reduce((function(t,e){return t+e}),0)/Ps.length;if(!1===(u=this.simulate(h+Math.min(f,200)))){var m=0===d?0:1e3/d*4;this.backlog>m&&(u=this.simulate(h+200-f))}"error"!==u&&(Ps.push(Date.now()-h),Ps.length>4&&Ps.shift());break;case"fastForward":case"background":u=this.simulate(Date.now()+e.budget);break;default:console.warn(t)}this.fastForwardHandler&&this.fastForwardHandler(u),"error"!==u&&(Wt.begin("update"),this.processModelViewEvents("animation"===t),Wt.end("update"),this.serviceRateLimitBuffer(),"animation"===t&&(e.view&&(Wt.begin("render"),this.inViewRealm((function(){return e.view.update(e.frameTime)})),Wt.end("render")),this.lastAnimationEnd=Date.now()))}}else this.isInBackground()||this.checkForConnection(!0)}},{key:"applySyncChange",value:function(t){Ts.session&&console.log(this.id,"synced=".concat(t)),this.synced=t,ee.showSyncWait(!t),this.island.publishFromView(this.viewId,"synced",t)}},{key:"inViewRealm",value:function(t){var e=this;return he(this.island,(function(){return t(e.island)}))}},{key:"processModelViewEvents",value:function(t){return this.island?this.island.processModelViewEvents(t):0}},{key:"timeFromReflector",value:function(t){var e=arguments.length>1&&void 0!==arguments[1]?arguments[1]:"reflector";t<this.reflectorTime?("controller"!==e||Ts.ticks)&&console.warn("time is ".concat(this.reflectorTime,", ignoring time ").concat(t," from ").concat(e)):("boolean"!=typeof this.synced&&(this.synced=!1),this.reflectorTime=t,this.extrapolatedTimeBase=Date.now()-t,this.island&&Wt.backlog(this.backlog),this.tickHook&&this.tickHook())}},{key:"multiplyTick",value:function(t){var e=this;this.localTicker&&window.clearInterval(this.localTicker);var n=this.msPerTick,i=this.tickMultiplier,r=1;this.localTicker=window.setInterval((function(){e.timeFromReflector(Math.round(t+r*n),"controller"),Ts.ticks&&console.log(e.id,"Controller generate TICK "+e.reflectorTime,r),++r>=i&&(window.clearInterval(e.localTicker),e.localTicker=0)}),n)}},{key:"startStepping",value:function(t){var e=this;window.requestAnimationFrame((function n(i){e.leaving||(e.isOutOfSight()||t(i),window.requestAnimationFrame(n))}))}},{key:"setUpActivityChecks",value:function(){var t=this,e=null;this.isOutOfSight=function(){return"hidden"===document.visibilityState||!e},this.isBeingAnimated=function(){var e=!0===t.animationGapCheck,n=Date.now()-t.lastAnimationEnd<200;return e&&!n&&(t.animationGapCheck=[],Ts.session&&console.log("".concat(t.id," animation has stopped (too long since last step)"))),e&&n},this.isInBackground=function(){return t.isOutOfSight()||!t.isBeingAnimated()};new IntersectionObserver((function(t,n){return e=t[0].isIntersecting})).observe(document.body);var n,i=this.sessionSpec.autoSleep;if(i){var r=1e3*i,o=0,s=0;n=function(){var e=Date.now();e-o<980||(o=e,t.isOutOfSight()?s?e-s>r&&(t.dormantDisconnect(),s=0):s=e:s=0)}}var a=function(){t.leaving?c&&(clearInterval(c),c=null):t.connected&&t.island&&(n&&n(),t.isBeingAnimated()||t.connection.keepAlive(Date.now()))},c=setInterval(a,1e3);this.simulateIfNeeded=function(){if(!t.isBeingAnimated()&&(a(),t.connected)){var e=.9*t.msPerTick;i&&(e=Math.min(e,200));var n=t.synced?"background":"fastForward";t.stepSession(n,{budget:e})}}}},{key:"toString",value:function(){return"Controller[".concat(this.id,"]")}},{key:Symbol.toPrimitive,value:function(){return this.toString()}},{key:"id",get:function(){return this.island?this.island.id:this.sessionSpec.id}},{key:"persistentId",get:function(){return this.sessionSpec.persistentId}},{key:"versionId",get:function(){return this.sessionSpec.codeHash}},{key:"extrapolatedTime",get:function(){return Date.now()-this.extrapolatedTimeBase}},{key:"viewOnly",get:function(){return this.sessionSpec.viewOnly}},{key:"backlog",get:function(){return this.island?this.reflectorTime-this.island.time:0}},{key:"starvation",get:function(){return Date.now()-this.lastReceived}},{key:"lag",get:function(){return this.island?Math.max(0,this.extrapolatedTime-this.island.time-this.msPerTick):0}},{key:"activity",get:function(){return Date.now()-this.lastSent}},{key:"viewed",get:function(){return!(!this.session||!this.session.view)}},{key:"connected",get:function(){return this.connection.connected}},{key:"shouldLeaveWhenDisconnected",get:function(){return this.leaving||!this.canRejoinSeamlessly||0===this.sessionSpec.rejoinLimit}},{key:"canRejoinSeamlessly",get:function(){return!!this.timeline}},{key:"deprecatedDefaultKey",get:function(){return Rs||(Rs=Wr("THIS SHOULDN'T BE IN LOGS","",{keySize:8})),Rs}},{key:"latencies",get:function(){return this.latencyHistory||(this.latencyHistory=[]),this.latencyHistory}}]),e}(),Fs=function(){function t(e){i(this,t),this.controller=e,this.socketLastSent=0,this.connectBlocked=!1,this.connectRestricted=!1,this.connectHasBeenCalled=!1,this.reconnectDelay=0,this.missingTickThreshold=1/0}return o(t,[{key:"setTick",value:function(t){this.missingTickThreshold=Math.min(3*t,45e3)}},{key:"checkForConnection",value:function(t){this.socket||this.connectHasBeenCalled||this.connectBlocked||this.connectRestricted&&!t||this.connectToReflector()}},{key:"connectToReflector",value:function(){var t=this;if(!this.socket&&!this.connectHasBeenCalled){this.connectHasBeenCalled=!0,this.connectBlocked=!1,this.connectRestricted=!1;var e=Ts.reflector?"wss://croquet.io/reflector-dev/dev":Is,n="";if(V.reflector){var i=V.reflector.toUpperCase();"CF"===i||i.match(/^[A-Z]{3}$/)?(e=Ts.reflector?"wss://croquet.network/reflector/dev/":"wss://croquet.network/reflector/",3===i.length&&(n="?colo=".concat(i))):V.reflector.match(/^[-a-z0-9]+$/i)?n="?".concat(V.reflector):e=V.reflector}if(!e.match(/^wss?:/))throw Error("Cannot interpret reflector address "+e);e.endsWith("/")||(e+="/");var r=new WebSocket("".concat(e).concat(this.controller.id).concat(n));r.onopen=function(e){t.socket=r,t.connectHasBeenCalled=!1,Ts.session&&console.log(t.id,t.socket.constructor.name,"connected to",t.socket.url),t.reconnectDelay=0,Wt.connected(!0),t.controller.sendJoin()},r.onmessage=function(e){r===t.socket&&t.receive(e.data)},r.onerror=function(e){Ts.session&&console.log(t.id,r.constructor.name,"connection error"),t.connectHasBeenCalled=!1,t.controller.clearSyncReceiptTimeout()},r.onclose=function(e){t.socketClosed(e.code,e.reason)}}}},{key:"socketClosed",value:function(t,e){var n=this;this.controller.clearSyncReceiptTimeout();var i=1e3!==t&&t<4100,r=4110===t;r||1e3===t||this.reconnectDelay||setTimeout((function(){n.connected||Nt("Connection closed: ".concat(t," ").concat(e),{duration:i?void 0:36e5})}),500),Ts.session&&console.log(this.id,"".concat(this.socket?this.socket.constructor.name+" closed":"closed before opening,"," with code: ").concat(t," ").concat(e)),Wt.connected(!1),r?this.connectRestricted=!0:this.connectBlocked=!0,this.disconnected(),i&&(Ts.session&&console.log(this.id,"reconnecting in ".concat(this.reconnectDelay," ms")),this.reconnectTimeout=window.setTimeout((function(){delete n.reconnectTimeout,n.connectToReflector()}),this.reconnectDelay),this.reconnectDelay=Math.min(3e4,Math.round((this.reconnectDelay+100)*(1+Math.random()))))}},{key:"disconnected",value:function(){this.socket&&(this.socket=null,this.lastReceived=0,this.socketLastSent=0,this.stalledSince=0,this.connectHasBeenCalled=!1,this.controller.connectionInterrupted())}},{key:"send",value:function(t){this.socketLastSent=Date.now(),this.socket.send(t)}},{key:"receive",value:function(t){this.lastReceived=Date.now();var e=JSON.parse(t),n=e.id,i=e.action,r=e.args;if(n)try{this.controller.receive(i,r)}catch(t){this.closeConnectionWithError("receive",t)}else switch(i){case"PONG":Ts.pong&&console.log("PONG after",Date.now()-r,"ms");break;default:console.warn("Unknown action",i)}}},{key:"dormantDisconnect",value:function(){this.connected&&(Ts.session&&console.log(this.id,"dormant; disconnecting from reflector"),this.closeConnection(4110,"Going dormant"))}},{key:"closeConnectionWithError",value:function(t,e){var n=arguments.length>2&&void 0!==arguments[2]?arguments[2]:4e3;console.error(e),console.warn("closing socket"),n>=4100&&4110!==n&&(this.controller.leaving=function(){}),this.closeConnection(n,"Error in "+t)}},{key:"closeConnection",value:function(t,e){this.socket&&(this.socket.onclose=null,this.socket.close(t,e),this.socketClosed(t,e))}},{key:"PULSE",value:function(t){this.connected&&(0===this.socket.bufferedAmount?(Ts.session&&console.log("".concat(this.id," sending PULSE")),this.send(JSON.stringify({action:"PULSE"})),this.stalledSince=0):this.stalledSince&&t-this.stalledSince>500?console.log("".concat(this.id," Reflector connection stalled: ").concat(this.socket.bufferedAmount," bytes unsent for ").concat(t-this.stalledSince," ms")):this.stalledSince=Date.now())}},{key:"keepAlive",value:function(t){0!==this.lastReceived&&(t-this.socketLastSent>25e3||t-this.lastReceived>this.missingTickThreshold)&&this.PULSE(t)}},{key:"id",get:function(){return this.controller.id}},{key:"connected",get:function(){return!(!this.socket||this.socket.readyState!==WebSocket.OPEN)}}]),t}();window.setInterval((function(){var t,e=S(Hs);try{for(e.s();!(t=e.n()).done;){var n=t.value;n.connected&&n.island&&n.connection.keepAlive(Date.now())}}catch(t){e.e(t)}finally{e.f()}}),100);var _s=Symbol("hash"),Js=Symbol("key"),Es=Symbol("path"),Qs=new Map;function Ds(t){return V.has("debug",t,!1)}function Us(t,e){return t?"apps/".concat(t,"/data/").concat(e):"sessiondata/".concat(e)}function Bs(t){return t.replace(/.*\//,"")}function Os(t){return t.replace(/=/g,"").replace(/\+/g,"-").replace(/\//g,"_")}function As(t){return t.replace(/-/g,"+").replace(/_/g,"/").padEnd(t.length+3&-4,"=")}function qs(t,e){return e.replace(/[\s\S]/g,(function(e){return String.fromCharCode(e.charCodeAt(0)^t.charCodeAt(0))}))}var $s=function(){var e,r;function s(t,e,n){i(this,s);var r=Qs.get(t);if(r)return Ds("data")&&console.log("Croquet.Data: using cached handle for ".concat(t)),r;Object.defineProperty(this,_s,{value:t}),Object.defineProperty(this,Js,{value:e}),n&&Object.defineProperty(this,Es,{value:n}),Qs.set(t,this),Ds("data")&&console.log("Croquet.Data: created new handle for ".concat(t))}return o(s,null,[{key:"store",value:(r=n(regeneratorRuntime.mark((function e(n,i){var r,o,a,c,l,u,d,h,f,m=arguments;return regeneratorRuntime.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(r=m.length>2&&void 0!==m[2]&&m[2],"object"===t(n)&&(console.warn("Deprecated: Croquet.Data.store(sessionId, data) called without sessionId"),i=n),!la.hasCurrent()){e.next=4;break}throw Error("Croquet.Data.store() called from Model code");case 4:return o=Ns(n),a=o.appId,c=o.persistentId,l=o.uploadEncrypted,a||console.warn("Deprecated: Croquet.Data API used without declaring appId in Croquet.Session.join()"),u=xr.random(32).toString(kr),d=a&&"".concat(a,"/").concat(c),e.next=10,l({path:Us(d,"%HASH%"),content:i,key:u,keep:r,debug:Ds("data"),what:"shared data"});case 10:return h=e.sent,f=Bs(h),e.abrupt("return",new s(f,u,d));case 13:case"end":return e.stop()}}),e)}))),function(t,e){return r.apply(this,arguments)})},{key:"fetch",value:(e=n(regeneratorRuntime.mark((function e(n,i){var r,o,s,a,c,l;return regeneratorRuntime.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if("object"===t(n)&&(console.warn("Deprecated: Croquet.Data.fetch(sessionId, handle) called without sessionId"),i=n),!la.hasCurrent()){e.next=3;break}throw Error("Croquet.Data.fetch() called from Model code");case 3:if(r=Ns(n),o=r.appId,s=r.downloadEncrypted,o||console.warn("Deprecated: Croquet.Data API used without declaring appId in Croquet.Session.join()"),a=i&&i[_s],c=i&&i[Js],l=i&&i[Es],"string"==typeof a&&"string"==typeof c){e.next=10;break}throw Error("Croquet.Data.fetch() called with invalid handle");case 10:return e.abrupt("return",s({path:Us(l,a),key:c,debug:Ds("data"),what:"shared data"}));case 11:case"end":return e.stop()}}),e)}))),function(t,n){return e.apply(this,arguments)})},{key:"hash",value:function(t){var e=arguments.length>1&&void 0!==arguments[1]?arguments[1]:"base64url";"function"==typeof t&&(t=Function.prototype.toString.call(t)),"string"==typeof t?t=(new TextEncoder).encode(t):t&&t.constructor===DataView?t=new Uint8Array(t.buffer,t.byteOffset,t.byteLength):t&&t.constructor===ArrayBuffer?t=new Uint8Array(t):ArrayBuffer.isView(t)||(t=(new TextEncoder).encode(fe(t)));var n=Gr(xr.create(t));switch(e){case"hex":return n.toString();case"base64":return n.toString(kr);case"base64url":return Os(n.toString(kr));default:throw Error('Croquet.Data: unknown hash output "'.concat(e,'", expected "hex"/"base64"/"base64url"'))}}},{key:"fromId",value:function(t){var e=t.slice(0,1);switch(e){case"0":return new this(t.slice(1,44),t.slice(44));case"1":return new this(t.slice(1,44),t.slice(44,87)+"=",t.slice(87));case"2":var n=t.slice(1,44),i=As(t.slice(44,87));return new this(n,i,qs(i,atob(As(t.slice(87)))));default:throw Error("Croquet.Data expected handle v".concat("2"," got v").concat(e))}}},{key:"toId",value:function(t){if(!t)return"";var e=t[_s],n=t[Js],i=t[Es];if(!i)return"0".concat(e).concat(n);var r=Os(n),o=Os(btoa(qs(n,i)));return"".concat("2").concat(e).concat(r).concat(o)}}]),s}(),ta={cls:$s,write:function(t){return $s.toId(t)},read:function(t){return $s.fromId(t)}},ea=null,na=null;var ia=function(t){l(n,m(Error));var e=b(n);function n(){return i(this,n),e.apply(this,arguments)}return n}();Object.defineProperty(ia.prototype,"name",{value:"CroquetWarning"});var ra={};function oa(t,e){var n=JSON.parse(atob(t.slice(1,-1))),i=n.qPara,r=n.qArgs,o=n.qFn,s=JSON.stringify(i),a=ra[s]||(ra[s]=f(Function,w(i)));return"number"==typeof o&&(r[o]=a),a.call.apply(a,[e].concat(w(r))).bind(e)}function sa(t,e){if(ea)throw Error("Island confusion");if(!(t instanceof la))throw Error("not an island: "+t);var n=ea;try{ea=t,window.ISLAND=t,e()}finally{ea=n}}var aa=new WeakMap;function ca(t){aa.set(t,null)}var la=function(){function e(t,n){var r=this;i(this,e),function(){if(!window.CroquetViewMath){window.CroquetMath.random=function(){return ea.random()},window.CroquetViewMath=c({},Math);for(var t=function(){var t=g(n[e],2),i=t[0],r=t[1],o=Math[i];Math[i]=1===r.length?function(t){return ea?r(t):o(t)}:function(t,e){return ea?r(t,e):o(t,e)}},e=0,n=Object.entries(window.CroquetMath);e<n.length;e++)t()}if(!window.CroquetViewDate){var i=function(t,e){return s||(s=!0,console.warn(new ia("".concat(t," used in Model code")))),e},r=function t(e,n,r,s,a,c,l){var u=this instanceof t,d=[e,n,r,s,a,c,l];if(d.length=arguments.length,ea)switch(i(u?"new Date()":"Date()"),arguments.length){case 0:d.push(ea.time);break;case 1:break;default:d[0]=o.UTC.apply(o,d),d.length=1}var h=f(o,d);return u?h:""+h},o=window.Date,s=!1;r.prototype=o.prototype,r.UTC=o.UTC,r.now=function(){return ea?i("Date.now()",ea.time):o.now()},r.parse=function(){return ea?i("Date.parse()",0):o.parse.apply(o,arguments)},window.CroquetViewDate=o,window.Date=r}}(),na={snapshot:V.has("debug","snapshot",!1),session:V.has("debug","session",!1)},ca(this),sa(this,(function(){de(r,(function(){if(r.modelsById={},r.modelsByName={},r.messages=new ie((function(t,e){return t.before(e)})),r.subscriptions={},r.views={},r._random=function(){throw Error("You must not use random when applying state!")},r.id=t.id,r.time=0,r.seq=4294967280,r.externalTime=0,r.externalSeq=r.seq,r.futureSeq=0,r.lastSnapshotPoll=0,r.lastPersistencePoll=0,r.inPersistenceCoolOff=!1,r.persisted="",r.modelsId=0,r.controller=null,t.modelsById){for(var e=ba.newOrRecycled(r).readIsland(t,"$"),i=[],o=0,s=Object.keys(e);o<s.length;o++){var a=s[o];a in r||"meta"===a?"messages"===a?i=e.messages:r[a]=e[a]:console.warn("Ignoring property snapshot.".concat(a))}var c,l=S(i);try{for(l.s();!(c=l.n()).done;){var u=c.value;r.messages.add(u.convertIfNeeded(r))}}catch(t){l.e(t)}finally{l.f()}}else r._random=new me(t.id,{state:!0}),n(r),r.addSubscription(r,r.id,"__views__",r.generateJoinExit)}))}))}return o(e,null,[{key:"current",value:function(){return ea||console.warn("Island.current() called from outside the island!"),ea}},{key:"hasCurrent",value:function(){return!!ea}}]),o(e,[{key:"registerModel",value:function(t,e){if(ea!==this)throw Error("You can only create models from model code!");return e||(e=this.id+"/M"+ ++this.modelsId),this.modelsById[e]=t,e}},{key:"deregisterModel",value:function(t){if(ea!==this)throw Error("You can only destroy models from model code!");var e=this.modelsById;delete this.modelsById[t];for(var n=0,i=Object.entries(this.modelsByName);n<i.length;n++){var r=g(i[n],2),o=r[0];e===r[1]&&delete this.modelsByName[o]}this.messages.removeMany((function(e){return e.hasReceiver(t)}))}},{key:"lookUpModel",value:function(t){if(t===this.id)return this;var e=this.modelsById[t];if(e)return e;var n=g(t.match(/^([^#]+)#(.*)$/),3),i=(n[0],n[1]),r=n[2];return this.modelsById[i].lookUp(r)}},{key:"get",value:function(t){return this.modelsByName[t]}},{key:"set",value:function(t,e){if(ea!==this)throw Error("You can only make a model well-known from model code!");this.modelsByName[t]=e}},{key:"callModelMethod",value:function(t,e,n){if(ea)throw Error("You cannot make a reflector send from model code!");var i=this.lookUpModel(t);if(i){var r=new fa(this.time,0,i.id,e,n);this.controller.sendMessage(r)}else console.error(Error("Model not found: ".concat(t)))}},{key:"noop",value:function(){}},{key:"generateJoinExit",value:function(t){var e=t.entered,n=t.exited,i=t.count;if(e.length===i){var r,o=S(n=Object.keys(this.views));try{for(o.s();!(r=o.n()).done;){var s=r.value;this.views[s].extraConnections=0}}catch(t){o.e(t)}finally{o.f()}}if(0!==e.length&&0!==n.length){var a=e.filter((function(t){return n.includes(t)}));if(0!==a.length&&(e=e.filter((function(t){return!a.includes(t)})),n=n.filter((function(t){return!a.includes(t)})),0===e.length&&0===n.length))return}var c,l=S(n);try{for(l.s();!(c=l.n()).done;){var u=c.value;if(this.views[u]){if(this.views[u].extraConnections){this.views[u].extraConnections--,na.session&&console.log("".concat(this.id," @").concat(this.time,"#").concat(this.seq," view ").concat(u," closed extra connection"));continue}delete this.views[u],this.publishFromModelOnly(this.id,"view-exit",u)}else console.error("".concat(this.id," @").concat(this.time,"#").concat(this.seq," view ").concat(u," exited without being present - this should not happen")),this.controller.sendLog("view-exit-mismatch @".concat(this.time,"#").concat(this.seq," ").concat(u," left without being present"))}}catch(t){l.e(t)}finally{l.f()}var d,h=S(e);try{for(h.s();!(d=h.n()).done;){var f=d.value;this.views[f]?(na.session&&console.log("".concat(this.id," @").concat(this.time,"#").concat(this.seq," view ").concat(f," opened another connection")),this.views[f].extraConnections=(this.views[f].extraConnections||0)+1):(this.views[f]={},this.publishFromModelOnly(this.id,"view-join",f))}}catch(t){h.e(t)}finally{h.f()}var m=Object.values(this.views).reduce((function(t,e){return t+1+(e.extraConnections||0)}),0);i!==m&&(console.error("@".concat(this.time,"#").concat(this.seq," view count mismatch (model: ").concat(m,", reflector: ").concat(i,") - this should not happen")),this.controller.sendLog("view-exit-mismatch @".concat(this.time,"#").concat(this.seq," connections model: ").concat(m," reflector: ").concat(i)))}},{key:"scheduleExternalMessage",value:function(t){var e=fa.fromState(t,this);if(e.time<this.time)throw Error("past message from reflector "+t);var n=this.externalSeq+1>>>0;if(e.seq!==n)throw Error("External message error. Expected message #".concat(n," got #").concat(e.seq));return this.externalTime=e.time,this.externalSeq=e.seq,e.seq=2*e.seq+1,this.messages.add(e),e}},{key:"futureSend",value:function(t,e,n,i){if(t.every)return this.futureRepeat(t.every,e,n,i);if(t<0)throw Error("attempt to send future message into the past");this.futureSeq=this.futureSeq+1>>>0;var r=new fa(this.time+t,2*this.futureSeq,e,n,i);return this.messages.add(r),r}},{key:"futureRepeat",value:function(t,e,n,i){this.futureSend(t,this.id,"futureExecAndRepeat",[t,e,n,i])}},{key:"futureExecAndRepeat",value:function(t,e,n,i){var r=this.lookUpModel(e);if("function"==typeof r[n])try{r[n].apply(r,w(i))}catch(t){Ft("future message ".concat(r,".").concat(n),t)}else{var o=oa(n,r);try{o.apply(void 0,w(i))}catch(t){Ft("future message ".concat(r," ").concat(o),t)}}this.futureRepeat(t,e,n,i)}},{key:"future",value:function(t,e,n,i){var r=this.asQFunc(t,n);if("string"==typeof r)return this.futureSend(e,t.id,r,i);var o=this;return new Proxy(t,{get:function(n,i){if("function"==typeof t[i])return function(){if(o.lookUpModel(t.id)!==t)throw Error("future send to unregistered model");for(var n=arguments.length,r=new Array(n),s=0;s<n;s++)r[s]=arguments[s];return o.futureSend(e,t.id,i,r)};throw Error("Tried to call "+i+"() on future of "+Object.getPrototypeOf(t).constructor.name+" which is not a function")}})}},{key:"advanceTo",value:function(t,e){if(ea)throw Error("cannot advance time from model code");for(var n,i=0;(n=this.messages.peek())&&n.time<=t;){var r=n,o=r.time,s=r.seq;if(o<this.time)throw Error("past message encountered: "+n);if(1&s&&(this.seq=this.seq+1>>>0,s/2>>>0!==this.seq))throw Error("Sequence error: expected ".concat(this.seq," got ").concat(s/2>>>0," in ").concat(n));if(this.messages.poll(),this.time=n.time,n.executeOn(this),++i>100&&(i=0,Date.now()>e))return!1}return this.time=t,!0}},{key:"asQFunc",value:function(t,e){if("string"==typeof e)return e;if("function"==typeof e){if(t[e.name]===e)return e.name;for(var n=t;null!==n;){for(var i=0,r=Object.entries(Object.getOwnPropertyDescriptors(n));i<r.length;i++){var o=g(r[i],2),s=o[0];if(o[1].value===e)return s}n=Object.getPrototypeOf(n)}var a=e.toString().match(/^\(?([a-z][a-z0-9]*)?\)? *=> *this\.([a-z][a-z0-9]*) *\( *([a-z][a-z0-9]*)? *\) *$/i);return!a||a[3]&&a[3]!==a[1]?function(t,e){"function"==typeof t&&(e=t,t={});var n=Object.keys(t).concat(["return "+e]),i=Object.values(t),r={qPara:n,qArgs:i},o=i.indexOf(e);return o>=0&&(i[o]=n[o],r.qFn=o),"{".concat(btoa(JSON.stringify(r)),"}")}(e):a[2]}return null}},{key:"addSubscription",value:function(t,e,n,i){if(ea!==this)throw Error("Cannot add a model subscription from outside model code");var r=this.asQFunc(t,i);if("string"!=typeof r)throw Error('Subscription handler for "'.concat(n,'" must be a method name'));if(r.indexOf(".")<0&&"function"!=typeof t[r]&&"{"!==r[0])throw Error('Subscriber method for "'.concat(n,'" not found: ').concat(t,".").concat(r,"()"));var o=e+":"+n,s=t.id+"."+r;if(this.subscriptions[o]){if(-1!==this.subscriptions[o].indexOf(s))throw Error("".concat(t,".").concat(r," already subscribed to ").concat(n))}else this.subscriptions[o]=[];this.subscriptions[o].push(s)}},{key:"removeSubscription",value:function(t,e,n,i){if(ea!==this)throw Error("Cannot remove a model subscription from outside model code");var r=e+":"+n,o=t.id+"."+i,s=this.subscriptions[r];if(s){var a=s.indexOf(o);s.splice(a,1),0===s.length&&delete this.subscriptions[r]}}},{key:"removeAllSubscriptionsFor",value:function(t){for(var e="".concat(t.id,":"),n="".concat(t.id,"."),i=0,r=Object.entries(this.subscriptions);i<r.length;i++){var o=g(r[i],2),s=o[0],a=o[1];if(s.startsWith(e))delete this.subscriptions[s];else{for(var c=a.length-1;c>=0;c--)a[c].startsWith(n)&&a.splice(c,1);0===a.size&&delete this.subscriptions[s]}}}},{key:"publishFromModel",value:function(t,e,n){if(ea!==this)throw Error("Cannot publish a model event from outside model code");var i=e.endsWith("#reflected");i&&(e=e.slice(0,e.length-"#reflected".length));var r=t+":"+e;this.handleModelEventInModel(r,n,i),this.handleModelEventInView(r,n)}},{key:"publishFromModelOnly",value:function(t,e,n){if(ea!==this)throw Error("Cannot publish a model event from outside model code");var i=t+":"+e;this.handleModelEventInModel(i,n)}},{key:"publishFromView",value:function(t,e,n){if(ea)throw Error("Cannot publish a view event from model code");var i=t+":"+e;this.handleViewEventInModel(i,n),this.handleViewEventInView(i,n)}},{key:"handleBundledEvents",value:function(t,e){var n,i=S(e.events);try{for(i.s();!(n=i.n()).done;){var r=n.value;fa.fromState(r,this).executeOn(this,!0)}}catch(t){i.e(t)}finally{i.f()}}},{key:"handleModelEventInModel",value:function(t,e){var n=this,i=arguments.length>2&&void 0!==arguments[2]&&arguments[2];if(ea!==this)throw Error("handleModelEventInModel called from outside model code");if(i){if(!0!==this.controller.synced)return;var r=t+"#__vote",o=t+"#divergence",s=!!oe.subscriptions[r],a=!!this.subscriptions[t],c=!!this.subscriptions[o];s&&c&&console.log("divergence subscription for ".concat(t," overridden by vote subscription"));var l,u=a?new fa(this.time,0,this.id,"handleModelEventInModel",[t,e]):null;l=s?[this.id,"handleModelEventInView",r]:[this.id,"handleTuttiDivergence",o],Promise.resolve().then((function(){return n.controller.sendTutti(n.time,t,e,u,s,l)}))}else if(this.subscriptions[t]){var d,h=S(this.subscriptions[t]);try{for(h.s();!(d=h.n()).done;){var f=d.value,m=f.split("."),p=Z(m),y=p[0],b=p.slice(1),v=b.join("."),g=this.lookUpModel(y);if(g)if("{"!==v[0])if(-1===v.indexOf(".")){if("function"!=typeof g[v]){Ft("event ".concat(t," ").concat(g,".").concat(v,"(): method not found"));continue}try{g[v](e)}catch(e){Ft("event ".concat(t," ").concat(g,".").concat(v,"()"),e)}}else try{var w=v.split(".");g.call(w[0],w[1],e)}catch(e){Ft("event ".concat(t," ").concat(g,".").concat(v,"()"),e)}else{var X=oa(v,g);try{X(e)}catch(e){Ft("event ".concat(t," ").concat(g," ").concat(X),e)}}else zt("event ".concat(t," .").concat(v,"(): subscriber not found"))}}catch(t){h.e(t)}finally{h.f()}}}},{key:"handleViewEventInModel",value:function(t,e){if(this.subscriptions[t]){var n=new fa(this.time,0,this.id,"handleModelEventInModel",[t,e]);this.controller.sendMessage(n)}}},{key:"handleModelEventInView",value:function(t,e){var n=this;oe.handleEvent(t,e,(function(t){return function(t){if(!ea)throw Error("Island confusion");var e=ea;try{ea=null,t()}finally{ea=e}}((function(){return he(n,t,!0)}))}))}},{key:"handleViewEventInView",value:function(t,e){oe.handleEvent(t,e)}},{key:"handleTuttiDivergence",value:function(t,e){if(this.subscriptions[t])this.handleModelEventInModel(t,e);else{var n=t.split(":").slice(-1)[0];console.warn("uncaptured divergence in ".concat(n,":"),e)}}},{key:"processModelViewEvents",value:function(t){var e=this;if(ea)throw Error("cannot process view events in model code");return he(this,(function(){return oe.processFrameEvents(t,!!e.controller.synced)}))}},{key:"pollToCheckSync",value:function(){var t=this,e=this.time;if(!0===this.controller.synced){var n=Date.now(),i=this.getSummaryHash(),r=Date.now()-n;this.controller.cpuTime-=r,Promise.resolve().then((function(){return t.controller.syncCheck(e,i)}))}}},{key:"handlePollForSnapshot",value:function(){var t=this.time,e=t-this.lastSnapshotPoll;e<5e3?console.log("rejecting snapshot poll ".concat(e,"ms after previous")):(this.lastSnapshotPoll=t,this.controller.handlePollForSnapshot(t))}},{key:"snapshot",value:function(){return ya.newOrRecycled(this).snapshot(this,"$")}},{key:"getSummaryHash",value:function(){return fe((new pa).getHash(this))}},{key:"persist",value:function(e,n){var i=Wt.begin("snapshot"),r="function"==typeof n?n.call(e):n;if("object"!==t(r))throw Error("Croquet: persistSession() can only persist objects (got ".concat(t(r),")"));var o,s,a=fe(r),c=$s.hash(a),l=Wt.end("snapshot")-i,u=this.persisted===c,d=this.time;if(na.snapshot&&console.log("".concat(this.id," persistent data @").concat(d," collected, stringified and hashed in ").concat(Math.ceil(l),"ms").concat(u?" (unchanged, ignoring)":"")),!u)if(o=this,s={persistTime:d,persistentString:a,persistentHash:c,ms:l},aa.set(o,s),this.persisted=c,this.inPersistenceCoolOff)na.snapshot&&console.log("".concat(this.id," persistence poll postponed by cooloff"));else{var h=this.lastPersistencePoll?this.lastPersistencePoll+25e3-this.time:0;h>0?(na.snapshot&&console.log("".concat(this.id," postponing persistence poll by ").concat(h,"ms")),this.futureSend(h,this.id,"triggerPersistencePoll",[]),this.inPersistenceCoolOff=!0):this.triggerPersistencePoll()}}},{key:"triggerPersistencePoll",value:function(){var t=this;this.inPersistenceCoolOff=!1,this.lastPersistencePoll=this.controller?this.time:0;var e,n=(e=this,aa.get(e));if(n){var i=n.persistTime,r=n.persistentString,o=n.persistentHash,s=n.ms;if(ca(this),this.controller&&this.controller.synced){na.snapshot&&console.log("".concat(this.id," asking controller to poll for persistence @").concat(i));var a=this.time;Promise.resolve().then((function(){return t.controller.pollForPersist(a,i,r,o,s)}))}}}},{key:"random",value:function(){if(ea!==this)throw Error("replicated random accessed from outside the model");return this._random()}},{key:"randomID",value:function(){if(ea!==this)throw Error("replicated random accessed from outside the model");for(var t="",e=0;e<4;e++)t+=(this._random.int32()>>>0).toString(16).padStart(8,"0");return t}},{key:"toString",value:function(){return"Island[".concat(this.id,"]")}},{key:Symbol.toPrimitive,value:function(){return this.toString()}}]),e}();function ua(t,e,n){n.length>0&&(n=va.newOrRecycled().encode(n));return"".concat(t,">").concat(e).concat(n.length>0?JSON.stringify(n):"")}function da(t,e){var n=g(t.match(/^([^[]+)(\[.*)?$/i),3),i=(n[0],n[1]),r=n[2],o=g(i.split(">"),2),s=o[0],a=o[1],c=[];r&&(c=ga.newOrRecycled(e).decode(JSON.parse(r)));return{receiver:s,selector:a,args:c}}function ha(t,e){return(e-t|0)>=0}var fa=function(){function t(e,n,r,o,s){i(this,t),this.time=e,this.seq=n,this.receiver=r,this.selector=o,this.args=s}return o(t,[{key:"convertIfNeeded",value:function(t){if(this.payload){var e=da(this.payload,t),n=e.receiver,i=e.selector,r=e.args;delete this.payload,this.receiver=n,this.selector=i,this.args=r}return this}},{key:"before",value:function(t){return this.time!==t.time?this.time<t.time:this.isExternal()!==t.isExternal()?t.isExternal():this.isExternal()?ha(this.externalSeq,t.externalSeq):ha(this.internalSeq,t.internalSeq)}},{key:"hasReceiver",value:function(t){return this.receiver===t}},{key:"isExternal",value:function(){return 1&this.seq}},{key:"asState",value:function(){return[this.time,this.seq,ua(this.receiver,this.selector,this.args)]}},{key:"executeOn",value:function(t){var e=this,n=arguments.length>1&&void 0!==arguments[1]&&arguments[1],i=n?function(t){return t()}:function(e){return sa(t,(function(){return de(t,e)}))},r=this.receiver,o=this.selector,s=this.args,a=t.lookUpModel(r);if(a)if("{"===o[0]){var c=oa(o,a);i((function(){try{c.apply(void 0,w(s))}catch(t){Ft("".concat(e.shortString()," ").concat(c),t)}}))}else"function"!=typeof a[o]?zt("".concat(this.shortString()," ").concat(a,".").concat(o,"(): method not found")):i((function(){try{a[o].apply(a,w(s))}catch(t){Ft("".concat(e.shortString()," ").concat(a,".").concat(o,"()"),t)}}));else zt("".concat(this.shortString()," ").concat(o,"(): receiver not found"))}},{key:"shortString",value:function(){return"".concat(this.isExternal()?"External":"Future","Message")}},{key:"toString",value:function(){var t=this.receiver,e=this.selector,n=this.args,i=this.isExternal(),r=i?this.externalSeq:this.internalSeq;return"".concat(i?"External":"Future","Message[").concat(this.time).concat(":#"[+i]).concat(r," ").concat(t,".").concat(e,"(").concat(n.map(JSON.stringify).join(", "),")]")}},{key:Symbol.toPrimitive,value:function(){return this.toString()}},{key:"externalSeq",get:function(){return this.seq/2>>>0},set:function(t){this.seq=2*t+1}},{key:"internalSeq",get:function(){return this.seq/2>>>0},set:function(t){this.seq=2*t}}],[{key:"fromState",value:function(e,n){var i=g(e,3),r=i[0],o=i[1],s=da(i[2],n);return new t(r,o,s.receiver,s.selector,s.args)}}]),t}(),ma=function(){var t=new ArrayBuffer(8),e=new DataView(t);return function(t){return e.setFloat64(0,t,!0),e.getInt32(0,!0)+e.getInt32(4,!0)}}(),pa=function(){function e(){i(this,e),this.refs=new Map,this.todo=[],this.hashers=new Map,this.addHasher("Teatime:Message",fa),this.addHasher("Teatime:Data",ta);var t,n=S(ka.allClassTypes());try{for(n.s();!(t=n.n()).done;){var r=g(t.value,2),o=r[0],s=r[1];this.addHasher(o,s)}}catch(t){n.e(t)}finally{n.f()}}return o(e,[{key:"addHasher",value:function(t,e){var n=this,i=Object.getPrototypeOf(e)===Object.prototype?e:{cls:e,write:function(t){return c({},t)}},r=i.cls,o=i.write;this.hashers.set(r,(function(t){return n.hashStructure(t,o(t))}))}},{key:"getHash",value:function(t){this.hashState={oC:0,mC:0,nanC:0,infC:0,zC:0,nC:0,nH:0,sC:0,sL:0,fC:0};for(var e=0,n=Object.entries(t);e<n.length;e++){var i=g(n[e],2),r=i[0],o=i[1];if("controller"!==r&&"meta"!==r)if("_random"===r)this.hash(o.state(),!1);else if("messages"===r){var s=o.asArray();(this.hashState.fC=s.length)&&this.hash(s,!1)}else this.hashEntry(r,o)}return this.hashDeferred(),this.hashState}},{key:"hashDeferred",value:function(){for(;this.todo.length>0;){var t=this.todo.shift(),e=t.key,n=t.value;this.hashEntry(e,n,!1)}}},{key:"hash",value:function(e){var n=!(arguments.length>1&&void 0!==arguments[1])||arguments[1];switch(t(e)){case"number":return void(Number.isNaN(e)?this.hashState.nanC++:Number.isFinite(e)?0===e?this.hashState.zC++:(this.hashState.nC++,this.hashState.nH+=ma(e)):this.hashState.infC++);case"string":return this.hashState.sC++,void(this.hashState.sL+=e.length);case"boolean":case"undefined":return;default:if(this.refs.has(e))return;var i=Object.prototype.toString.call(e).slice(8,-1);switch(i){case"Array":return void this.hashArray(e,n);case"ArrayBuffer":return void this.hashArray(new Uint8Array(e),!1);case"Set":case"Map":return void this.hashStructure(e,w(e));case"DataView":return void this.hashArray(new Uint8Array(e.buffer,e.byteOffset,e.byteLength),!1);case"Int8Array":case"Uint8Array":case"Uint8ClampedArray":case"Int16Array":case"Uint16Array":case"Int32Array":case"Uint32Array":case"Float32Array":case"Float64Array":return void this.hashArray(e,!1);case"Object":if(e instanceof ka)this.hashModel(e);else if(e.constructor===Object)this.hashObject(e,n);else{var r=this.hashers.get(e.constructor);r&&r(e)}}}}},{key:"hashModel",value:function(t){this.hashState.mC++,this.refs.set(t,!0);for(var e=0,n=Object.entries(t);e<n.length;e++){var i=g(n[e],2),r=i[0],o=i[1];"__realm"!==r&&(void 0!==o&&this.hashEntry(r,o))}}},{key:"hashObject",value:function(t){var e=!(arguments.length>1&&void 0!==arguments[1])||arguments[1];this.hashState.oC++,this.refs.set(t,!0);for(var n=0,i=Object.entries(t);n<i.length;n++){var r=g(i[n],2),o=r[0],s=r[1];void 0!==s&&this.hashEntry(o,s,e)}}},{key:"hashArray",value:function(t){var e=!(arguments.length>1&&void 0!==arguments[1])||arguments[1];this.refs.set(t,!0);for(var n=0;n<t.length;n++)this.hashEntry(n,t[n],e)}},{key:"hashStructure",value:function(t,e){void 0!==e&&(this.refs.set(t,!0),this.hash(e,!1))}},{key:"hashEntry",value:function(e,n){var i=!(arguments.length>2&&void 0!==arguments[2])||arguments[2];"$"!==e[0]?i&&"object"===t(n)?this.todo.push({key:e,value:n}):this.hash(n):zt("hash: ignoring property ".concat(e),{only:"once"})}}]),e}(),ya=function(){function e(t){i(this,e),this.island=t,this.nextRef=1,this.refs=new Map,this.todo=[],this.writers=new Map,this.addWriter("Teatime:Message",fa),this.addWriter("Teatime:Data",ta);var n,r=S(ka.allClassTypes());try{for(r.s();!(n=r.n()).done;){var o=g(n.value,2),s=o[0],a=o[1];this.addWriter(s,a)}}catch(t){r.e(t)}finally{r.f()}}return o(e,null,[{key:"newOrRecycled",value:function(t){var e=this.reusableInstance;return e?(e.island=t,e.nextRef=1,e.refs=new Map,e.todo=[]):e=this.reusableInstance=new this(t),e}},{key:"resetInstance",value:function(){this.reusableInstance=null}},{key:"reusableInstance",get:function(){return this[this.name+"-instance"]},set:function(t){this[this.name+"-instance"]=t}}]),o(e,[{key:"addWriter",value:function(t,e){var n=this,i=Object.getPrototypeOf(e)===Object.prototype?e:{cls:e,write:function(t){return c({},t)}},r=i.cls,o=i.write;this.writers.set(r,(function(e,i){return n.writeAs(t,e,o(e),i)}))}},{key:"snapshot",value:function(t){for(var e={_random:t._random.state(),messages:this.write(t.messages.asArray())},n=0,i=Object.entries(t);n<i.length;n++){var r=g(i[n],2),o=r[0],s=r[1];"controller"!==o&&(e[o]||this.writeInto(e,o,s,"$"))}return this.writeDeferred(),e}},{key:"writeDeferred",value:function(){for(;this.todo.length>0;){var t=this.todo.shift(),e=t.state,n=t.key,i=t.value,r=t.path;this.writeInto(e,n,i,r,!1)}}},{key:"write",value:function(e,n){var i=!(arguments.length>2&&void 0!==arguments[2])||arguments[2];switch(t(e)){case"number":return Object.is(e,-0)?{$class:"NegZero"}:Number.isSafeInteger(e)?e:Number.isNaN(e)?{$class:"NaN"}:Number.isFinite(e)?this.writeFloat(e):{$class:"Infinity",$value:Math.sign(e)};case"string":case"boolean":return e;case"undefined":return{$class:"Undefined"};default:if(this.refs.has(e))return this.writeRef(e);var r=Object.prototype.toString.call(e).slice(8,-1);switch(r){case"Array":return this.writeArray(e,n,i);case"ArrayBuffer":return this.writeArrayBuffer(e);case"Set":case"Map":return this.writeAs(r,e,w(e),n);case"DataView":case"Int8Array":case"Uint8Array":case"Uint8ClampedArray":case"Int16Array":case"Uint16Array":case"Int32Array":case"Uint32Array":case"Float32Array":case"Float64Array":return this.writeTypedArray(r,e);case"Object":if(e instanceof ka)return this.writeModel(e,n);if(e.constructor===Object||"function"!=typeof e.constructor)return this.writeObject(e,n,i);var o=this.writers.get(e.constructor);if(o)return o(e,n);throw console.error("Croquet Snapshot: unknown class ".concat(n,":"),e),Error("Croquet Snapshot: class not registered in Model.types(): ".concat(e.constructor.name));case"Null":return e;default:throw console.error("Croquet Snapshot: unsupported property ".concat(n,":"),e),Error("Croquet Snapshot: ".concat(r,"s are not supported as model properties"))}}}},{key:"writeModel",value:function(t,e){var n={$model:ka.classToID(t.constructor)};this.refs.set(t,n);var i,r=S(Object.keys(t).sort());try{for(r.s();!(i=r.n()).done;){var o=i.value;if("__realm"!==o){var s=t[o];this.writeInto(n,o,s,e)}}}catch(t){r.e(t)}finally{r.f()}return n}},{key:"writeObject",value:function(t,e){var n=!(arguments.length>2&&void 0!==arguments[2])||arguments[2],i={};this.refs.set(t,i);var r,o=S(Object.keys(t).sort());try{for(o.s();!(r=o.n()).done;){var s=r.value,a=t[s];this.writeInto(i,s,a,e,n)}}catch(t){o.e(t)}finally{o.f()}return i}},{key:"writeArray",value:function(t,e){var n=!(arguments.length>2&&void 0!==arguments[2])||arguments[2],i=[];this.refs.set(t,i);for(var r=0;r<t.length;r++)this.writeInto(i,r,t[r],e,n);return i}},{key:"writeArrayBuffer",value:function(t){var e={$class:"ArrayBuffer",$value:wa(t)};return this.refs.set(t,e),e}},{key:"writeTypedArray",value:function(t,e){var n={$class:t,$value:[this.writeArrayBuffer(e.buffer),e.byteOffset,"DataView"===t?e.byteLength:e.length]};return this.refs.set(e,n),n}},{key:"writeFloat",value:function(t){return t}},{key:"writeAs",value:function(e,n,i,r){if(void 0===i)return i;var o={$class:e};this.refs.set(n,o);var s=this.write(i,r,!1);return"object"!==t(s)||s.$class||Array.isArray(s)?o.$value=s:Object.assign(o,s),o}},{key:"writeRef",value:function(e){var n=this.refs.get(e);if("object"!==t(n))throw Error("Non-object in refs: "+e);return Array.isArray(n)&&(n.toJSON=function(){return{$id:this.$id,$class:"Array",$value:w(this)}}),{$ref:n.$id||(n.$id=this.nextRef++)}}},{key:"writeInto",value:function(e,n,i,r){var o=!(arguments.length>4&&void 0!==arguments[4])||arguments[4];if("$"!==n[0])if(o&&"object"===t(i))this.todo.push({state:e,key:n,value:i,path:r});else{var s="string"==typeof n&&n.match(/^[_a-z][_a-z0-9]*$/i),a=r+(s?".".concat(n):"[".concat(JSON.stringify(n),"]")),c=this.write(i,a);void 0!==c&&(e[n]=c)}else zt("snapshot: ignoring property ".concat(n),{only:"once"})}}]),e}(),ba=function(){function e(t){i(this,e),this.island=t,this.refs=new Map,this.todo=[],this.unresolved=[],this.readers=new Map,this.addReader("Teatime:Message",fa),this.addReader("Teatime:Data",ta);var n,r=S(ka.allClassTypes());try{for(r.s();!(n=r.n()).done;){var o=g(n.value,2),s=o[0],a=o[1];this.addReader(s,a)}}catch(t){r.e(t)}finally{r.f()}this.readers.set("Undefined",(function(){})),this.readers.set("NaN",(function(){return NaN})),this.readers.set("Infinity",(function(t){return t*(1/0)})),this.readers.set("NegZero",(function(){return-0})),this.readers.set("Set",(function(t){return new Set(t)})),this.readers.set("Map",(function(t){return new Map(t)})),this.readers.set("Array",(function(t){return t.slice(0)})),this.readers.set("ArrayBuffer",(function(t){return function(t){for(var e=window.atob(t),n=e.length,i=new Uint8Array(n),r=0;r<n;r++)i[r]=e.charCodeAt(r);return i.buffer}(t)})),this.readers.set("DataView",(function(t){return f(DataView,w(t))})),this.readers.set("Int8Array",(function(t){return f(Int8Array,w(t))})),this.readers.set("Uint8Array",(function(t){return f(Uint8Array,w(t))})),this.readers.set("Uint8ClampedArray",(function(t){return f(Uint8ClampedArray,w(t))})),this.readers.set("Int16Array",(function(t){return f(Int16Array,w(t))})),this.readers.set("Uint16Array",(function(t){return f(Uint16Array,w(t))})),this.readers.set("Int32Array",(function(t){return f(Int32Array,w(t))})),this.readers.set("Uint32Array",(function(t){return f(Uint32Array,w(t))})),this.readers.set("Float32Array",(function(t){return f(Float32Array,w(t))})),this.readers.set("Float64Array",(function(t){return f(Float64Array,w(t))}))}return o(e,null,[{key:"newOrRecycled",value:function(t){var e=this.reusableInstance;return e?(e.island=t,e.refs=new Map,e.todo=[],e.unresolved=[]):e=this.reusableInstance=new this(t),e}},{key:"resetInstance",value:function(){this.reusableInstance=null}},{key:"reusableInstance",get:function(){return this[this.name+"-instance"]},set:function(t){this[this.name+"-instance"]=t}}]),o(e,[{key:"addReader",value:function(e,n){var i="object"===t(n)?n.read:function(t){return Object.assign(Object.create(n.prototype),t)};this.readers.set(e,i)}},{key:"readIsland",value:function(t,e){if("$"!==e)throw Error("Island must be root object");for(var n={_random:new me(null,{state:t._random})},i=0,r=Object.entries(t);i<r.length;i++){var o=g(r[i],2),s=o[0],a=o[1];n[s]||this.readInto(n,s,a,e)}return this.readDeferred(),this.resolveRefs(),n}},{key:"readDeferred",value:function(){for(;this.todo.length>0;){var t=this.todo.shift(),e=t.object,n=t.key,i=t.value,r=t.path;this.readInto(e,n,i,r,1)}}},{key:"resolveRefs",value:function(){var t,e=S(this.unresolved);try{for(e.s();!(t=e.n()).done;){var n=t.value,i=n.object,r=n.key,o=n.ref,s=n.path;if(!this.refs.has(o))throw Error("Unresolved ref: ".concat(o," at ").concat(s,"[").concat(JSON.stringify(r),"]"));i[r]=this.refs.get(o)}}catch(t){e.e(t)}finally{e.f()}}},{key:"read",value:function(e,n){var i=arguments.length>2&&void 0!==arguments[2]?arguments[2]:0;switch(t(e)){case"number":case"string":case"boolean":return e;default:var r=Object.prototype.toString.call(e).slice(8,-1);switch(r){case"Array":return this.readArray(e,n,i);case"Null":return null;case"Object":var o=e.$class,s=e.$model,a=e.$ref;if(a)throw Error("refs should have been handled in readInto()");return s?this.readModel(e,n):o?this.readAs(o,e,n):this.readObject(Object,e,n,i);default:throw Error("Don't know how to deserialize ".concat(r," at ").concat(n))}}}},{key:"readModel",value:function(t,e){var n=ka.instantiateClassID(t.$model,t.id);t.$id&&this.refs.set(t.$id,n);for(var i=0,r=Object.entries(t);i<r.length;i++){var o=g(r[i],2),s=o[0],a=o[1];"id"!==s&&"$"!==s[0]&&this.readInto(n,s,a,e)}return n}},{key:"readObject",value:function(t,e,n){var i=arguments.length>3&&void 0!==arguments[3]?arguments[3]:0,r=new t;e.$id&&this.refs.set(e.$id,r);for(var o=0,s=Object.entries(e);o<s.length;o++){var a=g(s[o],2),c=a[0],l=a[1];"$"!==c[0]&&this.readInto(r,c,l,n,i)}return r}},{key:"readArray",value:function(t,e){var n=arguments.length>2&&void 0!==arguments[2]?arguments[2]:0,i=[];t.$id&&this.refs.set(t.$id,i);for(var r=0;r<t.length;r++)void 0!==t[r]&&this.readInto(i,r,t[r],e,n);return i}},{key:"readAs",value:function(t,e,n){var i={},r=new Map;if("$value"in e)i=this.read(e.$value,n,2);else for(var o=0,s=Object.entries(e);o<s.length;o++){var a=g(s[o],2),c=a[0],l=a[1];if("$"!==c[0]){var u=l&&l.$ref;u?this.refs.has(u)?i[c]=this.refs.get(u):(i[c]="<unresolved>",r.set(u,c)):this.readInto(i,c,l,n,1)}}var d=this.readers.get(t)(i,n);d||"Undefined"===t||"NaN"===t||"NegZero"===t||console.warn('Reading "'.concat(t,'" returned ').concat(d," at ").concat(n)),e.$id&&this.refs.set(e.$id,d);var h,f=S(r.entries());try{for(f.s();!(h=f.n()).done;){var m=g(h.value,2),p=m[0],y=m[1];this.unresolved.push({object:d,key:y,ref:p,path:n})}}catch(t){f.e(t)}finally{f.f()}return d}},{key:"readRef",value:function(t,e,n,i){if(!n||!n.$ref)return!1;var r=n.$ref;return this.refs.has(r)?t[e]=this.refs.get(r):(t[e]="<unresolved>",this.unresolved.push({object:t,key:e,ref:r,path:i})),!0}},{key:"readInto",value:function(e,n,i,r){var o=arguments.length>4&&void 0!==arguments[4]?arguments[4]:0;if(!this.readRef(e,n,i,r))if(0!==o||"object"!==t(i)){var s="string"==typeof n&&n.match(/^[_a-z][_a-z0-9]*$/i),a=r+(s?".".concat(n):"[".concat(JSON.stringify(n),"]"));e[n]=this.read(i,a,o>0?o-1:0)}else this.todo.push({object:e,key:n,value:i,path:r})}}]),e}(),va=function(t){l(n,ya);var e=b(n);function n(){return i(this,n),e.apply(this,arguments)}return o(n,[{key:"encode",value:function(t){var e=this.writeArray(t,"$");return this.writeDeferred(),e}},{key:"writeModel",value:function(t){return{$ref:t.id}}}]),n}(),ga=function(t){l(n,ba);var e=b(n);function n(){return i(this,n),e.apply(this,arguments)}return o(n,[{key:"decode",value:function(t){var e=this.readArray(t,"$");return this.readDeferred(),this.resolveRefs(),e}},{key:"resolveRefs",value:function(){var t,e=S(this.unresolved);try{for(e.s();!(t=e.n()).done;){var n=t.value,i=n.object,r=n.key,o=n.ref,s=n.path;if(this.refs.has(o))i[r]=this.refs.get(o);else{var a=this.island.lookUpModel(o);if(!a)throw Error("Unresolved ref: ".concat(o," at ").concat(s,"[").concat(JSON.stringify(r),"]"));i[r]=a}}}catch(t){e.e(t)}finally{e.f()}}}]),n}();function Za(t){var e,n=arguments.length>1&&void 0!==arguments[1]?arguments[1]:"",i=arguments.length>2&&void 0!==arguments[2]?arguments[2]:{},r=arguments.length>3&&void 0!==arguments[3]?arguments[3]:new Set,o=Object.values(t).filter((function(t){var e=Object.prototype.toString.call(t).slice(8,-1);return("Object"===e||"Array"===e)&&!r.has(t)})),s=S(o);try{for(s.s();!(e=s.n()).done;){var a=e.value;r.add(a);var c=n+"."+a.constructor.name;if(i[c]){if(i[c]!==a.constructor)throw new Error("Class with name "+c+" already gathered, but new one has different identity")}else i[c]=a.constructor}}catch(t){s.e(t)}finally{s.f()}var l,u=S(o);try{for(u.s();!(l=u.n()).done;){var d=l.value;Za(d,n,i,r)}}catch(t){u.e(t)}finally{u.f()}}function wa(t){for(var e=new Uint8Array(t),n=e.byteLength,i="",r=0;r<n;r++)i+=String.fromCharCode(e[r]);return window.btoa(i)}var Xa=V.has("debug","classes",!1),La=Symbol("SECRET"),xa=new WeakSet,ka=function(){function t(e){if(i(this,t),e!==La)throw Error("You must create ".concat(this,' using create() not "new"!'))}return o(t,null,[{key:"create",value:function(e,n,i){if(!Ya(this))throw Error('Model class "'.concat(this.name,'" not registered'));var r=ue(),o=new this(La);return Object.defineProperty(o,"__realm",{value:r}),Object.defineProperty(o,"id",{value:r.register(o),enumerable:!0}),xa.add(o),"string"==typeof n&&(console.warn('Croquet: Model.create(..., "'.concat(n,'") with a well-known name argument is deprecated!')),o.beWellKnownAs(n),n=void 0),i&&o.beWellKnownAs(i),o.init(e,n),xa.has(o)&&(xa.delete(o),Object.getPrototypeOf(this)!==t&&console.warn("".concat(o," did not call super.init(options)"))),o}},{key:"createNoInit",value:function(t){var e=ue(),n=new this(La);return Object.defineProperty(n,"__realm",{value:e}),Object.defineProperty(n,"id",{value:t,enumerable:!0}),n}},{key:"allowConstructors",value:function(){La=void 0,console.warn("disabling error reporting for Model constructors")}},{key:"register",value:function(t){return t||(t=this.name,console.warn("Deprecation warning: ".concat(this.name,".register(classId) called without classId. See https://croquet.io/sdk/docs/Model.html#.register"))),ba.resetInstance(),ya.resetInstance(),va.resetInstance(),ga.resetInstance(),function(t,e){var n=H(t),i=E("".concat(e,":").concat(n));D.push(i),F()&&i.then((function(t){_[t].what="Class ".concat(e)}))}(this,t),function(t,e){var n=Ga[e];if(n&&n!==t)throw Error("Registering model class ".concat(t.name,' failed, id "').concat(e,'" already used by ').concat(n.name));Ya(t)?Xa&&!n&&console.warn("ignoring re-exported model class ".concat(e)):(Xa&&console.log("registering model class ".concat(e)),t[Sa]=e);Ga[e]=t}(this,t),this}},{key:"wellKnownModel",value:function(t){if(!la.hasCurrent())throw Error("static Model.wellKnownModel() called from outside model");return la.current().get(t)}},{key:"types",value:function(){return{}}},{key:"classToID",value:function(t){return function(t){if(Ya(t))return t[Sa];throw Error('Class "'.concat(t.name,'" not found, did you call ').concat(t.name,'.register("').concat(t.name,'")?'))}(t)}},{key:"classFromID",value:function(t){return Ca(t)}},{key:"allClasses",value:function(){return Wa()}},{key:"allClassTypes",value:function(){return function(){var t,e={},n=S(Wa());try{for(n.s();!(t=n.n()).done;){var i=t.value;Object.assign(e,i.types())}}catch(t){n.e(t)}finally{n.f()}return Object.entries(e)}()}},{key:"instantiateClassID",value:function(t,e){return Ca(t).createNoInit(e)}}]),o(t,[{key:"init",value:function(t){xa.delete(this)}},{key:"destroy",value:function(){ue().unsubscribeAll(this),ue().deregister(this)}},{key:"publish",value:function(t,e,n){this.__realm||this.__realmError(),this.__realm.publish(e,n,t)}},{key:"subscribe",value:function(t,e,n){return this.__realm||this.__realmError(),this.__realm.subscribe(this,t,e,n)}},{key:"unsubscribe",value:function(t,e){this.__realm||this.__realmError(),this.__realm.unsubscribe(this,t,e)}},{key:"unsubscribeAll",value:function(){this.__realm||this.__realmError(),this.__realm.unsubscribeAll(this)}},{key:"__realmError",value:function(){if(!this.id)throw Error("".concat(this," has no ID, did you call super.init(options)?"))}},{key:"future",value:function(){var t=arguments.length>0&&void 0!==arguments[0]?arguments[0]:0,e=arguments.length>1?arguments[1]:void 0;this.__realm||this.__realmError();for(var n=arguments.length,i=new Array(n>2?n-2:0),r=2;r<n;r++)i[r-2]=arguments[r];return this.__realm.future(this,t,e,i)}},{key:"random",value:function(){return ue().random()}},{key:"now",value:function(){return ue().now()}},{key:"beWellKnownAs",value:function(t){ue().island.set(t,this)}},{key:"getModel",value:function(t){return this.__realm.island.lookUpModel(t)}},{key:"wellKnownModel",value:function(t){return this.__realm.island.get(t)}},{key:"modelOnly",value:function(t){if(la.current()===this.__realm.island)return!0;var e=Error(t||"".concat(this,".modelOnly() called from outside a model!"));throw Ft("view code",e),e}},{key:"persistSession",value:function(t){if(this!==this.wellKnownModel("modelRoot"))throw Error("persistSession() must only be called on the root model");this.__realm.island.persist(this,t)}},{key:Symbol.toPrimitive,value:function(){var t=this.constructor[Sa]||this.constructor.name;return t.includes("Model")?t:"".concat(t,"[Model]")}},{key:"sessionId",get:function(){return this.__realm.island.id}},{key:"viewCount",get:function(){return Object.keys(this.__realm.island.views).length}}]),t}(),Ga={},Sa=Symbol("CLASS_ID");function Wa(){return Object.values(Ga)}function Ya(t){return Object.prototype.hasOwnProperty.call(t,Sa)}function Ca(t){if(Ga[t])return Ga[t];throw Error('Class "'.concat(t,'" in snapshot, but not found in current source?'))}ka[Sa]="Croquet.Model",Ga["Croquet.Model"]=ka;var Ia=function(){function e(n){i(this,e),"object"===t(n)&&"__realm"in n||console.warn("Croquet: argument to View constructor needs to be a Model");var r=ue("");r&&r.isViewRealm()||(r=he(n.__realm.island,(function(){return ue()}),!0)),Object.defineProperty(this,"realm",{value:r}),Object.defineProperty(this,"id",{value:r.register(this),configurable:!0})}return o(e,null,[{key:"displayStatus",value:function(t,e){return jt(t,e)}},{key:"displayWarning",value:function(t,e){return zt(t,e)}},{key:"displayError",value:function(t,e){return Nt(t,e)}}]),o(e,[{key:"detach",value:function(){this.unsubscribeAll(),this.realm.deregister(this),Object.defineProperty(this,"id",{value:""})}},{key:"reattach",value:function(){Object.defineProperty(this,"id",{value:this.realm.register(this)})}},{key:"publish",value:function(t,e,n){this.realm.publish(e,n,t)}},{key:"subscribe",value:function(t,e,n){"string"==typeof n&&(n=this[n]),n=n.bind(this);var i=e.event?e:{event:e},r=i.event,o=i.handling;this.realm.subscribe(r,this.id,n,t,o)}},{key:"unsubscribe",value:function(t,e){this.realm.unsubscribe(e,this.id,null,t)}},{key:"unsubscribeAll",value:function(){this.realm.unsubscribeAll(this.id)}},{key:"future",value:function(){var t=arguments.length>0&&void 0!==arguments[0]?arguments[0]:0;return this.realm.future(this,t)}},{key:"random",value:function(){return ue().random()}},{key:"now",value:function(){return this.realm.now()}},{key:"externalNow",value:function(){return this.realm.externalNow()}},{key:"extrapolatedNow",value:function(){return this.realm.extrapolatedNow()}},{key:"update",value:function(t){}},{key:"wellKnownModel",value:function(t){return this.realm.island.get(t)}},{key:Symbol.toPrimitive,value:function(){var t=this.constructor.name;return t.includes("View")?t:"".concat(t,"[View]")}},{key:"sessionId",get:function(){return this.realm.island.id}},{key:"session",get:function(){return this.realm.island.controller.session}},{key:"viewId",get:function(){return this.realm.island.controller.viewId}}]),e}(),Ta=new(function(){function t(){i(this,t),this.ready=!1,this.isInIframe=window.top!==window,this.subscriptions={},this.enumerator=null}return o(t,[{key:"setReceiver",value:function(t){this.receiver=t,this.ready=!0}},{key:"setIframeEnumerator",value:function(t){this.enumerator=t}},{key:"on",value:function(t,e){var n=this;if(!this.receiver)throw Error("setReceiver() has not been called");if("string"==typeof e&&(e=this.receiver[e]),!e)throw Error("Messenger.on: the second argument must be a method name or a function");if(this.subscriptions[t]){if(this.findIndex(this.subscriptions[t],e)>=0)throw Error("".concat(e," is already subscribed"))}else this.subscriptions[t]=[];this.subscriptions[t].push(e),this.listener||(this.listener=function(t){return n.receive(t)},window.addEventListener("message",this.listener))}},{key:"detach",value:function(){this.listener&&(window.removeEventListener("message",this.listener),this.listener=null),this.stopPublishingPointerMove(),this.receiver=null,this.subscriptions={},this.enumerator=null,this.ready=!1}},{key:"removeSubscription",value:function(t,e){"string"==typeof e&&(e=this.receiver[e]);var n=this.subscriptions[t];if(n){var i=this.findIndex(n,e);n.splice(i,1),0===n.length&&delete this.subscriptions[t]}}},{key:"removeAllSubscriptions",value:function(){this.subscriptions={}}},{key:"receive",value:function(t){var e=t.data,n=e.event,i=e.data,r=t.source;this.handleEvent(n,i,r)}},{key:"handleEvent",value:function(t,e,n){var i=this,r=this.subscriptions[t];r&&r.forEach((function(t){t.call(i.receiver,e,n)}))}},{key:"send",value:function(t,e,n){this.isInIframe?window.top.postMessage({event:t,data:e},"*"):n?n.postMessage({event:t,data:e},"*"):this.enumerator&&this.enumerator().forEach((function(n){n.contentWindow.postMessage({event:t,data:e},"*")}))}},{key:"findIndex",value:function(t,e){var n=e.name;return t.findIndex((function(t){var i=t.name;return n||i?n===i:e===t}))}},{key:"startPublishingPointerMove",value:function(){var t=this;this._moveHandler||(this._moveHandler=function(e){return t.send("pointerPosition",{x:e.clientX,y:e.clientY,type:e.type})},window.document.addEventListener("pointermove",this._moveHandler,!0))}},{key:"stopPublishingPointerMove",value:function(){this._moveHandler&&(window.document.removeEventListener("pointermove",this._moveHandler,!0),this._moveHandler=null)}}]),t}());var Ra=60,Ka=function(){function e(){i(this,e)}var r,s;return o(e,null,[{key:"join",value:(s=n(regeneratorRuntime.mark((function i(r){var o,s,a,l,u,d,h,f,m,p,y,b,v,Z,X,L,x,k,G,S,W,Y,C,I,T,R;return regeneratorRuntime.wrap((function(i){for(;;)switch(i.prev=i.next){case 0:if(R=function(){L.model=null,L.view&&(V.has("debug","session",!1)&&console.log(L.id,"detaching root view"),L.view.detach(),""!==L.view.id&&console.warn("Croquet: ".concat(L.view," did not call super.detach()")),L.view=null),ee.clearSessionMoniker(),Ta.ready&&Ta.detach()},T=function(){return(T=n(regeneratorRuntime.mark((function t(){return regeneratorRuntime.wrap((function(t){for(;;)switch(t.prev=t.next){case 0:if(R(),!Z.leaving){t.next=4;break}return Z.leaving(!0),t.abrupt("return");case 4:if(!C){t.next=6;break}return t.abrupt("return");case 6:return C=!0,t.next=9,Z.establishSession(x);case 9:C=!1,L.model=Z.island.get("modelRoot"),L.id=Z.id,L.persistentId=Z.persistentId,L.versionId=Z.versionId,Z.session=L,ee.makeSessionWidgets(L.id),Z.inViewRealm((function(){V.has("debug","session",!1)&&console.log(L.id,"creating root view"),L.view=new f(L.model)}));case 17:case"end":return t.stop()}}),t)})))).apply(this,arguments)},I=function(){return T.apply(this,arguments)},d=function(t,e){return t===e||t.prototype instanceof e},"object"===t(r)){i.next=6;break}throw Error("Croquet: please use new Session.join( {apiKey, ...} ) API. See https://croquet.io/sdk/docs/Session.html#.join");case 6:o=0,s=Object.entries(r);case 7:if(!(o<s.length)){i.next=16;break}if(a=g(s[o],2),l=a[0],!((u=a[1])instanceof Promise)){i.next=13;break}return i.next=12,u;case 12:r[l]=i.sent;case 13:o++,i.next=7;break;case 16:if("string"==typeof r.apiKey){i.next=18;break}throw Error("Croquet: no apiKey provided in Session.join()!");case 18:if(!(r.apiKey.length>128)){i.next=20;break}throw Error("Croquet: apiKey > 128 characters in Session.join()!");case 20:if("string"==typeof r.name){i.next=22;break}throw Error("Croquet: no session name provided in Session.join()!");case 22:if(!(r.name.length>128)){i.next=24;break}throw Error("Croquet: session name > 128 characters in Session.join()!");case 24:if("function"==typeof(h=r.model)&&d(h,ka)){i.next=27;break}throw Error("Croquet: bad model class in Session.join()");case 27:if("function"==typeof(f=r.view||Ia)&&d(f,Ia)){i.next=30;break}throw Error("Croquet: bad view class in Session.join()");case 30:if("string"==typeof r.appId){i.next=32;break}throw Error("Croquet: no appId provided in Session.join()");case 32:if(!(!r.appId.length>128)){i.next=34;break}throw Error("Croquet: appId > 128 characters in Session.join()");case 34:if(r.appId.match(/^[a-z](-?[a-z0-9_])*(\.[a-z0-9_](-?[a-z0-9_])*)+$/i)){i.next=36;break}throw Error("Croquet: malformed appId in Session.join()");case 36:if("string"==typeof r.password&&r.password){i.next=38;break}throw Error("Croquet: no password provided in Session.join()");case 38:if((m=V.reflector||r.reflector)&&(m.includes("://")||m.match(/^[-a-z0-9]+$/i)?V.reflector=m:console.warn('Croquet: Not a valid websocket url, ignoring reflector "'.concat(m,'"'))),!("rejoinLimit"in r)){i.next=45;break}if(!("number"!=typeof r.rejoinLimit||r.rejoinLimit<0||r.rejoinLimit>6e4)){i.next=43;break}throw Error("rejoinLimit range: 0-60000");case 43:i.next=46;break;case 45:r.rejoinLimit=1e3;case 46:if(!("eventRateLimit"in r)){i.next=51;break}if(!("number"!=typeof r.eventRateLimit||r.eventRateLimit<1||r.eventRateLimit>60)){i.next=49;break}throw Error("eventRateLimit range: 1-60");case 49:i.next=52;break;case 51:r.eventRateLimit=20;case 52:if(!r.heraldUrl){i.next=57;break}if(!(r.heraldUrl.length>256)){i.next=55;break}throw Error("heraldUrl can only be 256 characters");case 55:if(r.heraldUrl.startsWith("https://")){i.next=57;break}throw Error("heraldUrl needs to be https");case 57:if(!r.hashOverride){i.next=62;break}if(43===r.hashOverride.length){i.next=60;break}throw Error("hashOverride must be 43 characters");case 60:if(-1===r.hashOverride.search(/[^-_a-zA-Z0-9]/)){i.next=62;break}throw Error("hashOverride must be base64url encoded");case 62:if(r.debug&&(p=function(t){return"string"==typeof t&&(t=t.split(",")),t?Array.isArray(t)?t:[t]:[]},V.debug=[].concat(w(p(r.debug)),w(p(V.debug))).join(",")),!("autoSleep"in r)){i.next=78;break}if(y=r.autoSleep,"number"!==(b=t(y))){i.next=71;break}if(!(y<0)){i.next=69;break}throw Error("an autoSleep value must be >= 0");case 69:i.next=76;break;case 71:if("boolean"!==b){i.next=75;break}r.autoSleep=y?10:0,i.next=76;break;case 75:throw Error("autoSleep must be numeric or boolean");case 76:i.next=79;break;case 78:r.autoSleep=10;case 79:"expectedSimFPS"in r&&(Ra=Math.min(r.expectedSimFPS,120)),v=["name","password","apiKey","appId","tps","autoSleep","heraldUrl","rejoinLimit","eventRateLimit","optionsFromUrl","viewIdDebugSuffix","hashOverride"],Ma(),Z=new js,X=JSON.parse(JSON.stringify(c({},r.options))),i.t0=function(t){Z.stepSession("animation",{frameTime:t,view:L.view,expectedSimFPS:Ra})},i.t1=function(){return e.leave(L.id)},L={id:"",persistentId:"",versionId:"",model:null,view:null,step:i.t0,leave:i.t1,get latency(){return Z.latency},get latencies(){return Z.latencies}},x={options:X,initFn:function(t,e){return h.create(t,e,"modelRoot")},rebootModelView:I};for(k=0,G=Object.entries(r);k<G.length;k++)S=g(G[k],2),W=S[0],Y=S[1],v.includes(W)&&(x[W]=Y);return i.next=91,Z.initFromSessionSpec(x);case 91:return C=!1,i.next=94,I();case 94:return"manual"!==r.step&&Z.startStepping(L.step),i.abrupt("return",L);case 96:case"end":return i.stop()}}),i)}))),function(t){return s.apply(this,arguments)})},{key:"leave",value:(r=n(regeneratorRuntime.mark((function t(e){var n,i,r;return regeneratorRuntime.wrap((function(t){for(;;)switch(t.prev=t.next){case 0:if(n=zs(e)){t.next=3;break}return t.abrupt("return",!1);case 3:if(n.reconnectTimeout&&(clearTimeout(n.reconnectTimeout),delete n.reconnectTimeout),i=new Promise((function(t){return n.leaving=t})),(r=n.connection).connected){t.next=8;break}return t.abrupt("return",!1);case 8:return r.closeConnection(1e3),t.abrupt("return",i);case 10:case"end":return t.stop()}}),t)}))),function(t){return r.apply(this,arguments)})},{key:"thisSession",value:function(){var t=la.current();return t?t.id:""}}]),e}(),Pa={};function Va(e){if(!Object.isFrozen(e)){Object.freeze(e);for(var n=0,i=Object.values(e);n<i.length;n++){var r=i[n];!r||"object"!==t(r)&&"function"!=typeof r||Va(r)}}}function Ma(){Object.isFrozen(Pa)||(Va(Pa),function(t){var e=JSON.stringify(t,(function(t,e){return"function"==typeof e?H(e):e}));if("{}"!==e){var n=JSON.parse(e),i=E(M(n));D.push(i),F()&&i.then((function(t){_[t].what="Croquet Constants"}))}}(Pa))}exports.App=ee,exports.Constants=Pa,exports.Data=$s,exports.Messenger=Ta,exports.Model=ka,exports.Session=Ka,exports.View=Ia,exports.gatherInternalClassTypes=function(t,e){var n={};return Za({root:t},e,n,new Set),n},exports.startSession=function(){return ee.showMessage("Croquet.startSession() is deprecated, please use Croquet.Session.join()",{level:"warning",only:"once"}),Ka.join.apply(Ka,arguments)};

